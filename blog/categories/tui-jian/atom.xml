<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: æ¨è | åˆšåˆšåœ¨çº¿]]></title>
  <link href="http://www.superqq.com/blog/categories/tui-jian/atom.xml" rel="self"/>
  <link href="http://www.superqq.com/"/>
  <updated>2015-08-09T13:21:41+08:00</updated>
  <id>http://www.superqq.com/</id>
  <author>
    <name><![CDATA[æåˆš]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[performance-optimization-of-MKMapView]]></title>
    <link href="http://www.superqq.com/blog/2015/08/09/performance-optimization-of-mkmapview/"/>
    <updated>2015-08-09T13:18:21+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/09/performance-optimization-of-mkmapview</id>
    <content type="html"><![CDATA[<h2>å‰è¨€</h2>

<p>æœ€è¿‘åšçš„é¡¹ç›®ä¸»è¦æ˜¯LBSè¿™å— ä¸»æ‰“æˆå‘˜å®šä½åŠŸèƒ½ æˆ‘ä»¬çš„UIè®¾è®¡æ˜¯è¿™æ ·çš„</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-1.png" alt="Pic-MK-1" /></p>

<p>ä¹ä¸€çœ‹ä¸Šå»æ˜¯æŒºå¥½æŒºç¾è§‚çš„ ä¸åŒçš„äººä¼šæ˜¾ç¤ºä¸åŒçš„å¤´åƒ å¯æ˜¯å½“äººæ‰å †çš„æ—¶å€™ é—®é¢˜å°±æ¥äº†</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-2.png" alt="Pic-MK-2" /></p>

<p>å½“äººå¤šçš„æ—¶å€™(ä¾‹å¦‚ä¸Šå›¾æ‰€ç¤º) åœ°å›¾æ»‘åŠ¨èµ·æ¥å°±èƒ½æ„Ÿè§‰åˆ°æ˜æ˜¾é¡¿å¡ é‚£ç§ä¸æµç•…æ„Ÿèƒ½æŠ˜ç£¨æ­»äºº æ‰€ä»¥ è‡ªç„¶æˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜(ç­‰ç­‰ å…ˆä¸è¦åæ§½ä¸ºä»€ä¹ˆä¸ç”¨åœ°å›¾èšåˆ å› ä¸ºè¿™å·²ç»æ˜¯åœ°å›¾æ”¾åˆ°æœ€å¤§äº† èšåˆä¸é€‚åˆè¿™æ¬¡çš„é—®é¢˜è®¨è®º)</p>

<h2>åˆ†æ</h2>

<p>é¦–å…ˆçœ‹ä¸‹æˆ‘æ˜¯æ€ä¹ˆå®ç°è¿™ä¸ªannotationViewçš„ ç”±äºè¿™ä¸ªannotationsViewæ˜¯å¼‚å½¢çš„(ä¹Ÿå°±æ˜¯æ— æ³•é€šè¿‡è®¾ç½®åœ†è§’ç›´æ¥å¾—åˆ°) è€Œä¸”é‡Œé¢çš„å›¾ç‰‡è¿˜å› ç”¨æˆ·è€Œå¼‚ æ‰€ä»¥è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨layer.maskæ¥è¿›è¡Œé®ç½© ä»£ç å¦‚ä¸‹</p>

<pre><code>@implementation MMAnnotationView

- (instancetype)initWithAnnotation:(id&lt;MKAnnotation&gt;)annotation reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if ( self )
    {
        self.frame = CGRectMake(0, 0, TRACK_ANNOTATION_SIZE.width, TRACK_ANNOTATION_SIZE.height);
        self.centerOffset = CGPointMake(0, -(TRACK_ANNOTATION_SIZE.height-3)/2);
        self.canShowCallout = NO;

        self.avatarView = [[UIImageView alloc] initWithFrame:self.bounds];
        [self addSubview:self.avatarView];
        self.avatarView.contentMode = UIViewContentModeScaleAspectFill;

        CAShapeLayer *shapelayer = [CAShapeLayer layer];
        shapelayer.frame = self.bounds;
        shapelayer.path = self.framePath.CGPath;
        self.avatarView.layer.mask = shapelayer;

        self.layer.shadowPath = self.framePath.CGPath;
        self.layer.shadowRadius = 1.0f;
        self.layer.shadowColor = [UIColor colorWithHex:0x666666FF].CGColor;
        self.layer.shadowOpacity = 1.0f;
        self.layer.shadowOffset = CGSizeMake(0, 0);
        self.layer.masksToBounds = NO;
    }
    return self;
}

//maskè·¯å¾„
- (UIBezierPath *)framePath
{
    if ( !_framePath )
    {
        CGFloat arrowWidth = 14;

        CGMutablePathRef path = CGPathCreateMutable();

        CGRect rectangle = CGRectInset(CGRectMake(0, 0, CGRectGetWidth(self.bounds), CGRectGetWidth(self.bounds)), 3,3);

        CGPoint p[3] = {
        {CGRectGetMidX(self.bounds)-arrowWidth/2, CGRectGetWidth(self.bounds)-6},
        {CGRectGetMidX(self.bounds)+arrowWidth/2, CGRectGetWidth(self.bounds)-6},
        {CGRectGetMidX(self.bounds), CGRectGetHeight(self.bounds)-4}
        };

        CGPathAddRoundedRect(path, NULL, rectangle, 5, 5);
        CGPathAddLines(path, NULL, p, 3);

        CGPathCloseSubpath(path);

        _framePath = [UIBezierPath bezierPathWithCGPath:path];

        CGPathRelease(path);
    }

    return _framePath;
}
</code></pre>

<p>æˆ‘ç”¨ä»£ç ç”Ÿæˆäº†å½¢çŠ¶è·¯å¾„ å¹¶ä»¥æ­¤ç”Ÿæˆäº†layerçš„maskå’ŒshadowPath
ä½¿ç”¨æ—¶ åªè¦ç›´æ¥ç”¨SDWebImageè®¾ç½®å¤´åƒå°±è¡Œäº†</p>

<pre><code>[annotationView.avatarView sd_setImageWithURL:[NSURL URLWithString:avatarURL] placeholderImage:placeHolderImage];
</code></pre>

<p>æ¥ä¸‹æ¥ç”¨å·¥å…·åˆ†æä¸€ä¸‹é—®é¢˜å‡ºæ¥å“ª åˆ†ææ€§èƒ½å½“ç„¶æ˜¯é€‰æ‹©Instrments(ç”¨æ³•åœ¨è¿™é‡Œå°±ä¸åšä»‹ç»äº†) æ‰“å¼€Core Animation ç„¶åè¿è¡Œç¨‹åº æ»‘åŠ¨åœ°å›¾ å¯ä»¥çœ‹åˆ°æ€§èƒ½åˆ†æå¦‚ä¸‹</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-3.jpg" alt="Pic-MK-3" /></p>

<p>åŸæ¥å¹³å‡å¸§æ•°åªæœ‰ä¸åˆ°30å¸§ è¿™ç¦»æˆ‘ä»¬çš„ç›®æ ‡60å¸§å·®å¾—å®åœ¨å¤ªè¿œ</p>

<p>å†ä½¿ç”¨Debug Optionæ¥æ·±å…¥åˆ†æä¸€ä¸‹</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-4.png" alt="Pic-MK-4" /></p>

<p>ç”±äºMKMapViewçš„åŸå›  è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³å¿ƒè¿™å‡ ä¸ªé€‰é¡¹</p>

<ul>
<li>Color Blended Layers</li>
<li>Color Misaligned Images</li>
<li>Color Offscreen-Rendered Yellow</li>
</ul>


<p>åˆ†åˆ«æ‰“å¼€è¿™å‡ ä¸ªé€‰é¡¹ ç»“æœå¦‚ä¸‹</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-5.png" alt="Pic-MK-5" /></p>

<p>å¯ä»¥çœ‹åˆ°</p>

<ul>
<li>Color Blended Layersæ²¡æœ‰é—®é¢˜ ä¸è¿‡è¿™ä¹Ÿæ˜¯æ­£å¸¸çš„ ç”±äºä½¿ç”¨äº†mask æ²¡æœ‰é€æ˜çš„åœ°æ–¹</li>
<li>Color Misaligned Imagesé™¤äº†é»˜è®¤å¤´åƒå¤–å…¨ä¸­ è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨ä¸Šçš„å›¾ç‰‡å¤§å°è·Ÿæ˜¾ç¤ºçš„å¤§å°ä¸ä¸€è‡´ å¯¼è‡´ç¼©æ”¾ è€Œé»˜è®¤å¤´åƒåˆ™æ˜¯ä¸€è‡´çš„ æ‰€ä»¥æ²¡é—®é¢˜</li>
<li>Color Offscreen-Rendered Yellowå…¨ä¸­ ç”±äºä½¿ç”¨äº†mask å¯¼è‡´å¤§é‡çš„ç¦»å±æ¸²æŸ“ è¿™ä¹Ÿæ˜¯æ€§èƒ½ä¸‹é™çš„ä¸»è¦åŸå› </li>
</ul>


<h2>è§£å†³</h2>

<p>é—®é¢˜çš„åŸå› æ‰¾åˆ°äº† é‚£ä¹ˆæ¥ä¸‹æ¥è¯¥å¦‚ä½•è§£å†³å‘¢?</p>

<ul>
<li>é¦–å…ˆmaskæ˜¯è‚¯å®šä¸èƒ½ç”¨äº†</li>
<li><p>å…¶æ¬¡ä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡æˆ‘ä»¬è¦é¢„å¤„ç†æˆå®é™…å¤§å°
é‚£ä¹ˆ ç›´æ¥æŠŠä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡åˆæˆä¸ºæˆ‘ä»¬è¦æ˜¾ç¤ºçš„æœ€ç»ˆç»“æœä¸å°±okäº†å—? è¯•è¯•çœ‹</p>

<pre><code>  - (void)loadAnnotationImageWithURL:(NSString*)url imageView:(UIImageView*)imageView
  {
      //å°†åˆæˆåçš„å›¾ç‰‡ç¼“å­˜èµ·æ¥
      NSString *annoImageURL = url;
      NSString *annoImageCacheURL = [annoImageURL stringByAppendingString:@"cache"];

      UIImage *cacheImage = [[SDImageCache sharedImageCache] imageFromDiskCacheForKey:annoImageCacheURL];
      if ( cacheImage )
      {
          //LLLog(@"hit cache");
          imageView.image = cacheImage;
      }
      else
      {
          //LLLog(@"no cache");
          [imageView sd_setImageWithURL:[NSURL URLWithString:annoImageURL]
          placeholderImage:placeHolderImage
          completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {
          if (!error)
          {
              UIImage *annoImage = [image annotationImage];
              imageView.image = annoImage;

              [[SDImageCache sharedImageCache] storeImage:annoImage forKey:annoImageCacheURL];
              }
          }];
      }
  }

  @implementation UIImage (LJC)
  - (UIImage*) annotationImage
  {
      static UIView *snapshotView = nil;
      static UIImageView *imageView = nil;

      if ( !snapshotView )
      {
          snapshotView = [UIView new];
          snapshotView.frame = CGRectMake(0, 0, TRACK_ANNOTATION_SIZE.width, TRACK_ANNOTATION_SIZE.height);

          imageView = [UIImageView new];
          [snapshotView addSubview:imageView];
          imageView.clipsToBounds = YES;
          imageView.frame = snapshotView.bounds;
          imageView.contentMode = UIViewContentModeScaleAspectFill;

          CGFloat arrowWidth = 14;

          CGMutablePathRef path = CGPathCreateMutable();

          CGRect rectangle = CGRectInset(CGRectMake(0, 0, CGRectGetWidth(imageView.bounds), CGRectGetWidth(imageView.bounds)), 3,3);

          CGPoint p[3] = {
              {CGRectGetMidX(imageView.bounds)-arrowWidth/2, CGRectGetWidth(imageView.bounds)-6},
              {CGRectGetMidX(imageView.bounds)+arrowWidth/2, CGRectGetWidth(imageView.bounds)-6},
              {CGRectGetMidX(imageView.bounds), CGRectGetHeight(imageView.bounds)-4}
          };

          CGPathAddRoundedRect(path, NULL, rectangle, 5, 5);
          CGPathAddLines(path, NULL, p, 3);

          CGPathCloseSubpath(path);

          CAShapeLayer *shapelayer = [CAShapeLayer layer];
          shapelayer.frame = imageView.bounds;
          shapelayer.path = path;

          imageView.layer.mask = shapelayer;

          snapshotView.layer.shadowPath = path;
          snapshotView.layer.shadowRadius = 1.0f;
          snapshotView.layer.shadowColor = [UIColor colorWithHex:0x666666FF].CGColor;
          snapshotView.layer.shadowOpacity = 1.0f;
          snapshotView.layer.shadowOffset = CGSizeMake(0, 0);

          CGPathRelease(path);
      }

      imageView.image = self;

      UIGraphicsBeginImageContextWithOptions(TRACK_ANNOTATION_SIZE, NO, 0);

      [snapshotView.layer renderInContext:UIGraphicsGetCurrentContext()];

      UIImage *copied = UIGraphicsGetImageFromCurrentImageContext();
      UIGraphicsEndImageContext();

      return copied;
  }
  @end
</code></pre></li>
</ul>


<p>ç„¶åä½¿ç”¨çš„æ—¶å€™ åªè¦ç®€å•çš„å¦‚ä¸‹è°ƒç”¨å°±OKäº†</p>

<pre><code>[self loadAnnotationImageWithURL:avatarURL imageView:annotationView.avatarView];
</code></pre>

<p>çœ‹çœ‹ä¿®æ”¹ä¹‹åçš„Instrumentsè¡¨ç°å¦‚ä½•</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-6.png" alt="Pic-MK-6" /></p>

<ul>
<li>Color Blended Layerså…¨ä¸­ è¿™ä¹Ÿæ˜¯æ— å¯é¿å…çš„ å› ä¸ºæ˜¾ç¤ºçš„å°±æ˜¯ä¸€å¼ å¸¦é€æ˜åº¦çš„å›¾ ä½†æ˜¯ç”±äºåœ°å›¾çš„ç‰¹æ®Šæ€§(å¤´åƒçš„ä½ç½®å˜åŒ–é—´éš”è¾ƒé•¿ æ‰€ä»¥ä¸ä¼šç»å¸¸å¼•å‘åˆæˆ ä¹Ÿæ²¡æœ‰åŠ¨ç”») æ‰€ä»¥è¿™é‡Œä¹Ÿä¸æ˜¯é—®é¢˜</li>
<li>Color Misaligned Imagesæ²¡é—®é¢˜äº† å› ä¸ºå¤´åƒå·²è¢«ç¼©æ”¾æˆäº†ç›¸åŒå¤§å°</li>
<li>Color Offscreen-Rendered Yellowæ²¡é—®é¢˜äº† å› ä¸ºåªæ˜¯ç®€å•çš„æ˜¾ç¤ºäº†ä¸€å¼ å›¾ç‰‡ è€Œå¹¶æ²¡æœ‰éœ€è¦ç¦»å±æ¸²æŸ“çš„ä¸œè¥¿äº†</li>
</ul>


<p>å†æ¥çœ‹ä¸‹å¸§æ•°æƒ…å†µ</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-7.jpg" alt="Pic-MK-7" /></p>

<p>Oh-Yeah~ ä¸å…‰å¸§æ•°è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®æ ‡60å¸§(ç”±äºè¿˜æœ‰ä¸šåŠ¡é€»è¾‘çº¿ç¨‹åœ¨åå°è·‘ æ‰€ä»¥æ²¡æœ‰é‚£ä¹ˆçš„ç¨³å®š) å°±è¿å¹³å‡è¿è¡Œè€—æ—¶éƒ½ä¸‹é™äº†ä¸å°‘ å°±ç®—åœ°å›¾ä¸Šå†å¤šæ˜¾ç¤ºå‡ åä¸ªäºº ä¹Ÿä¸æˆé—®é¢˜äº†</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„iOSã€‹é¢è¯•é¢˜å‚è€ƒç­”æ¡ˆï¼ˆä¸Šï¼‰]]></title>
    <link href="http://www.superqq.com/blog/2015/08/08/interview-ios-question-answer/"/>
    <updated>2015-08-08T00:16:38+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/08/interview-ios-question-answer</id>
    <content type="html"><![CDATA[<blockquote><p>æ¨èç†ç”±ï¼šæœ€è¿‘æ¯”è¾ƒğŸ”¥çš„å…³äºiOSå¼€å‘é¢è¯•é¢˜çš„æ–‡ç« ã€‚ç®€å•å–µäº†ä¸€çœ¼ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼Œä½œè€…sunnyxxä¹Ÿæ˜¯ä¸ªå¤§ç‰›ã€‚ç‰¹æ­¤æ¨èï¼</p></blockquote>

<p><a href="http://blog.sunnyxx.com/2015/07/04/ios-interview/">ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„ iOSã€‹</a>â€”å‚è€ƒç­”æ¡ˆï¼ˆä¸Šï¼‰</p>

<p>è¯´æ˜ï¼šé¢è¯•é¢˜æ¥æºæ˜¯<a href="http://weibo.com/u/1364395395">å¾®åš@æˆ‘å°±å«Sunnyæ€ä¹ˆäº†</a>çš„è¿™ç¯‡åšæ–‡ï¼š<a href="http://blog.sunnyxx.com/2015/07/04/ios-interview/">ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„ iOSã€‹</a>ï¼Œå…¶ä¸­å…±55é¢˜ï¼Œé™¤ç¬¬ä¸€é¢˜ä¸ºçº é”™é¢˜å¤–ï¼Œå…¶ä»–54é“å‡ä¸ºç®€ç­”é¢˜ã€‚</p>

<p>å‡ºé¢˜è€…ç®€ä»‹ï¼š å­™æºï¼ˆsunnyxxï¼‰ï¼Œç›®å‰å°±èŒäºç™¾åº¦ï¼Œè´Ÿè´£ç™¾åº¦çŸ¥é“ iOS å®¢æˆ·ç«¯çš„å¼€å‘å·¥ä½œï¼Œå¯¹æŠ€æœ¯å–œæ¬¢åˆ¨æ ¹é—®åº•å’Œæ€»ç»“æœ€ä½³å®è·µï¼Œçƒ­çˆ±åˆ†äº«å’Œå¼€æºï¼Œç»´æŠ¤ä¸€ä¸ªå« forkingdog çš„å¼€æºå°ç»„ã€‚</p>

<p>ç­”æ¡ˆä¸º<a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a>æ•´ç†ï¼Œæœªç»å‡ºé¢˜è€…æ ¡å¯¹ï¼Œå¦‚æœ‰çº°æ¼ï¼Œè¯·å‘<a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a>æŒ‡æ­£ã€‚</p>

<hr />

<h3>1. é£æ ¼çº é”™é¢˜</h3>

<p><img src="http://i.imgur.com/O7Zev94.png" alt="enter image description here" />
ä¿®æ”¹å®Œçš„ä»£ç ï¼š</p>

<p>ä¿®æ”¹æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œç°ç»™å‡ºä¸€ç§åšç¤ºä¾‹ï¼š</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä¿®æ”¹å®Œçš„ä»£ç ï¼Œè¿™æ˜¯ç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ï¼Œåé¢ä¼šç»™å‡ºç¬¬äºŒç§ä¿®æ”¹æ–¹æ³•

typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};

@interface CYLUser : NSObject&lt;NSCopying&gt;

@property (nonatomic, copy, readonly) NSString *name;
@property (nonatomic, assign, readonly) NSUInteger age;
@property (nonatomic, assign, readonly) CYLSex sex;

- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;

@end
</code></pre>

<p>ä¸‹é¢å¯¹å…·ä½“ä¿®æ”¹çš„åœ°æ–¹ï¼Œåˆ†ä¸¤éƒ¨åˆ†åšä¸‹ä»‹ç»ï¼š<strong><em>ç¡¬ä¼¤éƒ¨åˆ†</em></strong>å’Œ<strong><em>ä¼˜åŒ–éƒ¨åˆ†</em></strong>
ã€‚å› ä¸º<strong><em>ç¡¬ä¼¤éƒ¨åˆ†</em></strong>æ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œä¸ºäº†èŠ‚çœå¤§å®¶æ—¶é—´ï¼Œæ”¾åœ¨åé¢è®²ï¼Œå¤§ç¥è¯·ç›´æ¥çœ‹<strong><em>ä¼˜åŒ–éƒ¨åˆ†</em></strong>ã€‚</p>

<h4><strong><em>ä¼˜åŒ–éƒ¨åˆ†</em></strong></h4>

<ol>
<li><p>enumå»ºè®®ä½¿ç”¨ <code>NS_ENUM</code> å’Œ <code>NS_OPTIONS</code> å®æ¥å®šä¹‰æšä¸¾ç±»å‹ï¼Œå‚è§å®˜æ–¹çš„ <a href="https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ModernizationObjC/AdoptingModernObjective-C/AdoptingModernObjective-C.html">Adopting Modern Objective-C</a> ä¸€æ–‡ï¼š</p>

<pre><code class="objective-c">//å®šä¹‰ä¸€ä¸ªæšä¸¾
typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};
</code></pre></li>
<li>ageå±æ€§çš„ç±»å‹ï¼šåº”é¿å…ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œå»ºè®®ä½¿Foundationæ•°æ®ç±»å‹ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</li>
</ol>


<pre><code class="`Objective-C">    int -&gt; NSInteger
    unsigned -&gt; NSUInteger
    float -&gt; CGFloat
    åŠ¨ç”»æ—¶é—´ -&gt; NSTimeInterval
</code></pre>

<p>åŒæ—¶è€ƒè™‘åˆ°ageçš„ç‰¹ç‚¹ï¼Œåº”ä½¿ç”¨NSUIntegerï¼Œè€Œéintã€‚
è¿™æ ·åšçš„æ˜¯åŸºäº64-bit é€‚é…è€ƒè™‘ï¼Œè¯¦æƒ…å¯å‚è€ƒå‡ºé¢˜è€…çš„åšæ–‡<a href="http://blog.sunnyxx.com/2014/12/20/64-bit-tips/">ã€Š64-bit Tipsã€‹</a>ã€‚</p>

<ol>
<li>å¦‚æœå·¥ç¨‹é¡¹ç›®éå¸¸åºå¤§ï¼Œéœ€è¦æ‹†åˆ†æˆä¸åŒçš„æ¨¡å—ï¼Œå¯ä»¥åœ¨ç±»ã€typedefå®å‘½åçš„æ—¶å€™ä½¿ç”¨å‰ç¼€ã€‚</li>
<li>doLogInæ–¹æ³•ä¸åº”å†™åœ¨è¯¥ç±»ä¸­ï¼šè™½ç„¶<code>LogIn</code>çš„å‘½åä¸å¤ªæ¸…æ™°ï¼Œä½†ç¬”è€…çŒœæµ‹æ˜¯loginçš„æ„æ€ï¼Œè€Œç™»å½•æ“ä½œå±äºä¸šåŠ¡é€»è¾‘ï¼Œè§‚å¯Ÿç±»å UserModel ï¼Œä»¥åŠå±æ€§çš„å‘½åæ–¹å¼ï¼Œè¯¥ç±»åº”è¯¥æ˜¯ä¸€ä¸ª Model è€Œä¸æ˜¯ä¸€ä¸ªâ€œ MVVM æ¨¡å¼ä¸‹çš„ ViewModel â€ï¼š</li>
</ol>


<blockquote><p>æ— è®ºæ˜¯MVCæ¨¡å¼è¿˜æ˜¯MVVMæ¨¡å¼ï¼Œä¸šåŠ¡é€»è¾‘éƒ½ä¸åº”å½“å†™åœ¨Modelé‡Œã€‚</p></blockquote>

<p> ï¼ˆå¦‚æœæŠ›å¼€å‘½åè§„èŒƒï¼Œå‡è®¾è¯¥ç±»çœŸçš„æ˜¯MVVMæ¨¡å¼é‡Œçš„ ViewModel ï¼Œé‚£ä¹ˆUserModelè¿™ä¸ªç±»å¯èƒ½å¯¹åº”çš„æ˜¯ç”¨æˆ·æ³¨å†Œé¡µé¢ï¼Œå¦‚æœæœ‰ç‰¹æ®Šçš„ä¸šåŠ¡éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šloginå¯¹åº”çš„åº”å½“æ˜¯æ³¨å†Œå¹¶ç™»å½•çš„ä¸€ä¸ªButtonï¼Œå‡ºç°loginæ–¹æ³•ä¹Ÿå¯èƒ½æ˜¯åˆç†çš„ã€‚ï¼‰</p>

<ol>
<li>doLogInæ–¹æ³•å‘½åä¸è§„èŒƒï¼šæ·»åŠ äº†å¤šä½™çš„åŠ¨è¯å‰ç¼€ã€‚
è¯·ç‰¢è®°ï¼š</li>
</ol>


<blockquote><p>å¦‚æœæ–¹æ³•è¡¨ç¤ºè®©å¯¹è±¡æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œä½¿ç”¨åŠ¨è¯æ‰“å¤´æ¥å‘½åï¼Œæ³¨æ„ä¸è¦ä½¿ç”¨<code>do</code>ï¼Œ<code>does</code>è¿™ç§å¤šä½™çš„å…³é”®å­—ï¼ŒåŠ¨è¯æœ¬èº«çš„æš—ç¤ºå°±è¶³å¤Ÿäº†ã€‚
 11. <code>-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;</code>æ–¹æ³•ä¸­ä¸è¦ç”¨<code>with</code>æ¥è¿æ¥ä¸¤ä¸ªå‚æ•°:<code>withAge:</code>åº”å½“æ¢ä¸º<code>age:</code>ï¼Œ<code>age:</code>å·²ç»è¶³ä»¥æ¸…æ™°è¯´æ˜å‚æ•°çš„ä½œç”¨ï¼Œä¹Ÿä¸å»ºè®®ç”¨<code>andAge:</code>ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œå³ä½¿æœ‰ç±»ä¼¼<code>withA:withB:</code>çš„å‘½åéœ€æ±‚ï¼Œä¹Ÿé€šå¸¸æ˜¯ä½¿ç”¨<code>withA:andB:</code>è¿™ç§å‘½åï¼Œç”¨æ¥è¡¨ç¤ºæ–¹æ³•æ‰§è¡Œäº†ä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ“ä½œï¼ˆ<em>ä»è®¾è®¡ä¸Šæ¥è¯´ï¼Œè¿™æ—¶å€™ä¹Ÿå¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„æ–¹æ³•</em>ï¼‰ï¼Œå®ƒä¸åº”è¯¥ç”¨ä½œé˜æ˜æœ‰å¤šä¸ªå‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„ï¼š</p></blockquote>

<pre><code class="``objective-c">//é”™è¯¯ï¼Œä¸è¦ä½¿ç”¨"and"æ¥è¿æ¥å‚æ•°
- (int)runModalForDirectory:(NSString *)path andFile:(NSString *)name andTypes:(NSArray *)fileTypes;
//é”™è¯¯ï¼Œä¸è¦ä½¿ç”¨"and"æ¥é˜æ˜æœ‰å¤šä¸ªå‚æ•°
- (instancetype)initWithName:(CGFloat)width andAge:(CGFloat)height;
//æ­£ç¡®ï¼Œä½¿ç”¨"and"æ¥è¡¨ç¤ºä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ“ä½œ
- (BOOL)openFile:(NSString *)fullPath withApplication:(NSString *)appName andDeactivate:(BOOL)flag;
</code></pre>

<ol>
<li>ç”±äºå­—ç¬¦ä¸²å€¼å¯èƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥è¦æŠŠç›¸å…³å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€å£°æ˜ä¸ºcopyã€‚(åŸå› åœ¨ä¸‹æ–‡æœ‰è¯¦ç»†è®ºè¿°ï¼š<strong><em>ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</em></strong>)</li>
<li>â€œæ€§åˆ«â€(sexï¼‰å±æ€§çš„ï¼šè¯¥ç±»ä¸­åªç»™å‡ºäº†ä¸€ç§â€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ç”¨äºè®¾ç½®â€œå§“åâ€(Name)å’Œâ€œå¹´é¾„â€(Age)çš„åˆå§‹å€¼ï¼Œé‚£å¦‚ä½•å¯¹â€œæ€§åˆ«â€(Sexï¼‰åˆå§‹åŒ–ï¼Ÿ</li>
</ol>


<p> Objective-C æœ‰ designated å’Œ secondary åˆå§‹åŒ–æ–¹æ³•çš„è§‚å¿µã€‚ designated åˆå§‹åŒ–æ–¹æ³•æ˜¯æä¾›æ‰€æœ‰çš„å‚æ•°ï¼Œsecondary åˆå§‹åŒ–æ–¹æ³•æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„é»˜è®¤å‚æ•°æ¥è°ƒç”¨ designated åˆå§‹åŒ–æ–¹æ³•çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸¾ä¾‹è¯´æ˜ï¼š</p>

<pre><code class="`Objective-C">
    // .mæ–‡ä»¶
    // http://weibo.com/luohanchenyilong/
    // https://github.com/ChenYilong
    //

    @implementation CYLUser

    - (instancetype)initWithName:(NSString *)name
                             age:(NSUInteger)age
                             sex:(CYLSex)sex {
        if(self = [super init]) {
            _name = [name copy];
            _age = age;
            _sex = sex;
        }
        return self;
    }

    - (instancetype)initWithName:(NSString *)name
                             age:(NSUInteger)age {
        return [self initWithName:name age:age sex:nil];
    }

    @end
</code></pre>

<p> ä¸Šé¢çš„ä»£ç ä¸­initWithName:age:sex: å°±æ˜¯ designated åˆå§‹åŒ–æ–¹æ³•ï¼Œå¦å¤–çš„æ˜¯ secondary åˆå§‹åŒ–æ–¹æ³•ã€‚å› ä¸ºä»…ä»…æ˜¯è°ƒç”¨ç±»å®ç°çš„ designated åˆå§‹åŒ–æ–¹æ³•ã€‚</p>

<p>  å› ä¸ºå‡ºé¢˜è€…æ²¡æœ‰ç»™å‡º.mæ–‡ä»¶ï¼Œæ‰€ä»¥æœ‰ä¸¤ç§çŒœæµ‹ï¼š1ï¼šæœ¬æ¥æ‰“ç®—åªè®¾è®¡ä¸€ä¸ªdesignated åˆå§‹åŒ–æ–¹æ³•ï¼Œä½†æ¼æ‰äº†â€œæ€§åˆ«â€(sexï¼‰å±æ€§ã€‚é‚£ä¹ˆæœ€ç»ˆçš„ä¿®æ”¹ä»£ç å°±æ˜¯ä¸Šæ–‡ç»™å‡ºçš„ç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ã€‚2ï¼šä¸æ‰“ç®—åˆå§‹æ—¶åˆå§‹åŒ–â€œæ€§åˆ«â€(sexï¼‰å±æ€§ï¼Œæ‰“ç®—åæœŸå†ä¿®æ”¹ï¼Œå¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆåº”è¯¥æŠŠâ€œæ€§åˆ«â€(sexï¼‰å±æ€§è®¾ä¸ºreadwriteå±æ€§ï¼Œæœ€ç»ˆç»™å‡ºçš„ä¿®æ”¹ä»£ç åº”è¯¥æ˜¯ï¼š</p>

<pre><code class="`Objective-C">

    // .hæ–‡ä»¶
    // http://weibo.com/luohanchenyilong/
    // https://github.com/ChenYilong
    // ç¬¬äºŒç§ä¿®æ”¹æ–¹æ³•ï¼ˆåŸºäºç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•çš„åŸºç¡€ä¸Šï¼‰

    typedef NS_ENUM(NSInteger, CYLSex) {
        CYLSexMan,
        CYLSexWoman
    };

    @interface CYLUser : NSObject&lt;NSCopying&gt;

    @property (nonatomic, copy, readonly) NSString *name;
    @property (nonatomic, assign, readonly) NSUInteger age;
    @property (nonatomic, assign, readwrite) CYLSex sex;

    - (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
    - (instancetype)initWithName:(NSString *)name age:(NSUInteger)age;
    + (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;

    @end
</code></pre>

<p> .hä¸­æš´éœ² designated åˆå§‹åŒ–æ–¹æ³•ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å­ç±»åŒ– ï¼ˆæƒ³äº†è§£æ›´å¤šï¼Œè¯·æˆ³&ndash;ã€‹ <a href="http://is.gd/OQ49zk"><strong><em>ã€Šç¦…ä¸ Objective-C ç¼–ç¨‹è‰ºæœ¯ ï¼ˆZen and the Art of the Objective-C Craftsmanship ä¸­æ–‡ç¿»è¯‘ï¼‰ã€‹</em></strong></a>ã€‚ï¼‰</p>

<ol>
<li>æŒ‰ç…§æ¥å£è®¾è®¡çš„æƒ¯ä¾‹ï¼Œå¦‚æœè®¾è®¡äº†â€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ï¼Œä¹Ÿåº”å½“æ­é…ä¸€ä¸ªå¿«æ·æ„é€ æ–¹æ³•ã€‚è€Œå¿«æ·æ„é€ æ–¹æ³•çš„è¿”å›å€¼ï¼Œå»ºè®®ä¸ºinstancetypeï¼Œä¸ºä¿æŒä¸€è‡´æ€§ï¼Œinitæ–¹æ³•å’Œå¿«æ·æ„é€ æ–¹æ³•çš„è¿”å›ç±»å‹æœ€å¥½éƒ½ç”¨instancetypeã€‚</li>
<li><p>å¦‚æœåŸºäºç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ï¼šæ—¢ç„¶è¯¥ç±»ä¸­å·²ç»æœ‰ä¸€ä¸ªâ€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ï¼Œç”¨äºè®¾ç½®â€œå§“åâ€(Name)ã€â€œå¹´é¾„â€(Age)å’Œâ€œæ€§åˆ«â€(Sexï¼‰çš„åˆå§‹å€¼:
é‚£ä¹ˆåœ¨è®¾è®¡å¯¹åº”@propertyæ—¶å°±åº”è¯¥å°½é‡ä½¿ç”¨ä¸å¯å˜çš„å¯¹è±¡ï¼šå…¶ä¸‰ä¸ªå±æ€§éƒ½åº”è¯¥è®¾ä¸ºâ€œåªè¯»â€ã€‚ç”¨åˆå§‹åŒ–æ–¹æ³•è®¾ç½®å¥½å±æ€§å€¼ä¹‹åï¼Œå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä»éœ€å£°æ˜å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€ã€‚äºæ˜¯å¯ä»¥æŠŠå±æ€§çš„å®šä¹‰æ”¹æˆè¿™æ ·</p>

<pre><code>  @property (nonatomic, copy, readonly) NSString *name;
  @property (nonatomic, assign, readonly) NSUInter age;
  @property (nonatomic, assign, readonly) CYLSex sex;
ç”±äºæ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶åˆ›å»ºå¯¹åº”çš„â€œè®¾ç½®æ–¹æ³•â€ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å†™ä¸Šè¿™äº›å±æ€§çš„è¯­ä¹‰ï¼Œä»¥æ­¤è¡¨æ˜åˆå§‹åŒ–æ–¹æ³•åœ¨è®¾ç½®è¿™äº›å±æ€§å€¼æ—¶æ‰€ç”¨çš„æ–¹å¼ã€‚è¦æ˜¯ä¸å†™æ˜è¯­ä¹‰çš„è¯ï¼Œè¯¥ç±»çš„è°ƒç”¨è€…å°±ä¸çŸ¥é“åˆå§‹åŒ–æ–¹æ³•é‡Œä¼šæ‹·è´è¿™äº›å±æ€§ï¼Œä»–ä»¬æœ‰å¯èƒ½ä¼šåœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰è‡ªè¡Œæ‹·è´å±æ€§å€¼ã€‚è¿™ç§æ“ä½œå¤šä½™è€Œä¸”ä½æ•ˆã€‚
</code></pre></li>
<li><code>initUserModelWithUserName</code>å¦‚æœæ”¹ä¸º<code>initWithName</code>ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚</li>
<li><code>UserModel</code>å¦‚æœæ”¹ä¸º<code>User</code>ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚</li>
<li><code>UserSex</code>å¦‚æœæ”¹ä¸º<code>Sex</code>ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚</li>
</ol>


<h4><strong><em>ç¡¬ä¼¤éƒ¨åˆ†</em></strong></h4>

<ol>
<li>åœ¨-å’Œ(void)ä¹‹é—´åº”è¯¥æœ‰ä¸€ä¸ªç©ºæ ¼</li>
<li>enumä¸­é©¼å³°å‘½åæ³•å’Œä¸‹åˆ’çº¿å‘½åæ³•æ··ç”¨é”™è¯¯ï¼šæšä¸¾ç±»å‹çš„å‘½åè§„åˆ™å’Œå‡½æ•°çš„å‘½åè§„åˆ™ç›¸åŒï¼šå‘½åæ—¶ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œå‹¿ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•ã€‚</li>
<li>enumå·¦æ‹¬å·å‰åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œæˆ–è€…å°†å·¦æ‹¬å·æ¢åˆ°ä¸‹ä¸€è¡Œ</li>
<li>enumå³æ‹¬å·ååŠ ä¸€ä¸ªç©ºæ ¼</li>
<li><code>UserModel :NSObject</code> åº”ä¸º<code>UserModel : NSObject</code>ï¼Œä¹Ÿå°±æ˜¯<code>:</code>å³ä¾§å°‘äº†ä¸€ä¸ªç©ºæ ¼ã€‚</li>
<li>@interfaceä¸@propertyå±æ€§å£°æ˜ä¸­é—´åº”å½“é—´éš”ä¸€è¡Œã€‚</li>
<li>ä¸¤ä¸ªæ–¹æ³•å®šä¹‰ä¹‹é—´ä¸éœ€è¦æ¢è¡Œï¼Œæœ‰æ—¶ä¸ºäº†åŒºåˆ†æ–¹æ³•çš„åŠŸèƒ½ä¹Ÿå¯é—´éš”ä¸€è¡Œï¼Œä½†ç¤ºä¾‹ä»£ç ä¸­é—´éš”äº†ä¸¤è¡Œã€‚</li>
<li><p><code>-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;</code>æ–¹æ³•ä¸­æ–¹æ³•åä¸å‚æ•°ä¹‹é—´å¤šäº†ç©ºæ ¼ã€‚è€Œä¸”<code>-</code> ä¸<code>(id)</code>ä¹‹é—´å°‘äº†ç©ºæ ¼ã€‚</p></li>
<li><p><code>-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;</code>æ–¹æ³•ä¸­æ–¹æ³•åä¸å‚æ•°ä¹‹é—´å¤šäº†ç©ºæ ¼ï¼š<code>(NSString*)name</code>å‰å¤šäº†ç©ºæ ¼ã€‚</p></li>
<li><p><code>-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;</code>æ–¹æ³•ä¸­<code>(NSString*)name</code>,åº”ä¸º<code>(NSString *)name</code>ï¼Œå°‘äº†ç©ºæ ¼ã€‚</p></li>
<li>doLogInæ–¹æ³•å‘½åä¸æ¸…æ™°ï¼šç¬”è€…çŒœæµ‹æ˜¯loginçš„æ„æ€ï¼Œåº”è¯¥æ˜¯ç²—å¿ƒæ‰‹è¯¯é€ æˆçš„ã€‚</li>
<li>ç¬¬äºŒä¸ª@propertyä¸­assignå’Œnonatomicè°ƒæ¢ä½ç½®ã€‚</li>
</ol>


<h3>2. ä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Œç›¸æ¯” assign æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3>

<p>ä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Ÿ</p>

<ol>
<li><p>åœ¨ARCä¸­,åœ¨æœ‰å¯èƒ½å‡ºç°å¾ªç¯å¼•ç”¨çš„æ—¶å€™,å¾€å¾€è¦é€šè¿‡è®©å…¶ä¸­ä¸€ç«¯ä½¿ç”¨weakæ¥è§£å†³,æ¯”å¦‚:delegateä»£ç†å±æ€§</p></li>
<li><p>è‡ªèº«å·²ç»å¯¹å®ƒè¿›è¡Œä¸€æ¬¡å¼ºå¼•ç”¨,æ²¡æœ‰å¿…è¦å†å¼ºå¼•ç”¨ä¸€æ¬¡,æ­¤æ—¶ä¹Ÿä¼šä½¿ç”¨weak,è‡ªå®šä¹‰IBOutletæ§ä»¶å±æ€§ä¸€èˆ¬ä¹Ÿä½¿ç”¨weakï¼›å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨strongã€‚åœ¨ä¸‹æ–‡ä¹Ÿæœ‰è®ºè¿°ï¼š<strong><em>ã€ŠIBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?ã€‹</em></strong></p></li>
</ol>


<p>ä¸åŒç‚¹ï¼š</p>

<ol>
<li><p><code>weak</code> æ­¤ç‰¹è´¨è¡¨æ˜è¯¥å±æ€§å®šä¹‰äº†ä¸€ç§â€œéæ‹¥æœ‰å…³ç³»â€ (nonowning relationship)ã€‚ä¸ºè¿™ç§å±æ€§è®¾ç½®æ–°å€¼æ—¶ï¼Œè®¾ç½®æ–¹æ³•æ—¢ä¸ä¿ç•™æ–°å€¼ï¼Œä¹Ÿä¸é‡Šæ”¾æ—§å€¼ã€‚æ­¤ç‰¹è´¨åŒassignç±»ä¼¼ï¼Œ
ç„¶è€Œåœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚
è€Œ <code>assign</code> çš„â€œè®¾ç½®æ–¹æ³•â€åªä¼šæ‰§è¡Œé’ˆå¯¹â€œçº¯é‡ç±»å‹â€ (scalar typeï¼Œä¾‹å¦‚ CGFloat æˆ–
NSlnteger ç­‰)çš„ç®€å•èµ‹å€¼æ“ä½œã€‚</p></li>
<li><p>assigin å¯ä»¥ç”¨éOCå¯¹è±¡,è€Œweakå¿…é¡»ç”¨äºOCå¯¹è±¡</p></li>
</ol>


<h3>3. æ€ä¹ˆç”¨ copy å…³é”®å­—ï¼Ÿ</h3>

<p>ç”¨é€”ï¼š</p>

<ol>
<li>NSStringã€NSArrayã€NSDictionary ç­‰ç­‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼›</li>
<li>blockä¹Ÿç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œå…·ä½“åŸå› è§<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW12">å®˜æ–¹æ–‡æ¡£ï¼š<strong><em>Objects Use Properties to Keep Track of Blocks</em></strong></a>ï¼š</li>
</ol>


<p> blockä½¿ç”¨copyæ˜¯ä»MRCé—ç•™ä¸‹æ¥çš„â€œä¼ ç»Ÿâ€,åœ¨MRCä¸­,æ–¹æ³•å†…éƒ¨çš„blockæ˜¯åœ¨æ ˆåŒºçš„,ä½¿ç”¨copyå¯ä»¥æŠŠå®ƒæ”¾åˆ°å †åŒº.åœ¨ARCä¸­å†™ä¸å†™éƒ½è¡Œï¼šå¯¹äºblockä½¿ç”¨copyè¿˜æ˜¯strongæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†å†™ä¸Šcopyä¹Ÿæ— ä¼¤å¤§é›…ï¼Œè¿˜èƒ½æ—¶åˆ»æé†’æˆ‘ä»¬ï¼šç¼–è¯‘å™¨è‡ªåŠ¨å¯¹blockè¿›è¡Œäº†copyæ“ä½œã€‚</p>

<p> <img src="http://i.imgur.com/VlVKl8L.png" alt="enter image description here" /></p>

<p>ä¸‹é¢åšä¸‹è§£é‡Šï¼š
copyæ­¤ç‰¹è´¨æ‰€è¡¨è¾¾çš„æ‰€å±å…³ç³»ä¸strongç±»ä¼¼ã€‚ç„¶è€Œè®¾ç½®æ–¹æ³•å¹¶ä¸ä¿ç•™æ–°å€¼ï¼Œè€Œæ˜¯å°†å…¶â€œæ‹·è´â€ (copy)ã€‚
å½“å±æ€§ç±»å‹ä¸ºNSStringæ—¶ï¼Œç»å¸¸ç”¨æ­¤ç‰¹è´¨æ¥ä¿æŠ¤å…¶å°è£…æ€§ï¼Œå› ä¸ºä¼ é€’ç»™è®¾ç½®æ–¹æ³•çš„æ–°å€¼æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ªNSMutableStringç±»çš„å®ä¾‹ã€‚è¿™ä¸ªç±»æ˜¯NSStringçš„å­ç±»ï¼Œè¡¨ç¤ºä¸€ç§å¯ä¿®æ”¹å…¶å€¼çš„å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶è‹¥æ˜¯ä¸æ‹·è´å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè®¾ç½®å®Œå±æ€§ä¹‹åï¼Œå­—ç¬¦ä¸²çš„å€¼å°±å¯èƒ½ä¼šåœ¨å¯¹è±¡ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹é­äººæ›´æ”¹ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å°±è¦æ‹·è´ä¸€ä»½â€œä¸å¯å˜â€ (immutable)çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ã€‚åªè¦å®ç°å±æ€§æ‰€ç”¨çš„å¯¹è±¡æ˜¯â€œå¯å˜çš„â€ (mutable)ï¼Œå°±åº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚</p>

<blockquote><p>ç”¨@propertyå£°æ˜ NSStringã€NSArrayã€NSDictionary ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼Œä»–ä»¬ä¹‹é—´å¯èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œä¸ºç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ï¼Œåº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚</p></blockquote>

<p>è¯¥é—®é¢˜åœ¨ä¸‹æ–‡ä¸­ä¹Ÿæœ‰è®ºè¿°ï¼š<strong><em>ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</em></strong></p>

<h3>4. è¿™ä¸ªå†™æ³•ä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼š <code>@property (copy) NSMutableArray *array;</code></h3>

<p>ä¸¤ä¸ªé—®é¢˜ï¼š1ã€æ·»åŠ ,åˆ é™¤,ä¿®æ”¹æ•°ç»„å†…çš„å…ƒç´ çš„æ—¶å€™,ç¨‹åºä¼šå› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•è€Œå´©æºƒ.å› ä¸ºcopyå°±æ˜¯å¤åˆ¶ä¸€ä¸ªä¸å¯å˜NSArrayçš„å¯¹è±¡ï¼›2ã€ä½¿ç”¨äº†atomicå±æ€§ä¼šä¸¥é‡å½±å“æ€§èƒ½ ï¼›</p>

<p>ç¬¬1æ¡çš„ç›¸å…³åŸå› åœ¨ä¸‹æ–‡ä¸­æœ‰è®ºè¿°<strong><em>ã€Šç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿã€‹</em></strong> ä»¥åŠä¸Šæ–‡<strong><em>ã€Šæ€ä¹ˆç”¨ copy å…³é”®å­—ï¼Ÿã€‹</em></strong>ä¹Ÿæœ‰è®ºè¿°ã€‚</p>

<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ</p>

<pre><code class="Objective-C">// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ

@property (nonatomic, copy) NSMutableArray *mutableArray;
</code></pre>

<pre><code class="Objective-C">// .mæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ

NSMutableArray *array = [NSMutableArray arrayWithObjects:@1,@2,nil];
self.mutableArray = array;
[self.mutableArray removeObjectAtIndex:0];
</code></pre>

<p>æ¥ä¸‹æ¥å°±ä¼šå¥”æºƒï¼š</p>

<pre><code class="Objective-C"> -[__NSArrayI removeObjectAtIndex:]: unrecognized selector sent to instance 0x7fcd1bc30460
</code></pre>

<p>ç¬¬2æ¡åŸå› ï¼Œå¦‚ä¸‹ï¼š</p>

<blockquote><p>è¯¥å±æ€§ä½¿ç”¨äº†åŒæ­¥é”ï¼Œä¼šåœ¨åˆ›å»ºæ—¶ç”Ÿæˆä¸€äº›é¢å¤–çš„ä»£ç ç”¨äºå¸®åŠ©ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºï¼Œè¿™ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œé€šè¿‡å£°æ˜nonatomicå¯ä»¥èŠ‚çœè¿™äº›è™½ç„¶å¾ˆå°ä½†æ˜¯ä¸å¿…è¦é¢å¤–å¼€é”€ã€‚</p></blockquote>

<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±ç¼–è¯‘å™¨æ‰€åˆæˆçš„æ–¹æ³•ä¼šé€šè¿‡é”å®šæœºåˆ¶ç¡®ä¿å…¶åŸå­æ€§(atomicity)ã€‚å¦‚æœå±æ€§å…·å¤‡nonatomicç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨åŒæ­¥é”ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ²¡æœ‰åä¸ºâ€œatomicâ€çš„ç‰¹è´¨(å¦‚æœæŸå±æ€§ä¸å…·å¤‡nonatomicç‰¹è´¨ï¼Œé‚£å®ƒå°±æ˜¯â€œåŸå­çš„â€(atomic))ã€‚</p>

<p>åœ¨iOSå¼€å‘ä¸­ï¼Œä½ ä¼šå‘ç°ï¼Œå‡ ä¹æ‰€æœ‰å±æ€§éƒ½å£°æ˜ä¸ºnonatomicã€‚</p>

<p>ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸è¦æ±‚å±æ€§å¿…é¡»æ˜¯â€œåŸå­çš„â€ï¼Œå› ä¸ºè¿™å¹¶ä¸èƒ½ä¿è¯â€œçº¿ç¨‹å®‰å…¨â€ ( thread safety)ï¼Œè‹¥è¦å®ç°â€œçº¿ç¨‹å®‰å…¨â€çš„æ“ä½œï¼Œè¿˜éœ€é‡‡ç”¨æ›´ä¸ºæ·±å±‚çš„é”å®šæœºåˆ¶æ‰è¡Œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨è¿ç»­å¤šæ¬¡è¯»å–æŸå±æ€§å€¼çš„è¿‡ç¨‹ä¸­æœ‰åˆ«çš„çº¿ç¨‹åœ¨åŒæ—¶æ”¹å†™è¯¥å€¼ï¼Œé‚£ä¹ˆå³ä¾¿å°†å±æ€§å£°æ˜ä¸ºatomicï¼Œä¹Ÿè¿˜æ˜¯ä¼šè¯»åˆ°ä¸åŒçš„å±æ€§å€¼ã€‚</p>

<p>å› æ­¤ï¼Œå¼€å‘iOSç¨‹åºæ—¶ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨nonatomicå±æ€§ã€‚ä½†æ˜¯åœ¨å¼€å‘Mac OS Xç¨‹åºæ—¶ï¼Œä½¿ç”¨
atomicå±æ€§é€šå¸¸éƒ½ä¸ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚</p>

<h3>5. å¦‚ä½•è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Ÿå¦‚ä½•é‡å†™å¸¦ copy å…³é”®å­—çš„ setterï¼Ÿ</h3>

<blockquote><p>è‹¥æƒ³ä»¤è‡ªå·±æ‰€å†™çš„å¯¹è±¡å…·æœ‰æ‹·è´åŠŸèƒ½ï¼Œåˆ™éœ€å®ç°NSCopyingåè®®ã€‚å¦‚æœè‡ªå®šä¹‰çš„å¯¹è±¡åˆ†ä¸ºå¯å˜ç‰ˆæœ¬ä¸ä¸å¯å˜ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±è¦åŒæ—¶å®ç°NSCopyiogä¸NSMutableCopyingåè®®ã€‚</p></blockquote>

<p>å…·ä½“æ­¥éª¤ï¼š</p>

<ol>
<li>éœ€å£°æ˜è¯¥ç±»éµä»NSCopyingåè®®</li>
<li>å®ç°NSCopyingåè®®ã€‚è¯¥åè®®åªæœ‰ä¸€ä¸ªæ–¹æ³•:</li>
</ol>


<pre><code class="`Objective-C">- (id)copyWithZone: (NSZone*) zone
</code></pre>

<p>æ³¨æ„ï¼šä¸€æåˆ°è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬æ€»æ˜¯æƒ³è¦†å†™copyæ–¹æ³•ï¼Œå…¶å®çœŸæ­£éœ€è¦å®ç°çš„å´æ˜¯â€œcopyWithZoneâ€æ–¹æ³•ã€‚</p>

<p>ä»¥ç¬¬ä¸€é¢˜çš„ä»£ç ä¸ºä¾‹ï¼š</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä¿®æ”¹å®Œçš„ä»£ç 

typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};

@interface CYLUser : NSObject&lt;NSCopying&gt;

@property (nonatomic, copy, readonly) NSString *name;
@property (nonatomic, assign, readonly) NSUInteger age;
@property (nonatomic, assign, readonly) CYLSex sex;

- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;

@end
</code></pre>

<p>ç„¶åå®ç°åè®®ä¸­è§„å®šçš„æ–¹æ³•ï¼š</p>

<pre><code class="Objective-C">- (id)copyWithZone:(NSZone *)zone {
    CYLUser *copy = [[[self copy] allocWithZone:zone] 
                     initWithName:_name
                                  age:_age
                                  sex:_sex];
    return copy;
}
</code></pre>

<p>ä½†åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¸å¯èƒ½è¿™ä¹ˆç®€å•ï¼Œé‡åˆ°æ›´å¤æ‚ä¸€ç‚¹ï¼Œæ¯”å¦‚ç±»å¯¹è±¡ä¸­çš„æ•°æ®ç»“æ„å¯èƒ½å¹¶æœªåœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è®¾ç½®å¥½ï¼Œéœ€è¦å¦è¡Œè®¾ç½®ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚CYLUserä¸­å«æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œä¸å…¶ä»–CYLUserå¯¹è±¡å»ºç«‹æˆ–è§£é™¤æœ‹å‹å…³ç³»çš„é‚£äº›æ–¹æ³•éƒ½éœ€è¦æ“ä½œè¿™ä¸ªæ•°ç»„ã€‚é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¾—æŠŠè¿™ä¸ªåŒ…å«æœ‹å‹å¯¹è±¡çš„æ•°ç»„ä¹Ÿä¸€å¹¶æ‹·è´è¿‡æ¥ã€‚ä¸‹é¢åˆ—å‡ºäº†å®ç°æ­¤åŠŸèƒ½æ‰€éœ€çš„å…¨éƒ¨ä»£ç :</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä»¥ç¬¬ä¸€é¢˜ã€Šé£æ ¼çº é”™é¢˜ã€‹é‡Œçš„ä»£ç ä¸ºä¾‹

typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};

@interface CYLUser : NSObject&lt;NSCopying&gt;

@property (nonatomic, copy, readonly) NSString *name;
@property (nonatomic, assign, readonly) NSUInteger age;
@property (nonatomic, assign, readonly) CYLSex sex;

- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
- (void)addFriend:(CYLUser *)user;
- (void)removeFriend:(CYLUser *)user;

@end
</code></pre>

<p>// .mæ–‡ä»¶</p>

<pre><code>// .mæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// 

@implementation CYLUser {
    NSMutableSet *_friends;
}

- (void)setName:(NSString *)name {
    _name = [name copy];
}

- (instancetype)initWithName:(NSString *)name 
                             age:(NSUInteger)age 
                             sex:(CYLSex)sex {
     if(self = [super init]) {
        _name = [name copy];
        _age = age;
        _sex = sex;
        _friends = [[NSMutableSet alloc] init];
     }
     return self;
}

- (void)addFriend:(CYLUser *)user {
    [_friends addObject:user];
}

- (void)removeFriend:(CYLUser *)user {
    [_friends removeObject:person];
}

- (id)copyWithZone:(NSZone *)zone {
    CYLUser *copy = [[[self copy] allocWithZone:zone] 
                     initWithName:_name
                                  age:_age
                                  sex:_sex];
    copy-&gt;_friends = [_friends mutableCopy];
    return copy;
}

- (id)deepCopy {
    CYLUser *copy = [[[self copy] allocWithZone:zone] 
                     initWithName:_name
                                  age:_age
                                  sex:_sex];
    copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends 
                                             copyItems:YES];
    return copy;
}

@end
</code></pre>

<p>ä»¥ä¸Šåšæ³•èƒ½æ»¡è¶³åŸºæœ¬çš„éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºé™·ï¼š</p>

<blockquote><p>å¦‚æœä½ æ‰€å†™çš„å¯¹è±¡éœ€è¦æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯è€ƒè™‘æ–°å¢ä¸€ä¸ªä¸“é—¨æ‰§è¡Œæ·±æ‹·è´çš„æ–¹æ³•ã€‚</p></blockquote>

<p>ã€æ³¨ï¼šæ·±æµ…æ‹·è´çš„æ¦‚å¿µï¼Œåœ¨ä¸‹æ–‡ä¸­æœ‰ä»‹ç»ï¼Œè¯¦è§ä¸‹æ–‡çš„ï¼š<strong><em>ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</em></strong>ã€‘</p>

<p>åœ¨ä¾‹å­ä¸­ï¼Œå­˜æ”¾æœ‹å‹å¯¹è±¡çš„setæ˜¯ç”¨â€œcopyWithZooe:â€æ–¹æ³•æ¥æ‹·è´çš„ï¼Œè¿™ç§æµ…æ‹·è´æ–¹å¼ä¸ä¼šé€ä¸ªå¤åˆ¶setä¸­çš„å…ƒç´ ã€‚è‹¥éœ€è¦æ·±æ‹·è´çš„è¯ï¼Œåˆ™å¯åƒä¸‹é¢è¿™æ ·ï¼Œç¼–å†™ä¸€ä¸ªä¸“ä¾›æ·±æ‹·è´æ‰€ç”¨çš„æ–¹æ³•:</p>

<pre><code>- (id)deepCopy {
    CYLUser *copy = [[[self copy] allocWithZone:zone] 
                     initWithName:_name
                                  age:_age
                                  sex:_sex];
    copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends 
                                             copyItems:YES];
    return copy;
}
</code></pre>

<p>è‡³äº<strong><em>å¦‚ä½•é‡å†™å¸¦ copy å…³é”®å­—çš„ setter</em></strong>è¿™ä¸ªé—®é¢˜ï¼Œ</p>

<p>å¦‚æœæŠ›å¼€æœ¬ä¾‹æ¥å›ç­”çš„è¯ï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>- (void)setName:(NSString *)name {
    _name = [name copy];
}
</code></pre>

<p>å¦‚æœå•å•å°±ä¸Šæ–‡çš„ä»£ç è€Œè¨€ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¹Ÿä¸èƒ½é‡å†™nameçš„ setter ï¼šç”±äºæ˜¯nameæ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶åˆ›å»ºå¯¹åº”çš„â€œè®¾ç½®æ–¹æ³•â€ï¼Œç”¨åˆå§‹åŒ–æ–¹æ³•è®¾ç½®å¥½å±æ€§å€¼ä¹‹åï¼Œå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚ï¼ˆ åœ¨æœ¬ä¾‹ä¸­ï¼Œä¹‹æ‰€ä»¥è¿˜è¦å£°æ˜å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€&ndash;copyï¼Œæ˜¯å› ä¸ºï¼šå¦‚æœä¸å†™copyï¼Œè¯¥ç±»çš„è°ƒç”¨è€…å°±ä¸çŸ¥é“åˆå§‹åŒ–æ–¹æ³•é‡Œä¼šæ‹·è´è¿™äº›å±æ€§ï¼Œä»–ä»¬æœ‰å¯èƒ½ä¼šåœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰è‡ªè¡Œæ‹·è´å±æ€§å€¼ã€‚è¿™ç§æ“ä½œå¤šä½™è€Œä½æ•ˆã€‚ï¼‰ã€‚</p>

<p>é‚£å¦‚ä½•ç¡®ä¿nameè¢«copyï¼Ÿåœ¨åˆå§‹åŒ–æ–¹æ³•(initializer)ä¸­åšï¼š</p>

<pre><code>- (instancetype)initWithName:(NSString *)name 
                             age:(NSUInteger)age 
                             sex:(CYLSex)sex {
     if(self = [super init]) {
        _name = [name copy];
        _age = age;
        _sex = sex;
        _friends = [[NSMutableSet alloc] init];
     }
     return self;
}
</code></pre>

<h3>6. @property çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿivarã€getterã€setter æ˜¯å¦‚ä½•ç”Ÿæˆå¹¶æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­çš„</h3>

<p><strong>@property çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>

<blockquote><p>@property = ivar + getter + setter;</p></blockquote>

<p>ä¸‹é¢è§£é‡Šä¸‹ï¼š</p>

<blockquote><p>â€œå±æ€§â€ (property)æœ‰ä¸¤å¤§æ¦‚å¿µï¼šivarï¼ˆå®ä¾‹å˜é‡ï¼‰ã€å­˜å–æ–¹æ³•ï¼ˆaccess method ï¼ getter + setterï¼‰ã€‚</p></blockquote>

<p>â€œå±æ€§â€ (property)ä½œä¸º Objective-C çš„ä¸€é¡¹ç‰¹æ€§ï¼Œä¸»è¦çš„ä½œç”¨å°±åœ¨äºå°è£…å¯¹è±¡ä¸­çš„æ•°æ®ã€‚ Objective-C å¯¹è±¡é€šå¸¸ä¼šæŠŠå…¶æ‰€éœ€è¦çš„æ•°æ®ä¿å­˜ä¸ºå„ç§å®ä¾‹å˜é‡ã€‚å®ä¾‹å˜é‡ä¸€èˆ¬é€šè¿‡â€œå­˜å–æ–¹æ³•â€(access method)æ¥è®¿é—®ã€‚å…¶ä¸­ï¼Œâ€œè·å–æ–¹æ³•â€ (getter)ç”¨äºè¯»å–å˜é‡å€¼ï¼Œè€Œâ€œè®¾ç½®æ–¹æ³•â€ (setter)ç”¨äºå†™å…¥å˜é‡å€¼ã€‚è¿™ä¸ªæ¦‚å¿µå·²ç»å®šå‹ï¼Œå¹¶ä¸”ç»ç”±â€œå±æ€§â€è¿™ä¸€ç‰¹æ€§è€Œæˆä¸º<code>Objective-C 2.0</code>çš„ä¸€éƒ¨åˆ†ã€‚
è€Œåœ¨æ­£è§„çš„ Objective-C ç¼–ç é£æ ¼ä¸­ï¼Œå­˜å–æ–¹æ³•æœ‰ç€ä¸¥æ ¼çš„å‘½åè§„èŒƒã€‚
æ­£å› ä¸ºæœ‰äº†è¿™ç§ä¸¥æ ¼çš„å‘½åè§„èŒƒï¼Œæ‰€ä»¥ Objective-C è¿™é—¨è¯­è¨€æ‰èƒ½æ ¹æ®åç§°è‡ªåŠ¨åˆ›å»ºå‡ºå­˜å–æ–¹æ³•ã€‚å…¶å®ä¹Ÿå¯ä»¥æŠŠå±æ€§å½“åšä¸€ç§å…³é”®å­—ï¼Œå…¶è¡¨ç¤º:</p>

<blockquote><p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å†™å‡ºä¸€å¥—å­˜å–æ–¹æ³•ï¼Œç”¨ä»¥è®¿é—®ç»™å®šç±»å‹ä¸­å…·æœ‰ç»™å®šåç§°çš„å˜é‡ã€‚
æ‰€ä»¥ä½ ä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´ï¼š</p>

<p>@property = getter + setter;</p></blockquote>

<p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç±»ï¼š</p>

<pre><code>@interface Person : NSObject 
@property NSString *firstName; 
@property NSString *lastName; 
@end 
</code></pre>

<p>ä¸Šè¿°ä»£ç å†™å‡ºæ¥çš„ç±»ä¸ä¸‹é¢è¿™ç§å†™æ³•ç­‰æ•ˆï¼š</p>

<pre><code>@interface Person : NSObject 
- (NSString *)firstName; 
- (void)setFirstName:(NSString *)firstName; 
- (NSString *)lastName; 
- (void)setLastName:(NSString *)lastName; 
@end 
</code></pre>

<p><strong>ivarã€getterã€setter æ˜¯å¦‚ä½•ç”Ÿæˆå¹¶æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­çš„?</strong></p>

<blockquote><p>â€œè‡ªåŠ¨åˆæˆâ€( autosynthesis)</p></blockquote>

<p>å®Œæˆå±æ€§å®šä¹‰åï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç¼–å†™è®¿é—®è¿™äº›å±æ€§æ‰€éœ€çš„æ–¹æ³•ï¼Œæ­¤è¿‡ç¨‹å«åšâ€œè‡ªåŠ¨åˆæˆâ€( autosynthesis)ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”±ç¼–è¯‘
å™¨åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œæ‰€ä»¥ç¼–è¾‘å™¨é‡Œçœ‹ä¸åˆ°è¿™äº›â€œåˆæˆæ–¹æ³•â€(synthesized method)çš„æºä»£ç ã€‚é™¤äº†ç”Ÿæˆæ–¹æ³•ä»£ç  getterã€setter ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜è¦è‡ªåŠ¨å‘ç±»ä¸­æ·»åŠ é€‚å½“ç±»å‹çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨å±æ€§åå‰é¢åŠ ä¸‹åˆ’çº¿ï¼Œä»¥æ­¤ä½œä¸ºå®ä¾‹å˜é‡çš„åå­—ã€‚åœ¨å‰ä¾‹ä¸­ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œå…¶åç§°åˆ†åˆ«ä¸º
<code>_firstName</code>ä¸<code>_lastName</code>ã€‚ä¹Ÿå¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡
@synthesizeè¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—.</p>

<pre><code>@implementation Person 
@synthesize firstName = _myFirstName; 
@synthesize lastName = myLastName; 
@end 
</code></pre>

<p>æˆ‘ä¸ºäº†ææ¸…å±æ€§æ˜¯æ€ä¹ˆå®ç°çš„,æ›¾ç»åç¼–è¯‘è¿‡ç›¸å…³çš„ä»£ç ,ä»–å¤§è‡´ç”Ÿæˆäº†äº”ä¸ªä¸œè¥¿</p>

<ol>
<li><code>OBJC_IVAR_$ç±»å$å±æ€§åç§°</code> ï¼šè¯¥å±æ€§çš„â€œåç§»é‡â€ (offset)ï¼Œè¿™ä¸ªåç§»é‡æ˜¯â€œç¡¬ç¼–ç â€ (hardcode)ï¼Œè¡¨ç¤ºè¯¥å˜é‡è·ç¦»å­˜æ”¾å¯¹è±¡çš„å†…å­˜åŒºåŸŸçš„èµ·å§‹åœ°å€æœ‰å¤šè¿œã€‚</li>
<li>setterä¸getteræ–¹æ³•å¯¹åº”çš„å®ç°å‡½æ•°</li>
<li><code>ivar_list</code> ï¼šæˆå‘˜å˜é‡åˆ—è¡¨</li>
<li><code>method_list</code> ï¼šæ–¹æ³•åˆ—è¡¨</li>
<li><code>prop_list</code> ï¼šå±æ€§åˆ—è¡¨</li>
</ol>


<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ¯æ¬¡åœ¨å¢åŠ ä¸€ä¸ªå±æ€§,ç³»ç»Ÿéƒ½ä¼šåœ¨<code>ivar_list</code>ä¸­æ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡çš„æè¿°,åœ¨<code>method_list</code>ä¸­å¢åŠ setterä¸getteræ–¹æ³•çš„æè¿°,åœ¨å±æ€§åˆ—è¡¨ä¸­å¢åŠ ä¸€ä¸ªå±æ€§çš„æè¿°,ç„¶åè®¡ç®—è¯¥å±æ€§åœ¨å¯¹è±¡ä¸­çš„åç§»é‡,ç„¶åç»™å‡ºsetterä¸getteræ–¹æ³•å¯¹åº”çš„å®ç°,åœ¨setteræ–¹æ³•ä¸­ä»åç§»é‡çš„ä½ç½®å¼€å§‹èµ‹å€¼,åœ¨getteræ–¹æ³•ä¸­ä»åç§»é‡å¼€å§‹å–å€¼,ä¸ºäº†èƒ½å¤Ÿè¯»å–æ­£ç¡®å­—èŠ‚æ•°,ç³»ç»Ÿå¯¹è±¡åç§»é‡çš„æŒ‡é’ˆç±»å‹è¿›è¡Œäº†ç±»å‹å¼ºè½¬.</p>

<h3>7. @protocol å’Œ category ä¸­å¦‚ä½•ä½¿ç”¨ @property</h3>

<ol>
<li>åœ¨protocolä¸­ä½¿ç”¨propertyåªä¼šç”Ÿæˆsetterå’Œgetteræ–¹æ³•å£°æ˜,æˆ‘ä»¬ä½¿ç”¨å±æ€§çš„ç›®çš„,æ˜¯å¸Œæœ›éµå®ˆæˆ‘åè®®çš„å¯¹è±¡èƒ½å®ç°è¯¥å±æ€§</li>
<li><p>category ä½¿ç”¨ @property ä¹Ÿæ˜¯åªä¼šç”Ÿæˆsetterå’Œgetteræ–¹æ³•çš„å£°æ˜,å¦‚æœæˆ‘ä»¬çœŸçš„éœ€è¦ç»™categoryå¢åŠ å±æ€§çš„å®ç°,éœ€è¦å€ŸåŠ©äºè¿è¡Œæ—¶çš„ä¸¤ä¸ªå‡½æ•°ï¼š</p></li>
<li><p><code>objc_setAssociatedObject</code></p></li>
<li><code>objc_getAssociatedObject</code></li>
</ol>


<h3>8. runtime å¦‚ä½•å®ç° weak å±æ€§</h3>

<p>è¦å®ç°weakå±æ€§ï¼Œé¦–å…ˆè¦ææ¸…æ¥šweakå±æ€§çš„ç‰¹ç‚¹ï¼š</p>

<blockquote><p>weak æ­¤ç‰¹è´¨è¡¨æ˜è¯¥å±æ€§å®šä¹‰äº†ä¸€ç§â€œéæ‹¥æœ‰å…³ç³»â€ (nonowning relationship)ã€‚ä¸ºè¿™ç§å±æ€§è®¾ç½®æ–°å€¼æ—¶ï¼Œè®¾ç½®æ–¹æ³•æ—¢ä¸ä¿ç•™æ–°å€¼ï¼Œä¹Ÿä¸é‡Šæ”¾æ—§å€¼ã€‚æ­¤ç‰¹è´¨åŒassignç±»ä¼¼ï¼Œ ç„¶è€Œåœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚</p></blockquote>

<p>é‚£ä¹ˆruntimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ</p>

<blockquote><p>runtime å¯¹æ³¨å†Œçš„ç±»ï¼Œ ä¼šè¿›è¡Œå¸ƒå±€ï¼Œå¯¹äº weak å¯¹è±¡ä¼šæ”¾å…¥ä¸€ä¸ª hash è¡¨ä¸­ã€‚ ç”¨ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€ä½œä¸º keyï¼Œå½“æ­¤å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ä¼š deallocï¼Œå‡å¦‚ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€æ˜¯aï¼Œé‚£ä¹ˆå°±ä¼šä»¥aä¸ºé”®ï¼Œ åœ¨è¿™ä¸ª weak è¡¨ä¸­æœç´¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥aä¸ºé”®çš„ weak å¯¹è±¡ï¼Œä»è€Œè®¾ç½®ä¸º nilã€‚</p></blockquote>

<p>æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼ˆä¼ªä»£ç ï¼‰æ¥è¡¨ç¤ºä¸Šè¿°æœºåˆ¶ï¼š</p>

<p><code>objc_storeWeak(&amp;a, b)</code>å‡½æ•°ï¼š</p>

<p><code>objc_storeWeak</code>å‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°&ndash;èµ‹å€¼å¯¹è±¡ï¼ˆbï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼keyï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°&ndash;weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä½œä¸ºvalueï¼Œæ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆbï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä»weakè¡¨ä¸­åˆ é™¤ï¼Œ</p>

<p>ä½ å¯ä»¥æŠŠ<code>objc_storeWeak(&amp;a, b)</code>ç†è§£ä¸ºï¼š<code>objc_storeWeak(value, key)</code>ï¼Œå¹¶ä¸”å½“keyå˜nilï¼Œå°†valueç½®nilã€‚</p>

<p>åœ¨bénilæ—¶ï¼Œaå’ŒbæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨bå˜nilæ—¶ï¼Œaå˜nilã€‚æ­¤æ—¶å‘aå‘é€æ¶ˆæ¯ä¸ä¼šå´©æºƒï¼šåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ã€‚</p>

<p>è€Œå¦‚æœaæ˜¯ç”±assignä¿®é¥°çš„ï¼Œåˆ™ï¼š
åœ¨bénilæ—¶ï¼Œaå’ŒbæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨bå˜nilæ—¶ï¼Œaè¿˜æ˜¯æŒ‡å‘è¯¥å†…å­˜åœ°å€ï¼Œå˜é‡æŒ‡é’ˆã€‚æ­¤æ—¶å‘aå‘é€æ¶ˆæ¯ææ˜“å´©æºƒã€‚</p>

<p>ä¸‹é¢æˆ‘ä»¬å°†åŸºäº<code>objc_storeWeak(&amp;a, b)</code>å‡½æ•°ï¼Œä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿâ€œruntimeå¦‚ä½•å®ç°weakå±æ€§â€ï¼š</p>

<pre><code class="Objective-C">// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong

 id obj1;
 objc_initWeak(&amp;obj1, obj);
/*objå¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œå˜é‡ä½œç”¨åŸŸç»“æŸ*/
 objc_destroyWeak(&amp;obj1);
</code></pre>

<p>ä¸‹é¢å¯¹ç”¨åˆ°çš„ä¸¤ä¸ªæ–¹æ³•<code>objc_initWeak</code>å’Œ<code>objc_destroyWeak</code>åšä¸‹è§£é‡Šï¼š</p>

<p>æ€»ä½“è¯´æ¥ï¼Œä½œç”¨æ˜¯ï¼š
é€šè¿‡<code>objc_initWeak</code>å‡½æ•°åˆå§‹åŒ–â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€ï¼Œåœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶é€šè¿‡<code>objc_destoryWeak</code>å‡½æ•°é‡Šæ”¾è¯¥å˜é‡ï¼ˆobj1ï¼‰ã€‚</p>

<p>ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸‹æ–¹æ³•çš„å†…éƒ¨å®ç°ï¼š</p>

<p><code>objc_initWeak</code>å‡½æ•°çš„å®ç°æ˜¯è¿™æ ·çš„ï¼šåœ¨å°†â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€åˆå§‹åŒ–ä¸º0ï¼ˆnilï¼‰åï¼Œä¼šå°†â€œèµ‹å€¼å¯¹è±¡â€ï¼ˆobjï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨<code>objc_storeWeak</code>å‡½æ•°ã€‚</p>

<pre><code class="Objective-C">obj1 = 0ï¼›
obj_storeWeak(&amp;obj1, obj);
</code></pre>

<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>

<blockquote><p> weak ä¿®é¥°çš„æŒ‡é’ˆé»˜è®¤å€¼æ˜¯ nil ï¼ˆåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ï¼‰</p></blockquote>

<p>ç„¶å<code>obj_destroyWeak</code>å‡½æ•°å°†0ï¼ˆnilï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨<code>objc_storeWeak</code>å‡½æ•°ã€‚</p>

<p><code>objc_storeWeak(&amp;obj1, 0);</code></p>

<p>å‰é¢çš„æºä»£ç ä¸ä¸‹åˆ—æºä»£ç ç›¸åŒã€‚</p>

<pre><code class="Objective-C">// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong

id obj1;
obj1 = 0;
objc_storeWeak(&amp;obj1, obj);
/* ... objçš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œè¢«ç½®nil ... */
objc_storeWeak(&amp;obj1, 0);
</code></pre>

<p><code>objc_storeWeak</code>å‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°&ndash;èµ‹å€¼å¯¹è±¡ï¼ˆobjï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼ï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°&ndash;weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆobj1ï¼‰çš„å†…å­˜åœ°å€æ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆobjï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆobj1ï¼‰çš„åœ°å€ä»weakè¡¨ä¸­åˆ é™¤ï¼Œåœ¨åé¢çš„ç›¸å…³ä¸€é¢˜ä¼šè¯¦è§£ã€‚</p>

<p>ä½¿ç”¨ä¼ªä»£ç æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä¸‹é¢æˆ‘ä»¬â€œçœŸæªå®å¼¹â€åœ°å®ç°ä¸‹ï¼š</p>

<blockquote><p>å¦‚ä½•è®©ä¸ä½¿ç”¨weakä¿®é¥°çš„@propertyï¼Œæ‹¥æœ‰weakçš„æ•ˆæœã€‚</p></blockquote>

<p>æˆ‘ä»¬ä»setteræ–¹æ³•å…¥æ‰‹ï¼š</p>

<pre><code>- (void)setObject:(NSObject *)object
{
    objc_setAssociatedObject(self, "object", object, OBJC_ASSOCIATION_ASSIGN);
    [object cyl_runAtDealloc:^{
        _object = nil;
    }];
}
</code></pre>

<p>ä¹Ÿå°±æ˜¯æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š</p>

<ol>
<li><p>åœ¨setteræ–¹æ³•ä¸­åšå¦‚ä¸‹è®¾ç½®ï¼š</p>

<pre><code>objc_setAssociatedObject(self, "object", object, OBJC_ASSOCIATION_ASSIGN);
</code></pre></li>
<li><p>åœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚åšåˆ°è¿™ç‚¹ï¼ŒåŒæ ·è¦å€ŸåŠ©runtimeï¼š</p></li>
</ol>


<pre><code class="`Objective-C">//è¦é”€æ¯çš„ç›®æ ‡å¯¹è±¡
id objectToBeDeallocated;
//å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ä¸Šé¢çš„ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚
id objectWeWantToBeReleasedWhenThatHappens;
objc_setAssociatedObject(objectToBeDeallocted,
                         someUniqueKey,
                         objectWeWantToBeReleasedWhenThatHappens,
                         OBJC_ASSOCIATION_RETAIN);
</code></pre>

<p>çŸ¥é“äº†æ€è·¯ï¼Œæˆ‘ä»¬å°±å¼€å§‹å®ç°<code>cyl_runAtDealloc</code>æ–¹æ³•ï¼Œå®ç°è¿‡ç¨‹åˆ†ä¸¤éƒ¨åˆ†ï¼š</p>

<p>ç¬¬ä¸€éƒ¨åˆ†ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©blockæ‰§è¡Œâ€œäº‹ä»¶â€ã€‚</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// è¿™ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©blockæ‰§è¡Œâ€œäº‹ä»¶â€ã€‚

typedef void (^voidBlock)(void);

@interface CYLBlockExecutor : NSObject 

- (id)initWithBlock:(voidBlock)block;

@end


// .mæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// è¿™ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©blockæ‰§è¡Œâ€œäº‹ä»¶â€ã€‚

#import "CYLBlockExecutor.h"

@interface CYLBlockExecutor() {
    voidBlock _block;
}
@implementation CYLBlockExecutor

- (id)initWithBlock:(voidBlock)aBlock
{
    self = [super init];

    if (self) {
        _block = [aBlock copy];
    }

    return self;
}

- (void)dealloc
{
    _block ? _block() : nil;
}

@end
</code></pre>

<p>ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒä»£ç ï¼šåˆ©ç”¨runtimeå®ç°<code>cyl_runAtDealloc</code>æ–¹æ³•</p>

<pre><code>// CYLNSObject+RunAtDealloc.hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// åˆ©ç”¨runtimeå®ç°cyl_runAtDeallocæ–¹æ³•

#import "CYLBlockExecutor.h"

const void *runAtDeallocBlockKey = &amp;runAtDeallocBlockKey;

@interface NSObject (CYLRunAtDealloc)

- (void)cyl_runAtDealloc:(voidBlock)block;

@end


// CYLNSObject+RunAtDealloc.mæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// åˆ©ç”¨runtimeå®ç°cyl_runAtDeallocæ–¹æ³•

#import "CYLNSObject+RunAtDealloc.h"
#import "CYLBlockExecutor.h"

@implementation NSObject (CYLRunAtDealloc)

- (void)cyl_runAtDealloc:(voidBlock)block
{
    if (block) {
        CYLBlockExecutor *executor = [[CYLBlockExecutor alloc] initWithBlock:block];

        objc_setAssociatedObject(self,
                                 runAtDeallocBlockKey,
                                 executor,
                                 OBJC_ASSOCIATION_RETAIN);
    }
}

@end
</code></pre>

<p>ä½¿ç”¨æ–¹æ³•ï¼š
å¯¼å…¥</p>

<pre><code>#import "CYLNSObject+RunAtDealloc.h"
</code></pre>

<p>ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ï¼š</p>

<pre><code>    NSObject *foo = [[NSObject alloc] init];

    [foo cyl_runAtDealloc:^{
        NSLog(@"æ­£åœ¨é‡Šæ”¾foo!");
    }];
</code></pre>

<p>å¦‚æœå¯¹<code>cyl_runAtDealloc</code>çš„å®ç°åŸç†æœ‰å…´è¶£ï¼Œå¯ä»¥çœ‹ä¸‹è¿™ç¯‡åšæ–‡ <a href="http://stackoverflow.com/a/31560217/3395008"><strong><em>Fun With the Objective-C Runtime: Run Code at Deallocation of Any Object</em></strong></a></p>

<h3>9. @propertyä¸­æœ‰å“ªäº›å±æ€§å…³é”®å­—ï¼Ÿ/ @property åé¢å¯ä»¥æœ‰å“ªäº›ä¿®é¥°ç¬¦ï¼Ÿ</h3>

<p>å±æ€§å¯ä»¥æ‹¥æœ‰çš„ç‰¹è´¨åˆ†ä¸ºå››ç±»:</p>

<ol>
<li><p>åŸå­æ€§&mdash;<code>nonatomic</code>ç‰¹è´¨</p>

<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±ç¼–è¯‘å™¨åˆæˆçš„æ–¹æ³•ä¼šé€šè¿‡é”å®šæœºåˆ¶ç¡®ä¿å…¶åŸå­æ€§(atomicity)ã€‚å¦‚æœå±æ€§å…·å¤‡nonatomicç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨åŒæ­¥é”ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ²¡æœ‰åä¸ºâ€œatomicâ€çš„ç‰¹è´¨(å¦‚æœæŸå±æ€§ä¸å…·å¤‡nonatomicç‰¹è´¨ï¼Œé‚£å®ƒå°±æ˜¯â€œåŸå­çš„â€ ( atomic) )ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥åœ¨å±æ€§ç‰¹è´¨ä¸­å†™æ˜è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ã€‚è‹¥æ˜¯è‡ªå·±å®šä¹‰å­˜å–æ–¹æ³•ï¼Œé‚£ä¹ˆå°±åº”è¯¥éµä»ä¸å±æ€§ç‰¹è´¨ç›¸ç¬¦çš„åŸå­æ€§ã€‚</p></li>
<li><p>è¯»/å†™æƒé™&mdash;<code>readwrite(è¯»å†™)</code>ã€<code>readooly (åªè¯»)</code></p></li>
<li>å†…å­˜ç®¡ç†è¯­ä¹‰&mdash;<code>assign</code>ã€<code>strong</code>ã€ <code>weak</code>ã€<code>unsafe_unretained</code>ã€<code>copy</code></li>
<li>æ–¹æ³•å&mdash;<code>getter=&lt;name&gt;</code> ã€<code>setter=&lt;name&gt;</code></li>
</ol>


<p>  <code>getter=&lt;name&gt;</code>çš„æ ·å¼ï¼š</p>

<pre><code>    @property (nonatomic, getter=isOn) BOOL on;
</code></pre>

<p>ï¼ˆ <code>setter=&lt;name&gt;</code>è¿™ç§ä¸å¸¸ç”¨ï¼Œä¹Ÿä¸æ¨èä½¿ç”¨ã€‚æ•…ä¸åœ¨è¿™é‡Œç»™å‡ºå†™æ³•ã€‚ï¼‰
 3. ä¸å¸¸ç”¨çš„ï¼š<code>nonnull</code>,<code>null_resettable</code>,<code>nullable</code></p>

<h3>10. weakå±æ€§éœ€è¦åœ¨deallocä¸­ç½®nilä¹ˆï¼Ÿ</h3>

<p>ä¸éœ€è¦ã€‚</p>

<blockquote><p>åœ¨ARCç¯å¢ƒæ— è®ºæ˜¯å¼ºæŒ‡é’ˆè¿˜æ˜¯å¼±æŒ‡é’ˆéƒ½æ— éœ€åœ¨ dealloc è®¾ç½®ä¸º nil ï¼Œ ARC ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†</p></blockquote>

<p>å³ä¾¿æ˜¯ç¼–è¯‘å™¨ä¸å¸®æˆ‘ä»¬åšè¿™äº›ï¼Œweakä¹Ÿä¸éœ€è¦åœ¨deallocä¸­ç½®nilï¼š</p>

<p>æ­£å¦‚ä¸Šæ–‡çš„ï¼š<strong><em>runtime å¦‚ä½•å®ç° weak å±æ€§</em></strong> ä¸­æåˆ°çš„ï¼š</p>

<p>æˆ‘ä»¬æ¨¡æ‹Ÿä¸‹weakçš„setteræ–¹æ³•ï¼Œåº”è¯¥å¦‚ä¸‹ï¼š</p>

<pre><code>- (void)setObject:(NSObject *)object
{
    objc_setAssociatedObject(self, "object", object, OBJC_ASSOCIATION_ASSIGN);
    [object cyl_runAtDealloc:^{
        _object = nil;
    }];
}
</code></pre>

<p>ä¹Ÿå³:</p>

<blockquote><p>åœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚</p></blockquote>

<h3>11. @synthesizeå’Œ@dynamicåˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3>

<ol>
<li>@propertyæœ‰ä¸¤ä¸ªå¯¹åº”çš„è¯ï¼Œä¸€ä¸ªæ˜¯@synthesizeï¼Œä¸€ä¸ªæ˜¯@dynamicã€‚å¦‚æœ@synthesizeå’Œ@dynamicéƒ½æ²¡å†™ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯<code>@syntheszie var = _var;</code></li>
<li>@synthesizeçš„è¯­ä¹‰æ˜¯å¦‚æœä½ æ²¡æœ‰æ‰‹åŠ¨å®ç°setteræ–¹æ³•å’Œgetteræ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºä½ åŠ ä¸Šè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</li>
<li>@dynamicå‘Šè¯‰ç¼–è¯‘å™¨ï¼šå±æ€§çš„setterä¸getteræ–¹æ³•ç”±ç”¨æˆ·è‡ªå·±å®ç°ï¼Œä¸è‡ªåŠ¨ç”Ÿæˆã€‚ï¼ˆå½“ç„¶å¯¹äºreadonlyçš„å±æ€§åªéœ€æä¾›getterå³å¯ï¼‰ã€‚å‡å¦‚ä¸€ä¸ªå±æ€§è¢«å£°æ˜ä¸º@dynamic varï¼Œç„¶åä½ æ²¡æœ‰æä¾›@setteræ–¹æ³•å’Œ@getteræ–¹æ³•ï¼Œç¼–è¯‘çš„æ—¶å€™æ²¡é—®é¢˜ï¼Œä½†æ˜¯å½“ç¨‹åºè¿è¡Œåˆ°<code>instance.var = someVar</code>ï¼Œç”±äºç¼ºsetteræ–¹æ³•ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼›æˆ–è€…å½“è¿è¡Œåˆ° <code>someVar = var</code>æ—¶ï¼Œç”±äºç¼ºgetteræ–¹æ³•åŒæ ·ä¼šå¯¼è‡´å´©æºƒã€‚ç¼–è¯‘æ—¶æ²¡é—®é¢˜ï¼Œè¿è¡Œæ—¶æ‰æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŠ¨æ€ç»‘å®šã€‚</li>
</ol>


<h3>12. ARCä¸‹ï¼Œä¸æ˜¾å¼æŒ‡å®šä»»ä½•å±æ€§å…³é”®å­—æ—¶ï¼Œé»˜è®¤çš„å…³é”®å­—éƒ½æœ‰å“ªäº›ï¼Ÿ</h3>

<ol>
<li>å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤å…³é”®å­—æ˜¯</li>
</ol>


<p> atomic,readwrite,assign
 2. å¯¹äºæ™®é€šçš„OCå¯¹è±¡</p>

<p> atomic,readwrite,strong</p>

<p>å‚è€ƒé“¾æ¥ï¼š</p>

<ol>
<li><p><a href="http://stackoverflow.com/a/15541801/3395008"> <strong><em>Objective-C ARC: strong vs retain and weak vs assign</em></strong> </a></p></li>
<li><p><a href="http://rdcworld-iphone.blogspot.in/2012/12/variable-property-attributes-or.html"> <strong><em>Variable property attributes or Modifiers in iOS</em></strong> </a></p></li>
</ol>


<h3>13. ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>

<ol>
<li>å› ä¸ºçˆ¶ç±»æŒ‡é’ˆå¯ä»¥æŒ‡å‘å­ç±»å¯¹è±¡,ä½¿ç”¨copyçš„ç›®çš„æ˜¯ä¸ºäº†è®©æœ¬å¯¹è±¡çš„å±æ€§ä¸å—å¤–ç•Œå½±å“,ä½¿ç”¨copyæ— è®ºç»™æˆ‘ä¼ å…¥æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡è¿˜æ˜¯ä¸å¯å¯¹è±¡,æˆ‘æœ¬èº«æŒæœ‰çš„å°±æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å‰¯æœ¬.</li>
<li>å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ˜¯strong,é‚£ä¹ˆè¿™ä¸ªå±æ€§å°±æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ªå¯å˜å¯¹è±¡,å¦‚æœè¿™ä¸ªå¯å˜å¯¹è±¡åœ¨å¤–éƒ¨è¢«ä¿®æ”¹äº†,é‚£ä¹ˆä¼šå½±å“è¯¥å±æ€§.</li>
</ol>


<p>copyæ­¤ç‰¹è´¨æ‰€è¡¨è¾¾çš„æ‰€å±å…³ç³»ä¸strongç±»ä¼¼ã€‚ç„¶è€Œè®¾ç½®æ–¹æ³•å¹¶ä¸ä¿ç•™æ–°å€¼ï¼Œè€Œæ˜¯å°†å…¶â€œæ‹·è´â€ (copy)ã€‚
å½“å±æ€§ç±»å‹ä¸ºNSStringæ—¶ï¼Œç»å¸¸ç”¨æ­¤ç‰¹è´¨æ¥ä¿æŠ¤å…¶å°è£…æ€§ï¼Œå› ä¸ºä¼ é€’ç»™è®¾ç½®æ–¹æ³•çš„æ–°å€¼æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ªNSMutableStringç±»çš„å®ä¾‹ã€‚è¿™ä¸ªç±»æ˜¯NSStringçš„å­ç±»ï¼Œè¡¨ç¤ºä¸€ç§å¯ä¿®æ”¹å…¶å€¼çš„å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶è‹¥æ˜¯ä¸æ‹·è´å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè®¾ç½®å®Œå±æ€§ä¹‹åï¼Œå­—ç¬¦ä¸²çš„å€¼å°±å¯èƒ½ä¼šåœ¨å¯¹è±¡ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹é­äººæ›´æ”¹ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å°±è¦æ‹·è´ä¸€ä»½â€œä¸å¯å˜â€ (immutable)çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ã€‚åªè¦å®ç°å±æ€§æ‰€ç”¨çš„å¯¹è±¡æ˜¯â€œå¯å˜çš„â€ (mutable)ï¼Œå°±åº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚</p>

<p>ä¸ºäº†ç†è§£è¿™ç§åšæ³•ï¼Œé¦–å…ˆè¦çŸ¥é“ï¼Œå¯¹éé›†åˆç±»å¯¹è±¡çš„copyæ“ä½œï¼š</p>

<p>åœ¨éé›†åˆç±»å¯¹è±¡ä¸­ï¼šå¯¹immutableå¯¹è±¡è¿›è¡Œcopyæ“ä½œï¼Œæ˜¯æŒ‡é’ˆå¤åˆ¶ï¼ŒmutableCopyæ“ä½œæ—¶å†…å®¹å¤åˆ¶ï¼›å¯¹mutableå¯¹è±¡è¿›è¡Œcopyå’ŒmutableCopyéƒ½æ˜¯å†…å®¹å¤åˆ¶ã€‚ç”¨ä»£ç ç®€å•è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>

<ul>
<li>[immutableObject copy] // æµ…å¤åˆ¶</li>
<li>[immutableObject mutableCopy] //æ·±å¤åˆ¶</li>
<li>[mutableObject copy] //æ·±å¤åˆ¶</li>
<li>[mutableObject mutableCopy] //æ·±å¤åˆ¶</li>
</ul>


<p>æ¯”å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>

<pre><code>NSMutableString *string = [NSMutableString stringWithString:@"origin"];//copy
NSString *stringCopy = [string copy]; 
</code></pre>

<p>æŸ¥çœ‹å†…å­˜ï¼Œä¼šå‘ç° stringã€stringCopy å†…å­˜åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œè¯´æ˜æ­¤æ—¶éƒ½æ˜¯åšå†…å®¹æ‹·è´ã€æ·±æ‹·è´ã€‚å³ä½¿ä½ è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>

<pre><code>[string appendString:@"origion!"]
</code></pre>

<p>stringCopyçš„å€¼ä¹Ÿä¸ä¼šå› æ­¤æ”¹å˜ï¼Œä½†æ˜¯å¦‚æœä¸ä½¿ç”¨copyï¼ŒstringCopyçš„å€¼å°±ä¼šè¢«æ”¹å˜ã€‚
  é›†åˆç±»å¯¹è±¡ä»¥æ­¤ç±»æ¨ã€‚
æ‰€ä»¥ï¼Œ</p>

<blockquote><p>ç”¨@propertyå£°æ˜ NSStringã€NSArrayã€NSDictionary ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼Œä»–ä»¬ä¹‹é—´å¯èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œä¸ºç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ï¼Œåº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚</p></blockquote>

<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://www.zybuluo.com/MicroCai/note/50592">iOS é›†åˆçš„æ·±å¤åˆ¶ä¸æµ…å¤åˆ¶</a></p>

<h3>14. @synthesizeåˆæˆå®ä¾‹å˜é‡çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå‡å¦‚propertyåä¸ºfooï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º<code>_foo</code>çš„å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿˜ä¼šè‡ªåŠ¨åˆæˆæ–°å˜é‡ä¹ˆï¼Ÿ</h3>

<p>åœ¨å›ç­”ä¹‹å‰å…ˆè¯´æ˜ä¸‹ä¸€ä¸ªæ¦‚å¿µï¼š</p>

<blockquote><p>å®ä¾‹å˜é‡ = æˆå‘˜å˜é‡ ï¼ ivar</p></blockquote>

<p>è¿™äº›è¯´æ³•ï¼Œç¬”è€…ä¸‹æ–‡ä¸­ï¼Œå¯èƒ½éƒ½ä¼šç”¨åˆ°ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚</p>

<p>æ­£å¦‚
<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW6">Appleå®˜æ–¹æ–‡æ¡£ <strong><em>You Can Customize Synthesized Instance Variable Names</em></strong></a> æ‰€è¯´ï¼š
<img src="http://i.imgur.com/D6d0zGJ.png" alt="enter image description here" /></p>

<p>å¦‚æœä½¿ç”¨äº†å±æ€§çš„è¯ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨ç¼–å†™è®¿é—®å±æ€§æ‰€éœ€çš„æ–¹æ³•ï¼Œæ­¤è¿‡ç¨‹å«åšâ€œè‡ªåŠ¨åˆæˆâ€( auto synthesis)ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œæ‰€ä»¥ç¼–è¾‘å™¨é‡Œçœ‹ä¸åˆ°è¿™äº›â€œåˆæˆæ–¹æ³•â€ (synthesized method)çš„æºä»£ç ã€‚é™¤äº†ç”Ÿæˆæ–¹æ³•ä»£ç ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜è¦è‡ªåŠ¨å‘ç±»ä¸­æ·»åŠ é€‚å½“ç±»å‹çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨å±æ€§åå‰é¢åŠ ä¸‹åˆ’çº¿ï¼Œä»¥æ­¤ä½œä¸ºå®ä¾‹å˜é‡çš„åå­—ã€‚</p>

<pre><code class="Objective-C">@interface CYLPerson : NSObject 
@property NSString *firstName; 
@property NSString *lastName; 
@end
</code></pre>

<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œå…¶åç§°åˆ†åˆ«ä¸º
<code>_firstName</code>ä¸<code>_lastName</code>ã€‚ä¹Ÿå¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡<code>@synthesize</code>è¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—:</p>

<pre><code class="Objective-C">@implementation CYLPerson 
@synthesize firstName = _myFirstName; 
@synthesize lastName = _myLastName; 
@end 
</code></pre>

<p>ä¸Šè¿°è¯­æ³•ä¼šå°†ç”Ÿæˆçš„å®ä¾‹å˜é‡å‘½åä¸º<code>_myFirstName</code>ä¸<code>_myLastName</code>ï¼Œè€Œä¸å†ä½¿ç”¨é»˜è®¤çš„åå­—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ— é¡»ä¿®æ”¹é»˜è®¤çš„å®ä¾‹å˜é‡åï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ä»¥ä¸‹åˆ’çº¿æ¥å‘½åå®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¿™ä¸ªåŠæ³•å°†å…¶æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„åå­—ã€‚ç¬”è€…è¿˜æ˜¯æ¨èä½¿ç”¨é»˜è®¤çš„å‘½åæ–¹æ¡ˆï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰äººéƒ½åšæŒè¿™å¥—æ–¹æ¡ˆï¼Œé‚£ä¹ˆå†™å‡ºæ¥çš„ä»£ç å¤§å®¶éƒ½èƒ½çœ‹å¾—æ‡‚ã€‚</p>

<p>æ€»ç»“ä¸‹@synthesizeåˆæˆå®ä¾‹å˜é‡çš„è§„åˆ™ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>

<ol>
<li><p>å¦‚æœæŒ‡å®šäº†æˆå‘˜å˜é‡çš„åç§°,ä¼šç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„åç§°çš„æˆå‘˜å˜é‡,</p></li>
<li><p>å¦‚æœè¿™ä¸ªæˆå‘˜å·²ç»å­˜åœ¨äº†å°±ä¸å†ç”Ÿæˆäº†.</p></li>
<li>å¦‚æœæ˜¯ <code>@synthesize foo;</code> è¿˜ä¼šç”Ÿæˆä¸€ä¸ªåç§°ä¸ºfooçš„æˆå‘˜å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š</li>
</ol>


<blockquote><p>å¦‚æœæ²¡æœ‰æŒ‡å®šæˆå‘˜å˜é‡çš„åç§°ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå±æ€§åŒåçš„æˆå‘˜å˜é‡,</p></blockquote>

<ol>
<li>å¦‚æœæ˜¯ <code>@synthesize foo = _foo;</code> å°±ä¸ä¼šç”Ÿæˆæˆå‘˜å˜é‡äº†.</li>
</ol>


<p>å‡å¦‚propertyåä¸ºfooï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º_fooçš„å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿˜ä¼šè‡ªåŠ¨åˆæˆæ–°å˜é‡ä¹ˆï¼Ÿ
ä¸ä¼šã€‚å¦‚ä¸‹å›¾ï¼š</p>

<p><img src="http://i.imgur.com/t28ge4W.png" alt="enter image description here" /></p>

<h3>15. åœ¨æœ‰äº†è‡ªåŠ¨åˆæˆå±æ€§å®ä¾‹å˜é‡ä¹‹åï¼Œ@synthesizeè¿˜æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</h3>

<p>å›ç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œæˆ‘ä»¬è¦ææ¸…æ¥šä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¸ä¼šautosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Ÿ</p>

<ol>
<li>åŒæ—¶é‡å†™äº†setterå’Œgetteræ—¶</li>
<li>é‡å†™äº†åªè¯»å±æ€§çš„getteræ—¶</li>
<li>ä½¿ç”¨äº†@dynamicæ—¶</li>
<li>åœ¨ @protocol ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§</li>
<li>åœ¨ category ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§</li>
<li>é‡è½½çš„å±æ€§</li>
</ol>


<p> å½“ä½ åœ¨å­ç±»ä¸­é‡è½½äº†çˆ¶ç±»ä¸­çš„å±æ€§ï¼Œä½ å¿…é¡» ä½¿ç”¨<code>@synthesize</code>æ¥æ‰‹åŠ¨åˆæˆivarã€‚</p>

<p>é™¤äº†åä¸‰æ¡ï¼Œå¯¹å…¶ä»–å‡ ä¸ªæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸€ä¸ªè§„å¾‹ï¼šå½“ä½ æƒ³æ‰‹åŠ¨ç®¡ç†@propertyçš„æ‰€æœ‰å†…å®¹æ—¶ï¼Œä½ å°±ä¼šå°è¯•é€šè¿‡å®ç°@propertyçš„æ‰€æœ‰â€œå­˜å–æ–¹æ³•â€ï¼ˆthe accessor methodsï¼‰æˆ–è€…ä½¿ç”¨<code>@dynamic</code>æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œè¿™æ—¶ç¼–è¯‘å™¨å°±ä¼šè®¤ä¸ºä½ æ‰“ç®—æ‰‹åŠ¨ç®¡ç†@propertyï¼Œäºæ˜¯ç¼–è¯‘å™¨å°±ç¦ç”¨äº†autosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ã€‚</p>

<p>å› ä¸ºæœ‰äº†autosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Œå¤§éƒ¨åˆ†å¼€å‘è€…å·²ç»ä¹ æƒ¯ä¸å»æ‰‹åŠ¨å®šä¹‰ivarï¼Œè€Œæ˜¯ä¾èµ–äºautosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Œä½†æ˜¯ä¸€æ—¦ä½ éœ€è¦ä½¿ç”¨ivarï¼Œè€Œautosynthesisï¼ˆè‡ªåŠ¨åˆæˆï¼‰åˆå¤±æ•ˆäº†ï¼Œå¦‚æœä¸å»æ‰‹åŠ¨å®šä¹‰ivarï¼Œé‚£ä¹ˆä½ å°±å¾—å€ŸåŠ©<code>@synthesize</code>æ¥æ‰‹åŠ¨åˆæˆivarã€‚</p>

<p>å…¶å®ï¼Œ<code>@synthesize</code>è¯­æ³•è¿˜æœ‰ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œä½†æ˜¯ä¸å¤ªå»ºè®®å¤§å®¶ä½¿ç”¨ï¼š</p>

<p>å¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡<code>@synthesize</code>è¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—:</p>

<pre><code class="Objective-C">@implementation CYLPerson 
@synthesize firstName = _myFirstName; 
@synthesize lastName = _myLastName; 
@end 
</code></pre>

<p>ä¸Šè¿°è¯­æ³•ä¼šå°†ç”Ÿæˆçš„å®ä¾‹å˜é‡å‘½åä¸º<code>_myFirstName</code>ä¸<code>_myLastName</code>ï¼Œè€Œä¸å†ä½¿ç”¨é»˜è®¤çš„åå­—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ— é¡»ä¿®æ”¹é»˜è®¤çš„å®ä¾‹å˜é‡åï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ä»¥ä¸‹åˆ’çº¿æ¥å‘½åå®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¿™ä¸ªåŠæ³•å°†å…¶æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„åå­—ã€‚ç¬”è€…è¿˜æ˜¯æ¨èä½¿ç”¨é»˜è®¤çš„å‘½åæ¡ˆï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰äººéƒ½åšæŒè¿™å¥—æ–¹æ¡ˆï¼Œé‚£ä¹ˆå†™å‡ºæ¥çš„ä»£ç å¤§å®¶éƒ½èƒ½çœ‹å¾—æ‡‚ã€‚</p>

<p>ä¸¾ä¾‹è¯´æ˜ï¼šåº”ç”¨åœºæ™¯ï¼š</p>

<pre><code>//
// .mæ–‡ä»¶
// http://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)
// https://github.com/ChenYilong
// æ‰“å¼€ç¬¬14è¡Œå’Œç¬¬17è¡Œä¸­ä»»æ„ä¸€è¡Œï¼Œå°±å¯ç¼–è¯‘æˆåŠŸ

@import Foundation;

@interface CYLObject : NSObject
@property (nonatomic, copy) NSString *title;
@end

@implementation CYLObject {
//    NSString *_title;
}

//@synthesize title = _title;

- (instancetype)init
{
    self = [super init];
    if (self) {
        _title = @"å¾®åš@iOSç¨‹åºçŠ­è¢";
    }
    return self;
}

- (NSString *)title {
    return _title;
}

- (void)setTitle:(NSString *)title {
    _title = [title copy];
}

@end
</code></pre>

<p>ç»“æœç¼–è¯‘å™¨æŠ¥é”™ï¼š
<img src="http://i.imgur.com/fAEGHIo.png" alt="enter image description here" /></p>

<p>å½“ä½ åŒæ—¶é‡å†™äº†setterå’Œgetteræ—¶ï¼Œç³»ç»Ÿå°±ä¸ä¼šç”Ÿæˆivarï¼ˆå®ä¾‹å˜é‡/æˆå‘˜å˜é‡ï¼‰ã€‚è¿™æ—¶å€™æœ‰ä¸¤ç§é€‰æ‹©ï¼š</p>

<ol>
<li>è¦ä¹ˆå¦‚ç¬¬14è¡Œï¼šæ‰‹åŠ¨åˆ›å»ºivar</li>
<li>è¦ä¹ˆå¦‚ç¬¬17è¡Œï¼šä½¿ç”¨<code>@synthesize foo = _foo;</code> ï¼Œå…³è”@propertyä¸ivarã€‚</li>
</ol>


<p>æ›´å¤šä¿¡æ¯ï¼Œè¯·æˆ³- ã€‹<a href="http://stackoverflow.com/a/19821816/3395008"> <strong><em>When should I use @synthesize explicitly?</em></strong> </a></p>

<h3>16. objcä¸­å‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯å°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3>

<p>åœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®Œå…¨æœ‰æ•ˆçš„â€”â€”åªæ˜¯åœ¨è¿è¡Œæ—¶ä¸ä¼šæœ‰ä»»ä½•ä½œç”¨:</p>

<ol>
<li>å¦‚æœä¸€ä¸ªæ–¹æ³•è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå‘é€ç»™nilçš„æ¶ˆæ¯å°†è¿”å›0(nil)ã€‚ä¾‹å¦‚ï¼š</li>
</ol>


<pre><code class="`Objective-C">Person * motherInlaw = [[aPerson spouse] mother];
</code></pre>

<p> å¦‚æœspouseå¯¹è±¡ä¸ºnilï¼Œé‚£ä¹ˆå‘é€ç»™nilçš„æ¶ˆæ¯motherä¹Ÿå°†è¿”å›nilã€‚
 2. å¦‚æœæ–¹æ³•è¿”å›å€¼ä¸ºæŒ‡é’ˆç±»å‹ï¼Œå…¶æŒ‡é’ˆå¤§å°ä¸ºå°äºæˆ–è€…ç­‰äºsizeof(void*)ï¼Œfloatï¼Œdoubleï¼Œlong double æˆ–è€…long longçš„æ•´å‹æ ‡é‡ï¼Œå‘é€ç»™nilçš„æ¶ˆæ¯å°†è¿”å›0ã€‚
 2. å¦‚æœæ–¹æ³•è¿”å›å€¼ä¸ºç»“æ„ä½“,å‘é€ç»™nilçš„æ¶ˆæ¯å°†è¿”å›0ã€‚ç»“æ„ä½“ä¸­å„ä¸ªå­—æ®µçš„å€¼å°†éƒ½æ˜¯0ã€‚
 2. å¦‚æœæ–¹æ³•çš„è¿”å›å€¼ä¸æ˜¯ä¸Šè¿°æåˆ°çš„å‡ ç§æƒ…å†µï¼Œé‚£ä¹ˆå‘é€ç»™nilçš„æ¶ˆæ¯çš„è¿”å›å€¼å°†æ˜¯æœªå®šä¹‰çš„ã€‚</p>

<p>å…·ä½“åŸå› å¦‚ä¸‹ï¼š</p>

<blockquote><p>objcæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ¨æ€è½¬ä¸ºæ¶ˆæ¯å‘é€ï¼Œå³ï¼šobjc_msgSend(receiver, selector)ã€‚</p></blockquote>

<p>é‚£ä¹ˆï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£è¿™ä¸ªå†…å®¹ï¼Œè¿˜æ˜¯è´´ä¸€ä¸ªobjcçš„æºä»£ç ï¼š</p>

<pre><code class="Objective-C">
// runtime.hï¼ˆç±»åœ¨runtimeä¸­çš„å®šä¹‰ï¼‰
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong

struct objc_class {
  Class isa OBJC_ISA_AVAILABILITY; //isaæŒ‡é’ˆæŒ‡å‘Meta Classï¼Œå› ä¸ºObjcçš„ç±»çš„æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªObjectï¼Œä¸ºäº†å¤„ç†è¿™ä¸ªå…³ç³»ï¼Œruntimeå°±åˆ›é€ äº†Meta Classï¼Œå½“ç»™ç±»å‘é€[NSObject alloc]è¿™æ ·æ¶ˆæ¯æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠè¿™ä¸ªæ¶ˆæ¯å‘ç»™äº†Class Object
  #if !__OBJC2__
  Class super_class OBJC2_UNAVAILABLE; // çˆ¶ç±»
  const char *name OBJC2_UNAVAILABLE; // ç±»å
  long version OBJC2_UNAVAILABLE; // ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0
  long info OBJC2_UNAVAILABLE; // ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯†
  long instance_size OBJC2_UNAVAILABLE; // è¯¥ç±»çš„å®ä¾‹å˜é‡å¤§å°
  struct objc_ivar_list *ivars OBJC2_UNAVAILABLE; // è¯¥ç±»çš„æˆå‘˜å˜é‡é“¾è¡¨
  struct objc_method_list **methodLists OBJC2_UNAVAILABLE; // æ–¹æ³•å®šä¹‰çš„é“¾è¡¨
  struct objc_cache *cache OBJC2_UNAVAILABLE; // æ–¹æ³•ç¼“å­˜ï¼Œå¯¹è±¡æ¥åˆ°ä¸€ä¸ªæ¶ˆæ¯ä¼šæ ¹æ®isaæŒ‡é’ˆæŸ¥æ‰¾æ¶ˆæ¯å¯¹è±¡ï¼Œè¿™æ—¶ä¼šåœ¨method Listsä¸­éå†ï¼Œå¦‚æœcacheäº†ï¼Œå¸¸ç”¨çš„æ–¹æ³•è°ƒç”¨æ—¶å°±èƒ½å¤Ÿæé«˜è°ƒç”¨çš„æ•ˆç‡ã€‚
  struct objc_protocol_list *protocols OBJC2_UNAVAILABLE; // åè®®é“¾è¡¨
  #endif
  } OBJC2_UNAVAILABLE;
</code></pre>

<p>objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œruntimeåº“ä¼šæ ¹æ®å¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡å®é™…æ‰€å±çš„ç±»ï¼Œç„¶ååœ¨è¯¥ç±»ä¸­çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠå…¶çˆ¶ç±»æ–¹æ³•åˆ—è¡¨ä¸­å¯»æ‰¾æ–¹æ³•è¿è¡Œï¼Œç„¶ååœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œobjc_msgSendæ–¹æ³•ä¸ä¼šè¿”å›å€¼ï¼Œæ‰€è°“çš„è¿”å›å†…å®¹éƒ½æ˜¯å…·ä½“è°ƒç”¨æ—¶æ‰§è¡Œçš„ã€‚
é‚£ä¹ˆï¼Œå›åˆ°æœ¬é¢˜ï¼Œå¦‚æœå‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œé¦–å…ˆåœ¨å¯»æ‰¾å¯¹è±¡çš„isaæŒ‡é’ˆæ—¶å°±æ˜¯0åœ°å€è¿”å›äº†ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ã€‚</p>

<h3>17. objcä¸­å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>

<p>å…·ä½“åŸå› åŒä¸Šé¢˜ï¼šè¯¥æ–¹æ³•ç¼–è¯‘ä¹‹åå°±æ˜¯<code>objc_msgSend()</code>å‡½æ•°è°ƒç”¨.å¦‚æœæˆ‘æ²¡æœ‰è®°é”™çš„å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>

<pre><code class="Objective-C">((void ()(id, SEL))(void )objc_msgSend)((id)obj, sel_registerName("foo"));
</code></pre>

<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>

<blockquote><p> [obj foo];åœ¨objcåŠ¨æ€ç¼–è¯‘æ—¶ï¼Œä¼šè¢«è½¬æ„ä¸ºï¼š<code>objc_msgSend(obj, @selector(foo));</code>ã€‚</p></blockquote>

<h3>18. ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectorçš„å¼‚å¸¸ï¼Ÿ</h3>

<p>ç®€å•æ¥è¯´ï¼š</p>

<blockquote><p>å½“ä½¿ç”¨æŸå¯¹è±¡ä¸Šçš„æŸä¸ªæ–¹æ³•,è€Œè¯¥å¯¹è±¡ä¸Šæ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œ
å¯ä»¥é€šè¿‡â€œæ¶ˆæ¯è½¬å‘â€è¿›è¡Œè§£å†³ã€‚</p></blockquote>

<p>ç®€å•çš„æµç¨‹å¦‚ä¸‹ï¼Œåœ¨ä¸Šä¸€é¢˜ä¸­ä¹Ÿæåˆ°è¿‡ï¼š</p>

<blockquote><p>objcæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ¨æ€è½¬ä¸ºæ¶ˆæ¯å‘é€ï¼Œå³ï¼šobjc_msgSend(receiver, selector)ã€‚</p></blockquote>

<p>objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œruntimeåº“ä¼šæ ¹æ®å¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡å®é™…æ‰€å±çš„ç±»ï¼Œç„¶ååœ¨è¯¥ç±»ä¸­çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠå…¶çˆ¶ç±»æ–¹æ³•åˆ—è¡¨ä¸­å¯»æ‰¾æ–¹æ³•è¿è¡Œï¼Œå¦‚æœï¼Œåœ¨æœ€é¡¶å±‚çš„çˆ¶ç±»ä¸­ä¾ç„¶æ‰¾ä¸åˆ°ç›¸åº”çš„æ–¹æ³•æ—¶ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šæŒ‚æ‰å¹¶æŠ›å‡ºå¼‚å¸¸unrecognized selector sent to XXX ã€‚ä½†æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œobjcçš„è¿è¡Œæ—¶ä¼šç»™å‡ºä¸‰æ¬¡æ‹¯æ•‘ç¨‹åºå´©æºƒçš„æœºä¼šï¼š</p>

<ol>
<li>Method resolution</li>
</ol>


<p> objcè¿è¡Œæ—¶ä¼šè°ƒç”¨<code>+resolveInstanceMethod:</code>æˆ–è€… <code>+resolveClassMethod:</code>ï¼Œè®©ä½ æœ‰æœºä¼šæä¾›ä¸€ä¸ªå‡½æ•°å®ç°ã€‚å¦‚æœä½ æ·»åŠ äº†å‡½æ•°å¹¶è¿”å› YESï¼Œé‚£è¿è¡Œæ—¶ç³»ç»Ÿå°±ä¼šé‡æ–°å¯åŠ¨ä¸€æ¬¡æ¶ˆæ¯å‘é€çš„è¿‡ç¨‹ï¼Œå¦‚æœ resolve æ–¹æ³•è¿”å› NO ï¼Œè¿è¡Œæ—¶å°±ä¼šç§»åˆ°ä¸‹ä¸€æ­¥ï¼Œæ¶ˆæ¯è½¬å‘ï¼ˆMessage Forwardingï¼‰ã€‚</p>

<ol>
<li>Fast forwarding</li>
</ol>


<p> å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†<code>-forwardingTargetForSelector:</code>ï¼ŒRuntime è¿™æ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç»™ä½ æŠŠè¿™ä¸ªæ¶ˆæ¯è½¬å‘ç»™å…¶ä»–å¯¹è±¡çš„æœºä¼šã€‚
åªè¦è¿™ä¸ªæ–¹æ³•è¿”å›çš„ä¸æ˜¯nilå’Œselfï¼Œæ•´ä¸ªæ¶ˆæ¯å‘é€çš„è¿‡ç¨‹å°±ä¼šè¢«é‡å¯ï¼Œå½“ç„¶å‘é€çš„å¯¹è±¡ä¼šå˜æˆä½ è¿”å›çš„é‚£ä¸ªå¯¹è±¡ã€‚å¦åˆ™ï¼Œå°±ä¼šç»§ç»­Normal Fowardingã€‚
è¿™é‡Œå«Fastï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ«ä¸‹ä¸€æ­¥çš„è½¬å‘æœºåˆ¶ã€‚å› ä¸ºè¿™ä¸€æ­¥ä¸ä¼šåˆ›å»ºä»»ä½•æ–°çš„å¯¹è±¡ï¼Œä½†ä¸‹ä¸€æ­¥è½¬å‘ä¼šåˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡ï¼Œæ‰€ä»¥ç›¸å¯¹æ›´å¿«ç‚¹ã€‚
 3. Normal forwarding</p>

<p> è¿™ä¸€æ­¥æ˜¯Runtimeæœ€åä¸€æ¬¡ç»™ä½ æŒ½æ•‘çš„æœºä¼šã€‚é¦–å…ˆå®ƒä¼šå‘é€<code>-methodSignatureForSelector:</code>æ¶ˆæ¯è·å¾—å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ã€‚å¦‚æœ<code>-methodSignatureForSelector:</code>è¿”å›nilï¼ŒRuntimeåˆ™ä¼šå‘å‡º<code>-doesNotRecognizeSelector:</code>æ¶ˆæ¯ï¼Œç¨‹åºè¿™æ—¶ä¹Ÿå°±æŒ‚æ‰äº†ã€‚å¦‚æœè¿”å›äº†ä¸€ä¸ªå‡½æ•°ç­¾åï¼ŒRuntimeå°±ä¼šåˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡å¹¶å‘é€<code>-forwardInvocation:</code>æ¶ˆæ¯ç»™ç›®æ ‡å¯¹è±¡ã€‚</p>

<h3>19. ä¸€ä¸ªobjcå¯¹è±¡å¦‚ä½•è¿›è¡Œå†…å­˜å¸ƒå±€ï¼Ÿï¼ˆè€ƒè™‘æœ‰çˆ¶ç±»çš„æƒ…å†µï¼‰</h3>

<ul>
<li>æ‰€æœ‰çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œè‡ªå·±çš„æˆå‘˜å˜é‡éƒ½ä¼šå­˜æ”¾åœ¨è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„å­˜å‚¨ç©ºé—´ä¸­.</li>
<li><p>æ¯ä¸€ä¸ªå¯¹è±¡å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆ,æŒ‡å‘ä»–çš„ç±»å¯¹è±¡,ç±»å¯¹è±¡ä¸­å­˜æ”¾ç€æœ¬å¯¹è±¡çš„</p></li>
<li><p>å¯¹è±¡æ–¹æ³•åˆ—è¡¨ï¼ˆå¯¹è±¡èƒ½å¤Ÿæ¥æ”¶çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œä¿å­˜åœ¨å®ƒæ‰€å¯¹åº”çš„ç±»å¯¹è±¡ä¸­ï¼‰</p></li>
<li>æˆå‘˜å˜é‡çš„åˆ—è¡¨,</li>
<li>å±æ€§åˆ—è¡¨,</li>
</ul>


<p> å®ƒå†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å…ƒå¯¹è±¡(meta class),å…ƒå¯¹è±¡å†…éƒ¨å­˜æ”¾çš„æ˜¯ç±»æ–¹æ³•åˆ—è¡¨,ç±»å¯¹è±¡å†…éƒ¨è¿˜æœ‰ä¸€ä¸ªsuperclassçš„æŒ‡é’ˆ,æŒ‡å‘ä»–çš„çˆ¶ç±»å¯¹è±¡ã€‚</p>

<p> <img src="http://i.imgur.com/7mJlUj1.png" alt="enter image description here" /></p>

<ul>
<li><p>æ ¹å¯¹è±¡å°±æ˜¯NSobjectï¼Œå®ƒçš„superclassæŒ‡é’ˆæŒ‡å‘nil</p></li>
<li><p>ç±»å¯¹è±¡æ—¢ç„¶ç§°ä¸ºå¯¹è±¡ï¼Œé‚£å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå®ä¾‹ã€‚ç±»å¯¹è±¡ä¸­ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å®ƒçš„å…ƒç±»(meta class)ï¼Œå³ç±»å¯¹è±¡æ˜¯å…ƒç±»çš„å®ä¾‹ã€‚å…ƒç±»å†…éƒ¨å­˜æ”¾çš„æ˜¯ç±»æ–¹æ³•åˆ—è¡¨ï¼Œæ ¹å…ƒç±»çš„isaæŒ‡é’ˆæŒ‡å‘è‡ªå·±ï¼ŒsuperclassæŒ‡é’ˆæŒ‡å‘NSObjectç±»ã€‚</p></li>
</ul>


<p>å¦‚å›¾:
<img src="http://i.imgur.com/w6tzFxz.png" alt="enter image description here" /></p>

<h3>20. ä¸€ä¸ªobjcå¯¹è±¡çš„isaçš„æŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3>

<p>æŒ‡å‘ä»–çš„ç±»å¯¹è±¡,ä»è€Œå¯ä»¥æ‰¾åˆ°å¯¹è±¡ä¸Šçš„æ–¹æ³•</p>

<h3>21. ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</h3>

<pre><code>@implementation Son : Father
- (id)init
{
    self = [super init];
    if (self) {
        NSLog(@"%@", NSStringFromClass([self class]));
        NSLog(@"%@", NSStringFromClass([super class]));
    }
    return self;
}
@end
</code></pre>

<p><strong>ç­”æ¡ˆï¼š</strong></p>

<p>éƒ½è¾“å‡º Son</p>

<pre><code>NSStringFromClass([self class]) = Son
NSStringFromClass([super class]) = Son
</code></pre>

<p><strong>è§£æƒ‘ï¼š</strong></p>

<p>ï¼ˆä»¥ä¸‹è§£æƒ‘éƒ¨åˆ†æ‘˜è‡ª<a href="http://weibo.com/junbbcom">å¾®åš@Chun_iOS</a>çš„åšæ–‡<a href="http://chun.tips/blog/2014/11/05/bao-gen-wen-di-objective%5Bnil%5Dc-runtime(1">åˆ¨æ ¹é—®åº•Objectiveï¼C Runtimeï¼ˆ1ï¼‰ï¼ Self &amp; Super</a>%5Bnil%5D-self-and-super/)ï¼‰</p>

<p>è¿™ä¸ªé¢˜ç›®ä¸»è¦æ˜¯è€ƒå¯Ÿå…³äºobjcä¸­å¯¹ self å’Œ super çš„ç†è§£ã€‚</p>

<p>self æ˜¯ç±»çš„éšè—å‚æ•°ï¼ŒæŒ‡å‘å½“å‰è°ƒç”¨æ–¹æ³•çš„è¿™ä¸ªç±»çš„å®ä¾‹ã€‚è€Œ super æ˜¯ä¸€ä¸ª Magic Keywordï¼Œ å®ƒæœ¬è´¨æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨æ ‡ç¤ºç¬¦ï¼Œå’Œ self æ˜¯æŒ‡å‘çš„åŒä¸€ä¸ªæ¶ˆæ¯æ¥å—è€…ã€‚</p>

<p>ä¸Šé¢çš„ä¾‹å­ä¸ç®¡è°ƒç”¨<code>[self class]</code>è¿˜æ˜¯<code>[super class]</code>ï¼Œæ¥å—æ¶ˆæ¯çš„å¯¹è±¡éƒ½æ˜¯å½“å‰ <code>Son ï¼Šxxx</code> è¿™ä¸ªå¯¹è±¡ã€‚è€Œä¸åŒçš„æ˜¯ï¼Œsuperæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè°ƒç”¨ class è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œè¦å»çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æœ¬ç±»é‡Œçš„ã€‚</p>

<p>å½“ä½¿ç”¨ self è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä»å½“å‰ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»çˆ¶ç±»ä¸­å†æ‰¾ï¼›è€Œå½“ä½¿ç”¨ super æ—¶ï¼Œåˆ™ä»çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ã€‚ç„¶åè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•ã€‚</p>

<p>çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿç»§ç»­çœ‹ï¼š</p>

<p>ä½¿ç”¨clangé‡å†™å‘½ä»¤:</p>

<pre><code>$ clang -rewrite-objc test.m
</code></pre>

<p>å‘ç°ä¸Šè¿°ä»£ç è¢«è½¬åŒ–ä¸º:</p>

<pre><code>NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_0, NSStringFromClass(((Class (*)(id, SEL))(void *)objc_msgSend)((id)self, sel_registerName("class"))));

NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_1, NSStringFromClass(((Class (*)(__rw_objc_super *, SEL))(void *)objc_msgSendSuper)((__rw_objc_super){ (id)self, (id)class_getSuperclass(objc_getClass("Son")) }, sel_registerName("class"))));
</code></pre>

<p>ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨è°ƒç”¨ [self class] æ—¶ï¼Œä¼šè½¬åŒ–æˆ <code>objc_msgSend</code>å‡½æ•°ã€‚çœ‹ä¸‹å‡½æ•°å®šä¹‰ï¼š</p>

<pre><code>id objc_msgSend(id self, SEL op, ...)
</code></pre>

<p>æˆ‘ä»¬æŠŠ self åšä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›å»ã€‚</p>

<p>è€Œåœ¨è°ƒç”¨ [super class]æ—¶ï¼Œä¼šè½¬åŒ–æˆ <code>objc_msgSendSuper</code>å‡½æ•°ã€‚çœ‹ä¸‹å‡½æ•°å®šä¹‰:</p>

<pre><code>id objc_msgSendSuper(struct objc_super *super, SEL op, ...)
</code></pre>

<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>objc_super</code> è¿™æ ·ä¸€ä¸ªç»“æ„ä½“ï¼Œå…¶å®šä¹‰å¦‚ä¸‹:</p>

<pre><code>struct objc_super {
   __unsafe_unretained id receiver;
   __unsafe_unretained Class super_class;
};
</code></pre>

<p>ç»“æ„ä½“æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯ receiver, ç±»ä¼¼äºä¸Šé¢çš„ <code>objc_msgSend</code>å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°self ã€‚ç¬¬äºŒä¸ªæˆå‘˜æ˜¯è®°å½•å½“å‰ç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆã€‚</p>

<p>æ‰€ä»¥ï¼Œå½“è°ƒç”¨ ï¼»self class] æ—¶ï¼Œå®é™…å…ˆè°ƒç”¨çš„æ˜¯ <code>objc_msgSend</code>å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Sonå½“å‰çš„è¿™ä¸ªå®ä¾‹ï¼Œç„¶ååœ¨ Son è¿™ä¸ªç±»é‡Œé¢å»æ‰¾ - (Class)classè¿™ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰ï¼Œå»çˆ¶ç±» Fatheré‡Œæ‰¾ï¼Œä¹Ÿæ²¡æœ‰ï¼Œæœ€ååœ¨ NSObjectç±»ä¸­å‘ç°è¿™ä¸ªæ–¹æ³•ã€‚è€Œ - (Class)classçš„å®ç°å°±æ˜¯è¿”å›selfçš„ç±»åˆ«ï¼Œæ•…ä¸Šè¿°è¾“å‡ºç»“æœä¸º Sonã€‚</p>

<p>objc Runtimeå¼€æºä»£ç å¯¹- (Class)classæ–¹æ³•çš„å®ç°:</p>

<pre><code>- (Class)class {
    return object_getClass(self);
}
</code></pre>

<p>è€Œå½“è°ƒç”¨ <code>[super class]</code>æ—¶ï¼Œä¼šè½¬æ¢æˆ<code>objc_msgSendSuperå‡½æ•°</code>ã€‚ç¬¬ä¸€æ­¥å…ˆæ„é€  <code>objc_super</code> ç»“æ„ä½“ï¼Œç»“æ„ä½“ç¬¬ä¸€ä¸ªæˆå‘˜å°±æ˜¯ <code>self</code> ã€‚
ç¬¬äºŒä¸ªæˆå‘˜æ˜¯ <code>(id)class_getSuperclass(objc_getClass(â€œSonâ€))</code> , å®é™…è¯¥å‡½æ•°è¾“å‡ºç»“æœä¸º Fatherã€‚
ç¬¬äºŒæ­¥æ˜¯å» Fatherè¿™ä¸ªç±»é‡Œå»æ‰¾ <code>- (Class)class</code>ï¼Œæ²¡æœ‰ï¼Œç„¶åå»NSObjectç±»å»æ‰¾ï¼Œæ‰¾åˆ°äº†ã€‚æœ€åå†…éƒ¨æ˜¯ä½¿ç”¨ <code>objc_msgSend(objc_super-&gt;receiver, @selector(class))</code>å»è°ƒç”¨ï¼Œ
æ­¤æ—¶å·²ç»å’Œ<code>[self class]</code>è°ƒç”¨ç›¸åŒäº†ï¼Œæ•…ä¸Šè¿°è¾“å‡ºç»“æœä»ç„¶è¿”å› Sonã€‚</p>

<h3>22. runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€ï¼Ÿï¼ˆåˆ†åˆ«è€ƒè™‘ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰</h3>

<p>æ¯ä¸€ä¸ªç±»å¯¹è±¡ä¸­éƒ½ä¸€ä¸ªæ–¹æ³•åˆ—è¡¨,æ–¹æ³•åˆ—è¡¨ä¸­è®°å½•ç€æ–¹æ³•çš„åç§°,æ–¹æ³•å®ç°,ä»¥åŠå‚æ•°ç±»å‹,å…¶å®selectoræœ¬è´¨å°±æ˜¯æ–¹æ³•åç§°,é€šè¿‡è¿™ä¸ªæ–¹æ³•åç§°å°±å¯ä»¥åœ¨æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å®ç°.</p>

<h3>23. ä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾ä¹ˆï¼Ÿ</h3>

<ul>
<li>åœ¨ARCä¸‹ä¸éœ€è¦ã€‚</li>
<li><p><del> åœ¨MRCä¸­,å¯¹äºä½¿ç”¨retainæˆ–copyç­–ç•¥çš„éœ€è¦ ã€‚</del></p>åœ¨MRCä¸‹ä¹Ÿä¸éœ€è¦</li>
</ul>


<blockquote><p>æ— è®ºåœ¨MRCä¸‹è¿˜æ˜¯ARCä¸‹å‡ä¸éœ€è¦ã€‚</p></blockquote>

<p><a href="https://web.archive.org/web/20120818164935/http://developer.apple.com/library/ios/#/web/20120820002100/http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html"> <strong><em>2011å¹´ç‰ˆæœ¬çš„Apple API å®˜æ–¹æ–‡æ¡£ - Associative References</em></strong>  </a> ä¸€èŠ‚ä¸­æœ‰ä¸€ä¸ªMRCç¯å¢ƒä¸‹çš„ä¾‹å­ï¼š</p>

<pre><code class="Objective-C">// åœ¨MRCä¸‹ï¼Œä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œä¸éœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾
// http://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)
// https://github.com/ChenYilong
// æ‘˜è‡ª2011å¹´ç‰ˆæœ¬çš„Apple API å®˜æ–¹æ–‡æ¡£ - Associative References 

static char overviewKey;

NSArray *array =
    [[NSArray alloc] initWithObjects:@"One", @"Two", @"Three", nil];
// For the purposes of illustration, use initWithFormat: to ensure
// the string can be deallocated
NSString *overview =
    [[NSString alloc] initWithFormat:@"%@", @"First three numbers"];

objc_setAssociatedObject (
    array,
    &amp;overviewKey,
    overview,
    OBJC_ASSOCIATION_RETAIN
);

[overview release];
// (1) overview valid
[array release];
// (2) overview invalid
</code></pre>

<p>æ–‡æ¡£æŒ‡å‡º</p>

<blockquote><p>At point 1, the string <code>overview</code> is still valid because the <code>OBJC_ASSOCIATION_RETAIN</code> policy specifies that the array retains the associated object. When the array is deallocated, however (at point 2), <code>overview</code> is released and so in this case also deallocated.</p></blockquote>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>[array release];</code>ä¹‹åï¼Œoverviewå°±ä¼šè¢«releaseé‡Šæ”¾æ‰äº†ã€‚</p>

<p>æ—¢ç„¶ä¼šè¢«é”€æ¯ï¼Œé‚£ä¹ˆå…·ä½“åœ¨ä»€ä¹ˆæ—¶é—´ç‚¹ï¼Ÿ</p>

<blockquote><p>æ ¹æ®<a href="https://developer.apple.com/videos/wwdc/2011/#322-video"> <strong><em>WWDC 2011, Session 322 (ç¬¬36åˆ†22ç§’)</em></strong> </a>ä¸­å‘å¸ƒçš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ï¼Œè¢«å…³è”çš„å¯¹è±¡åœ¨ç”Ÿå‘½å‘¨æœŸå†…è¦æ¯”å¯¹è±¡æœ¬èº«é‡Šæ”¾çš„æ™šå¾ˆå¤šã€‚å®ƒä»¬ä¼šåœ¨è¢« NSObject -dealloc è°ƒç”¨çš„ object_dispose() æ–¹æ³•ä¸­é‡Šæ”¾ã€‚</p></blockquote>

<p>å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ï¼Œåˆ†å››ä¸ªæ­¥éª¤ï¼š</p>

<pre><code>// å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨
// http://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)
// https://github.com/ChenYilong
// æ ¹æ® WWDC 2011, Session 322 (36åˆ†22ç§’)ä¸­å‘å¸ƒçš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ 

// 1. è°ƒç”¨ -release ï¼šå¼•ç”¨è®¡æ•°å˜ä¸ºé›¶
//     * å¯¹è±¡æ­£åœ¨è¢«é”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå³å°†ç»“æŸ.
//     * ä¸èƒ½å†æœ‰æ–°çš„ __weak å¼±å¼•ç”¨ï¼Œ å¦åˆ™å°†æŒ‡å‘ nil.
//     * è°ƒç”¨ [self dealloc] 
// 2. çˆ¶ç±» è°ƒç”¨ -dealloc
//     * ç»§æ‰¿å…³ç³»ä¸­æœ€åº•å±‚çš„çˆ¶ç±» åœ¨è°ƒç”¨ -dealloc
//     * å¦‚æœæ˜¯ MRC ä»£ç  åˆ™ä¼šæ‰‹åŠ¨é‡Šæ”¾å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰
//     * ç»§æ‰¿å…³ç³»ä¸­æ¯ä¸€å±‚çš„çˆ¶ç±» éƒ½åœ¨è°ƒç”¨ -dealloc
// 3. NSObject è°ƒ -dealloc
//     * åªåšä¸€ä»¶äº‹ï¼šè°ƒç”¨ Objective-C runtime ä¸­çš„ object_dispose() æ–¹æ³•
// 4. è°ƒç”¨ object_dispose()
//     * ä¸º C++ çš„å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰è°ƒç”¨ destructors 
//     * ä¸º ARC çŠ¶æ€ä¸‹çš„ å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰ è°ƒç”¨ -release 
//     * è§£é™¤æ‰€æœ‰ä½¿ç”¨ runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡
//     * è§£é™¤æ‰€æœ‰ __weak å¼•ç”¨
//     * è°ƒç”¨ free()
</code></pre>

<p>ï¼ˆ<a href="http://stackoverflow.com/a/10843510/3395008">å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨å‚è€ƒé“¾æ¥</a>ï¼‰</p>

<h3>24. objcä¸­çš„ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«å’Œè”ç³»ï¼Ÿ</h3>

<p>ç±»æ–¹æ³•ï¼š</p>

<ol>
<li>ç±»æ–¹æ³•æ˜¯å±äºç±»å¯¹è±¡çš„</li>
<li>ç±»æ–¹æ³•åªèƒ½é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨</li>
<li>ç±»æ–¹æ³•ä¸­çš„selfæ˜¯ç±»å¯¹è±¡</li>
<li>ç±»æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–çš„ç±»æ–¹æ³•</li>
<li>ç±»æ–¹æ³•ä¸­ä¸èƒ½è®¿é—®æˆå‘˜å˜é‡</li>
<li>ç±»æ–¹æ³•ä¸­ä¸å®šç›´æ¥è°ƒç”¨å¯¹è±¡æ–¹æ³•</li>
</ol>


<p>å®ä¾‹æ–¹æ³•ï¼š</p>

<ol>
<li>å®ä¾‹æ–¹æ³•æ˜¯å±äºå®ä¾‹å¯¹è±¡çš„</li>
<li>å®ä¾‹æ–¹æ³•åªèƒ½é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨</li>
<li>å®ä¾‹æ–¹æ³•ä¸­çš„selfæ˜¯å®ä¾‹å¯¹è±¡</li>
<li>å®ä¾‹æ–¹æ³•ä¸­å¯ä»¥è®¿é—®æˆå‘˜å˜é‡</li>
<li>å®ä¾‹æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•</li>
<li>å®ä¾‹æ–¹æ³•ä¸­ä¹Ÿå¯ä»¥è°ƒç”¨ç±»æ–¹æ³•(é€šè¿‡ç±»å)</li>
</ol>


<h2>ä¸‹ä¸€ç¯‡æ–‡ç« å°†å‘å¸ƒåœ¨<a href="https://github.com/ChenYilong/iOSInterviewQuestions">è¿™é‡Œ</a>ï¼Œä¼šå¯¹ä»¥ä¸‹é—®é¢˜è¿›è¡Œæ€»ç»“ï¼Œå¹¶å°†æœ¬ç¯‡æ–‡ç« çš„å‹˜è¯¯ä¸€å¹¶åˆ—å‡ºï¼Œæ¬¢è¿æŒ‡æ­£ï¼è¯·æŒç»­å…³æ³¨<a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a></h2>

<p>@propertyéƒ¨åˆ†ä¸»è¦å‚è€ƒ
<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW2">Appleå®˜æ–¹æ–‡æ¡£ï¼šProperties Encapsulate an Objectâ€™s Values</a>
runtimeéƒ¨åˆ†ä¸»è¦å‚è€ƒ<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html">Appleå®˜æ–¹æ–‡æ¡£ï¼šDeclared Properties</a></p>

<h3>25. <code>_objc_msgForward</code>å‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Œç›´æ¥è°ƒç”¨å®ƒå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3>

<h3>26. runtimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ</h3>

<h3>27. èƒ½å¦å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3>

<h3>28. runloopå’Œçº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>

<h3>29. runloopçš„modeä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>

<h3>30. ä»¥+ scheduledTimerWithTimeInterval&hellip;çš„æ–¹å¼è§¦å‘çš„timerï¼Œåœ¨æ»‘åŠ¨é¡µé¢ä¸Šçš„åˆ—è¡¨æ—¶ï¼Œtimerä¼šæš‚å®šå›è°ƒï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</h3>

<h3>31. çŒœæƒ³runloopå†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3>

<h3>32. objcä½¿ç”¨ä»€ä¹ˆæœºåˆ¶ç®¡ç†å¯¹è±¡å†…å­˜ï¼Ÿ</h3>

<h3>33. ARCé€šè¿‡ä»€ä¹ˆæ–¹å¼å¸®åŠ©å¼€å‘è€…ç®¡ç†å†…å­˜ï¼Ÿ</h3>

<h3>34. ä¸æ‰‹åŠ¨æŒ‡å®šautoreleasepoolçš„å‰æä¸‹ï¼Œä¸€ä¸ªautorealeseå¯¹è±¡åœ¨ä»€ä¹ˆæ—¶åˆ»é‡Šæ”¾ï¼Ÿï¼ˆæ¯”å¦‚åœ¨ä¸€ä¸ªvcçš„viewDidLoadä¸­åˆ›å»ºï¼‰</h3>

<h3>35. <code>BAD_ACCESS</code>åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°ï¼Ÿ</h3>

<h3>36. è‹¹æœæ˜¯å¦‚ä½•å®ç°autoreleasepoolçš„ï¼Ÿ</h3>

<h3>37. ä½¿ç”¨blockæ—¶ä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå¼•ç”¨å¾ªç¯ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</h3>

<h3>38. åœ¨blockå†…å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨å˜é‡ï¼Ÿ</h3>

<h3>39. ä½¿ç”¨ç³»ç»Ÿçš„æŸäº›block apiï¼ˆå¦‚UIViewçš„blockç‰ˆæœ¬å†™åŠ¨ç”»æ—¶ï¼‰ï¼Œæ˜¯å¦ä¹Ÿè€ƒè™‘å¼•ç”¨å¾ªç¯é—®é¢˜ï¼Ÿ</h3>

<h3>40. GCDçš„é˜Ÿåˆ—ï¼ˆ<code>dispatch_queue_t</code>ï¼‰åˆ†å“ªä¸¤ç§ç±»å‹ï¼Ÿ</h3>

<h3>41. å¦‚ä½•ç”¨GCDåŒæ­¥è‹¥å¹²ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Ÿï¼ˆå¦‚æ ¹æ®è‹¥å¹²ä¸ªurlå¼‚æ­¥åŠ è½½å¤šå¼ å›¾ç‰‡ï¼Œç„¶ååœ¨éƒ½ä¸‹è½½å®Œæˆååˆæˆä¸€å¼ æ•´å›¾ï¼‰</h3>

<h3>42. <code>dispatch_barrier_async</code>çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>

<h3>43. è‹¹æœä¸ºä»€ä¹ˆè¦åºŸå¼ƒ<code>dispatch_get_current_queue</code>ï¼Ÿ</h3>

<h3>44. ä»¥ä¸‹ä»£ç è¿è¡Œç»“æœå¦‚ä½•ï¼Ÿ</h3>

<pre><code>- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"1");
    dispatch_sync(dispatch_get_main_queue(), ^{
        NSLog(@"2");
    });
    NSLog(@"3");
}
</code></pre>

<h3>45. addObserver:forKeyPath:options:context:å„ä¸ªå‚æ•°çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œobserverä¸­éœ€è¦å®ç°å“ªä¸ªæ–¹æ³•æ‰èƒ½è·å¾—KVOå›è°ƒï¼Ÿ</h3>

<h3>46. å¦‚ä½•æ‰‹åŠ¨è§¦å‘ä¸€ä¸ªvalueçš„KVO</h3>

<h3>47. è‹¥ä¸€ä¸ªç±»æœ‰å®ä¾‹å˜é‡<code>NSString *_foo</code>ï¼Œè°ƒç”¨setValue:forKey:æ—¶ï¼Œå¯ä»¥ä»¥fooè¿˜æ˜¯<code>_foo</code>ä½œä¸ºkeyï¼Ÿ</h3>

<h3>48. KVCçš„keyPathä¸­çš„é›†åˆè¿ç®—ç¬¦å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3>

<h3>49. KVCå’ŒKVOçš„keyPathä¸€å®šæ˜¯å±æ€§ä¹ˆï¼Ÿ</h3>

<h3>50. å¦‚ä½•å…³é—­é»˜è®¤çš„KVOçš„é»˜è®¤å®ç°ï¼Œå¹¶è¿›å…¥è‡ªå®šä¹‰çš„KVOå®ç°ï¼Ÿ</h3>

<h3>51. appleç”¨ä»€ä¹ˆæ–¹å¼å®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„KVOï¼Ÿ</h3>

<h3>52. IBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?</h3>

<h3>53. IBä¸­User Defined Runtime Attributeså¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3>

<h3>54. å¦‚ä½•è°ƒè¯•<code>BAD_ACCESS</code>é”™è¯¯</h3>

<h3>55. lldbï¼ˆgdbï¼‰å¸¸ç”¨çš„è°ƒè¯•å‘½ä»¤ï¼Ÿ</h3>

<hr />

<p>Posted by <a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a><br/>
åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å¿«å¿«å¿«ï¼27ä¸ªæå‡æ•ˆç‡çš„iOSå¼€æºåº“æ¨è]]></title>
    <link href="http://www.superqq.com/blog/2015/07/22/kuai-kuai-kuai-!27ge-ti-sheng-xiao-lu-de-ioskai-yuan-ku-tui-jian/"/>
    <updated>2015-07-22T13:11:49+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/22/kuai-kuai-kuai-!27ge-ti-sheng-xiao-lu-de-ioskai-yuan-ku-tui-jian</id>
    <content type="html"><![CDATA[<blockquote><p>CSDNç§»åŠ¨å°†æŒç»­ä¸ºæ‚¨ä¼˜é€‰ç§»åŠ¨å¼€å‘çš„ç²¾åå†…å®¹ï¼Œå…±åŒæ¢è®¨ç§»åŠ¨å¼€å‘çš„æŠ€æœ¯çƒ­ç‚¹è¯é¢˜ï¼Œæ¶µç›–ç§»åŠ¨åº”ç”¨ã€å¼€å‘å·¥å…·ã€ç§»åŠ¨æ¸¸æˆåŠå¼•æ“ã€æ™ºèƒ½ç¡¬ä»¶ã€ç‰©è”ç½‘ç­‰æ–¹æ–¹é¢é¢ã€‚å¦‚æœæ‚¨æƒ³æŠ•ç¨¿ã€å‚ä¸å†…å®¹ç¿»è¯‘å·¥ä½œï¼Œæˆ–å¯»æ±‚è¿‘åŒ æŠ¥é“ï¼Œè¯·å‘é€é‚®ä»¶è‡³tangxy#csdn.netï¼ˆè¯·æŠŠ#æ”¹æˆ@ï¼‰ã€‚</p></blockquote>

<p>æˆ‘çƒ­çˆ±å¼€æºï¼Œæ›´å–œçˆ±é‚£äº›èŠ±è´¹å®è´µçš„ä¸šä½™æ—¶é—´æ¥åˆ›é€ å¥‡è¿¹çš„å¼€å‘è€…ä»¬ï¼Œæ„Ÿè°¢ä»–ä»¬å°†è‡ªå·±è¾›è‹¦åŠ³åŠ¨çš„æˆæœæ— å¿åˆ†äº«ç»™å¤§å®¶ã€‚å¼€æºä½œè€…å’Œè´¡çŒ®è€…ä»¬ï¼Œä½ ä»¬å¤ªäº†ä¸èµ·äº†ï¼Œæ„Ÿè°¢ä½ ä»¬æ‰€ä»˜å‡ºçš„ä¸€åˆ‡ã€‚</p>

<p>é‰´äºæˆ‘æ˜¯æ”¶é›†ä¸å…¨ä¼šæ­»æ˜Ÿäººï¼Œè¿™é‡Œæˆ‘æ ¹æ®ä¸ªäººå–œå¥½é€‰å–äº†ä¸€äº›iOSçš„å¼€æºåº“ã€‚è¿™äº›é¡¹ç›®çš„é¡ºåºå®Œå…¨éšæœºï¼Œæ¯ä¸ªéƒ½æ£’åˆ°çˆ†ã€‚ç»å¤§å¤šæ•°æ”¯æŒCocoaPodsï¼Œæ‰€ä»¥å°†å®ƒä»¬æ·»åŠ åˆ°ä½ çš„Xcodeé¡¹ç›®ä¸­åªæ˜¯å°äº‹ä¸€æ¡©ã€‚</p>

<p>åœ¨æœ¬æ–‡æœ«å°¾ä½ å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªé•¿æ–‡æ…å…¥ç‰ˆæœ¬â€”â€”ä¸€ä¸ªåªåŒ…å«é¢˜ç›®ä¸é¡¹ç›®é“¾æ¥çš„ç®€å•åˆ—è¡¨ã€‚å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨çš„è¯ï¼Œè¯·æŠŠå®ƒåˆ†äº«ç»™å…¶ä»–åšiOSå¼€å‘çš„å°ä¼™ä¼´ä»¬ï¼Œå¥½é…’ä¹Ÿæ€•å··å­æ·±ã€‚</p>

<h3>1. <a href="https://github.com/dzenbot/DZNEmptyDataSet" target="_blank" title=â€œDZNEmptyDataSetâ€>DZNEmptyDataSet</a></h3>

<p>DZNEmptyDataSetç®—æ˜¯ä¸€ä¸ªå¾ˆæ ‡å‡†çš„iOSå†…å»ºæ–¹å¼ï¼Œé€‚åˆç”¨æ¥å¤„ç†ç©ºçš„table viewå’Œcollection viewã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœä½ çš„table viewä¸ºç©ºï¼Œå±å¹•å°±ä¸ºç©ºï¼Œè¿™æ ·ä¸€æ¥ç”¨æˆ·ä½“éªŒå¹¶ä¸ç†æƒ³ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55adfe02a4a2f_middle.jpg" alt="1" /></p>

<p>ä½¿ç”¨è¿™ä¸ªåº“ï¼Œä½ åªéœ€éµå®ˆä¸€äº›åè®®ï¼ŒiOSå°±ä¼šè‡ªåŠ¨å°†collection viewå¤„ç†å®Œå–„ï¼Œå¹¶å°†ç”¨æˆ·æ¶ˆæ¯ä»¥åˆé€‚ç¾è§‚çš„æ–¹å¼æ˜¾ç¤ºå‡ºæ¥ã€‚æ¯ä¸ªiOSé¡¹ç›®éƒ½å¯ä»¥è‡ªåŠ¨å¤„ç†ï¼Œä¸ç”¨å†ä¸€ä¸€è´¹ç¥ã€‚</p>

<h3>2. <a href="https://github.com/jivesoftware/PDTSimpleCalendar" target="_blank" title=â€œPDTSimpleCalendarâ€>PDTSimpleCalendar</a></h3>

<p>ä½ çš„åº”ç”¨éœ€è¦ä¸€ä¸ªç®€å•ç¾è§‚ä¸”æ­£å¸¸è¿è¡Œçš„æ—¥å†ç»„ä»¶å—ï¼Ÿç°åœ¨æœ‰äº†â€”â€”PDTSimpleCalendarä¹Ÿè®¸å¯ä»¥ç®—æ˜¯iOSæœ€æ£’çš„æ—¥å†ç»„ä»¶äº†ã€‚ä½ å¯ä»¥åœ¨å„ä¸ªæ–¹é¢å¯¹å®ƒè¿›è¡Œå®šåˆ¶ï¼Œæ— è®ºæ˜¯è¿è¡Œé€»è¾‘è¿˜æ˜¯å¤–è§‚æ–¹é¢ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55adff269e028_middle.jpg" alt="2" /></p>

<h3>3. <a href="https://github.com/magicalpanda/MagicalRecord" target="_blank" title=â€œMagicalRecordâ€>MagicalRecord</a></h3>

<p>ä»–ä»¬éƒ½è¯´ï¼šCore Dataç®€æ´æ˜“ç”¨ã€‚ä»–ä»¬åˆè¯´ï¼šå¾ˆæ£’å¾ˆå¥½ç”¨å™¢ã€‚å“ˆï¼ŸçœŸçš„å—ï¼Œè‹¹æœï¼Ÿæ·»åŠ åˆ°å„ä¸ªé¡¹ç›®ä¸­çš„å¤§é‡æ ·æ¿æ•°æ®å®Œå…¨ä¸ç¬¦åˆç®€æ´è€Œæ˜“ç”¨çš„æ ‡å‡†ã€‚æ›´åˆ«ææ·»åŠ ã€ç§»é™¤å’Œæ›´æ–°é‚£ä¸€å¤§å †çš„entitiesã€ä¿å­˜contextã€æŒ‰ä¸åŒç¯å¢ƒåˆ›å»ºä¸åŒçš„Core Dataå †æ ˆç­‰ç­‰ã€‚å½“ç„¶ï¼Œæˆ‘å¾ˆå–œæ¬¢Core Dataï¼Œä½†æ˜¯è‹¹æœçœŸçš„å¯ä»¥æŠŠå®ƒæ›´å¥½åœ°ç®€åŒ–ä¸€ä¸‹â€”â€”ä½¿ç”¨MagicalRecordæ–¹å¼ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0130e5bb0_middle.jpg" alt="3" /></p>

<p>MagicalRecordå°±åƒæ˜¯ç»™Core Dataæä¾›äº†ä¸€å±‚å¤–åŒ…è£…ï¼Œéšè—æ‰æ‰€æœ‰ä¸ç›¸å…³çš„ä¸œè¥¿ã€‚å¦‚æœä½ æ›¾ç»ä½¿ç”¨è¿‡active recordæ¨¡å¼ï¼ˆæ¯”å¦‚Ruby on Railsï¼‰ï¼Œä½ å°±çŸ¥é“äº†ã€‚å€¾æƒ…æ¨èï¼Œåœ¨åº”ç”¨ä¸­ä½¿ç”¨Core Dataçš„ç«¥é‹ä»¬å¯ä¸€å®šè¦è¯•è¯•ã€‚</p>

<h3>4. <a href="https://github.com/ViccAlexander/Chameleon" target="_blank" title=â€œChameleonâ€>Chameleon</a></h3>

<p>å¦‚æœä½ å·²ç»çœ‹åˆ°è¿™é‡Œäº†ï¼Œæˆ‘çŒœä½ æ›´æœ‰å¯èƒ½æ˜¯ä¸ªç¨‹åºçŒ¿ï¼Œè€Œä¸æ˜¯è®¾è®¡ç‹®ã€‚è¿™é‡Œæœ‰ä¸ªä¸œä¸œå¾ˆé€‚åˆä½ ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae02035ca71_middle.jpg" alt="4" /></p>

<p>Chameleonæ˜¯ä¸€ä¸ªiOSçš„è‰²å½©æ¡†æ¶ã€‚å®ƒè¿ç”¨ç°ä»£åŒ–flat colorå°†UIColoræ‰©å±•åœ°éå¸¸ç¾è§‚ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å®ƒè¿ç”¨è‡ªå®šä¹‰é¢œè‰²åˆ›å»ºè°ƒè‰²æ¿ã€‚å®ƒè¿˜æœ‰å¾ˆå¤šåŠŸç”¨ï¼Œè¯·æµè§ˆreadmeã€‚å¦‚æœä½ æƒ³è¦åº”ç”¨ç¾è§‚çš„è¯ï¼Œä¸€å®šè¦æŠŠè¿™ä¸ªåº“åŠ åˆ°é¡¹ç›®é‡Œã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0212f22c6_middle.jpg" alt="4-1" /></p>

<h3>5. <a href="https://github.com/Alamofire/Alamofire" target="_blank" title=â€œAlamofireâ€>Alamofire</a></h3>

<p>Alamofireæ˜¯ä¸€ä¸ªç®€æ´çš„ç½‘ç»œåº“ï¼Œç”¨Swiftè¯­è¨€ç¼–å†™ã€‚ä½ æ˜¯å¦æ›¾ç»ä½¿ç”¨è¿‡AFNetworkingå‘¢ï¼ŸAlamofireæ˜¯å®ƒçš„å°å¼Ÿã€‚æ›´å¹´è½»æ›´æ—¶å°šï¼Œå½“ç„¶ï¼ˆAFNetworkingæ˜¯ç”¨Objective-Cç¼–å†™çš„ï¼‰ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae024c07d47_middle.jpg" alt="5" /></p>

<p>å¦‚æœä½ éœ€è¦è¿›è¡Œç½‘ç»œçš„ç›¸å…³å·¥ä½œï¼Œè¯¸å¦‚ä¸‹è½½ã€ä¸Šä¼ ä¸è·å–JSONsç­‰ç­‰çš„è¯ï¼ŒAlamofireæ­£æ˜¯ä½ æ‰€éœ€è¦çš„ã€‚GitHubä¸Š8000äººæ¬¡æ¨èï¼Œä¸€å®šä¸ä¼šé”™ã€‚</p>

<h3>6. <a href="https://github.com/raulriera/TextFieldEffects" target="_blank" title=â€œTextFieldEffectsâ€>TextFieldEffects</a></h3>

<p>ä½ ä¸è§‰å¾—æ ‡å‡†çš„UITextFieldæœ‰äº›æ¯ç‡¥ä¹ˆï¼Ÿæˆ‘ä¹Ÿè¿™æ ·æƒ³â€”â€”æ¥è®¤è¯†ä¸€ä¸‹TextFieldEffectså§ï¼åºŸè¯ä¸å¤šè¯´ï¼Œåªè¦çœ‹å‡ ä¸ªä¾‹å­ï¼š</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae048484702.jpg" alt="6" /></p>

<p>æ˜¯å•Šï¼Œéƒ½æ˜¯äº›ç®€å•çš„dropinæ§åˆ¶å™¨ã€‚ä½ ç”šè‡³å¯ä»¥åœ¨storyboardä¸­ä½¿ç”¨IBDesignablesã€‚</p>

<p>ä¸å¹¸åœ°æ˜¯ï¼šè¿™ä¸ªåº“ä¸æ”¯æŒCocoaPodsï¼ˆå¦‚æœä½ æ¥è‡ªæœªæ¥ï¼Œè€Œè¿™ä¸€æƒ…å†µä»€ä¹ˆæ—¶å€™ä¼šæ”¹å˜çš„è¯ï¼Œä¸€å®šè¦åœ¨Twitterä¸Šå‘Šè¯‰æˆ‘ï¼‰ï¼Œä½†æ˜¯å®ƒæ”¯æŒCarthageã€‚ä½ åªç®¡ä»GitHubä¸Šä¸‹è½½é¡¹ç›®ï¼ŒæŠŠå®ƒæ”¾å…¥ä½ çš„workspaceå°±è¡Œäº†ã€‚</p>

<h3>7. <a href="https://github.com/BradLarson/GPUImage" target="_blank" title=â€œGPUImageâ€>GPUImage</a></h3>

<p>ä½ æ›¾ç»å†™è¿‡ç…§ç›¸æœºåº”ç”¨å—ï¼Ÿå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå¾ˆå¿«ä½ ä¸€å®šä¼šé‡åˆ°è¿™ä¸ªåº“çš„ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae04fe94fc8.jpg" alt="7" /></p>

<p>GPUImageä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªGPUåŠ é€Ÿçš„ç…§ç›¸æœºæ•ˆæœï¼ˆåŒæ—¶æ”¯æŒç…§ç‰‡ä¸è§†é¢‘ï¼‰ï¼Œè€Œä¸”å¤„ç†é€Ÿåº¦é£å¿«ã€‚åœ¨App Storeä¸­ï¼Œä½¿ç”¨è¿™ä¸ªåº“çš„åº”ç”¨æ•°ä»¥ç™¾è®¡ã€‚æˆ‘æœ‰ä¸€ä¸ªåº”ç”¨ä¹Ÿç”¨åˆ°äº†GPUImageã€‚ å®ƒåœ¨GitHubä¸Šè·å¾—äº†8869ä¸ªstarï¼Œè€Œä¸”è¿˜åœ¨å¢é•¿ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae053f548d5_middle.jpg" alt="7-1" /></p>

<h3>8. <a href="https://github.com/nicklockwood/iRate" target="_blank" title=â€œiRateâ€>iRate</a></h3>

<p>æƒ³è¦åœ¨App Storeä¸­è·å¾—æ›´å¤šè¯„è®ºçš„æœ€ä½³æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿæƒ³è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ç¼ºä¹åˆ‡å®æ•°æ®ï¼Œä½†å¦‚æœå¿…é¡»çŒœä¸€ä¸‹çš„è¯ï¼Œæˆ‘ä¼šå»ºè®®é—®é—®ç”¨æˆ·ã€‚ä¹Ÿè®¸è¿™æ ·åšæœ‰ç‚¹è€å¥—â€”â€”å¤§å¤šå¼€å‘è€…ç°åœ¨éƒ½æœ‰åˆ›å»ºå®šåˆ¶çš„åº”ç”¨å†…ç½®alertã€‚</p>

<p>ä½†æ˜¯å¦‚æœä½ æ²¡æœ‰æ—¶é—´ï¼Œæˆ–è€…ä¸æƒ³ä»å¤´å®ç°çš„è¯ï¼Œæœ€å¥½ç”¨ä¸€ä¸‹iRataã€‚è¿™ä¸ªå°±æ˜¯iRataâ€”â€”ä¸€ä¸ªå°å‹åº“â€”â€”ä½ å¯ä»¥æŠŠå®ƒæ”¾å…¥é¡¹ç›®ä¸­ï¼ŒæŠŠé—®å·è°ƒæŸ¥ä»€ä¹ˆçš„éƒ½å¿˜è®°å§ï¼ŒiRateä¼šåœ¨æ°å½“çš„æ—¶å€™ä¸ºä½ è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>

<h3>9. <a href="https://github.com/nihalahmed/GameCenterManager" target="_blank" title=â€œGameCenterManagerâ€>GameCenterManager</a></h3>

<p>æ— è®ºä½ å–œä¸å–œæ¬¢å•ä¾‹æ¨¡å¼ï¼Œç®¡ç†ä¸€ä¸ªGameCenteréƒ½æ¯”æˆ‘ä»¬å·²çŸ¥çš„å…¶ä»–ç›¸åæ¨¡å¼è¦å¥½å¾ˆå¤šã€‚ï¼ˆä½ çš„æ¸¸æˆåªæœ‰ä¸€ä¸ªGameCenterï¼Œå¯¹å—ï¼Ÿï¼‰</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae05bd3f99e_middle.jpg" alt="9" /></p>

<p>è¯´å®è¯ï¼Œåœ¨iOSä¸Šç®¡ç†GameCenter vanillaå¹¶ä¸ç®—éš¾ï¼Œä½†æ˜¯æœ‰äº†è¿™ä¸ªåº“ä¼šæ›´ç®€å•ä¹Ÿæ›´å¿«ã€‚å¥½ä¸ŠåŠ å¥½ä¸æ˜¯æ›´å¥½ä¹ˆã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae05c9cba37_middle.jpg" alt="9-1" /></p>

<p>æˆ‘åœ¨æˆ‘ä¸€ä¸ªæ¸¸æˆä¸­ç”¨åˆ°äº†è¿™ä¸ªï¼Œä½“éªŒå¾ˆå¥½ã€‚</p>

<h3>10. <a href="https://github.com/pkluz/PKRevealController" target="_blank" title=â€œPKRevealController 2â€>PKRevealController 2</a></h3>

<p>è¿™ä¸ªè¦æ³¨æ„ï¼ŒçœŸçš„å¾ˆæ£’ï¼æ˜¯æˆ‘æœ€å–œçˆ±çš„iOSæ§ä»¶ä¹‹ä¸€ã€‚PKRevealControlleræ˜¯ä¸€ä¸ªå¯ä»¥æ»‘åŠ¨çš„ä¾§è¾¹æ èœå•ï¼ˆå¯å‘å·¦ã€å‘å³æˆ–è€…åŒæ—¶å‘ä¸¤ä¾§ï¼‰ï¼Œåªéœ€æ‰‹æŒ‡è½»è½»ä¸€ç‚¹ï¼ˆæˆ–è€…æŒ‰ä¸€ä¸‹æŒ‰é’®ï¼Œä½†æ˜¯è¿™æ ·æ»‘åŠ¨æ—¶ä¸å¤Ÿç‚«é…·ï¼‰ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae067bd3b6b.jpg" alt="2" /></p>

<p>æˆ‘è¯•è¿‡ä¸€äº›å¯ä»¥æä¾›è¿™ç±»æ§åˆ¶çš„å…¶ä»–åº“ï¼Œè€ŒPKRevealControlleræ˜¯æœ€æ£’çš„ã€‚å®‰è£…ç®€ä¾¿ï¼Œé«˜åº¦å®šåˆ¶ä¸”å¯¹æ‰‹åŠ¿è¯†åˆ«è‰¯å¥½ã€‚å¯ä»¥å½“åšä¸€ä¸ªæ ‡å‡†æ§ä»¶ç”¨åœ¨iOS SDKä¸­ã€‚</p>

<h3>11. <a href="https://github.com/slackhq/SlackTextViewController" target="_blank" title=â€œSlackTextViewControllerâ€>SlackTextViewController</a></h3>

<p>ä½ æ›¾ç»ç”¨è¿‡Slack iOSåº”ç”¨å—ï¼Ÿå¦‚æœä½ åœ¨è¾ƒå¤§çš„è½¯ä»¶å…¬å¸å·¥ä½œï¼Œä¹Ÿè®¸ä¼šç”¨è¿‡ã€‚å¯¹é‚£äº›æ²¡ç”¨è¿‡çš„äººå‘¢ï¼Ÿâ€”?Slackä»¤äººæ¿€åŠ¨ã€‚ç”¨åˆ°Slackçš„åº”ç”¨ä¹Ÿæ˜¯è¿™æ ·ï¼Œå°¤å…¶æ˜¯ç”¨ä½œæä½³ã€å®šåˆ¶çš„æ–‡æœ¬è¾“å…¥æ§åˆ¶æ—¶ã€‚è¿™æ—¶ä½ æœ‰äº†ä¸€ä¸ªç°æˆå¯ç”¨åœ¨åº”ç”¨ä¸­çš„ä»£ç ã€‚</p>

<p>è‡ªé€‚åº”æ–‡æœ¬åŒºåŸŸï¼Ÿè¯•ä¸€ä¸‹ã€‚</p>

<p>æ‰‹åŠ¿è¯†åˆ«ã€è‡ªåŠ¨å¡«å……ã€å¤šåª’ä½“åˆå¹¶ï¼Ÿè¯•ä¸€ä¸‹ã€‚</p>

<p>å¿«é€Ÿdrop-inè§£å†³æ–¹æ¡ˆï¼Ÿè¯•ä¸€ä¸‹ã€‚</p>

<p>å…¶ä»–è¿˜æƒ³è¦ä»€ä¹ˆï¼Ÿ</p>

<h3>12. <a href="https://github.com/romaonthego/RETableViewManager" target="_blank" title=â€œRETableViewManagerâ€>RETableViewManager</a></h3>

<p>RETableViewManagerå¯ä»¥å¸®åŠ©ä½ è¿›è¡ŒåŠ¨æ€åˆ›å»ºä¸ç®¡ç†table viewsã€‚å®ƒç»™æˆ‘ä»¬æä¾›äº†é¢„å®šä¹‰cellsï¼ˆboolç±»å‹ã€æ–‡æœ¬ã€æ—¥æœŸç­‰ç­‰â€”â€”è¯·çœ‹ä¸‹é¢çš„æˆªå›¾ï¼‰ï¼Œä½†æ˜¯ä½ è¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰viewsï¼Œå¹¶ä¸é»˜è®¤è§†å›¾ä¸€åŒä½¿ç”¨ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0702088ab_middle.jpg" alt="12" /></p>

<p>å·¦ä¾§æˆªå›¾æ˜¾å¾—éå¸¸å¤æ¿ï¼åœ¨storyboardä¸­æ²¡æœ‰è¿™ä¸ªåº“çš„æ—¶å€™ï¼Œä½ èƒ½åšçš„å°±æ˜¯è¿™äº›äº†ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä»£ç æ¯”å¯è§†åŒ–ç¼–è¾‘å™¨è¦å¥½ã€‚</p>

<h3>13. <a href="https://github.com/nickoneill/PermissionScope" target="_blank" title=â€œPermissionScopeâ€>PermissionScope</a></h3>

<p>ç”¨è¿™ä¸ªåº“å¯ä»¥åœ¨è¯¢é—®ç”¨æˆ·å‰ï¼Œå°±å‘ŠçŸ¥ç”¨æˆ·æ‰€éœ€çš„ç³»ç»Ÿæƒé™ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½“éªŒã€‚æ¥å—åº¦æ›´é«˜â€”>æ›´å¤šæ´»è·ƒç”¨æˆ·->æ›´é«˜çš„ç•™å­˜ç‡->æ•°æ®æ›´å¥½->ä¸‹è½½ç‡æ›´é«˜ã€‚å¢™è£‚æ¨èpodã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0733b6110_middle.jpg" alt="13" /></p>

<h3>14. <a href="https://github.com/TransitApp/SVProgressHUD" target="_blank" title=â€œSVProgressHUDâ€>SVProgressHUD</a></h3>

<p>è¿™å¼ å›¾ç‰‡åœ¨æ­£å¸¸åŠ è½½ï¼Œæ— éœ€ç­‰å¾…å¤ªä¹…æˆ–è€…åˆ·æ–°é¡µé¢ã€‚è¿™æ­£æ˜¯SVProgressHUDåœ¨ä½ çš„åº”ç”¨ä¸­çš„è¡¨ç°ã€‚å¦‚æœä½ éœ€è¦å®šåˆ¶åŒ–çš„ç­‰å¾…æç¤ºå™¨ï¼Œè¿™ä¸ªå°±æ˜¯äº†ï¼ˆä¹Ÿè®¸æ˜¯æœ€å¥½çš„ï¼‰ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae077d15432.jpg" alt="14" /></p>

<h3>15. <a href="https://github.com/PrideChung/FontAwesomeKit" target="_blank" title=â€œFontAwesomeKitâ€>FontAwesomeKit</a></h3>

<p>Font Awesomeå¾ˆæ£’ï¼Œæœ‰äº†å®ƒä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°ç»™é¡¹ç›®åŠ å­—ä½“ï¼Œä½¿ç”¨æ–¹å¼ç¹å¤šã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae07a34b492_middle.jpg" alt="15" /></p>

<h3>16. <a href="https://github.com/SnapKit/SnapKit" target="_blank" title=â€œSnapKitâ€>SnapKit</a></h3>

<p>å–œæ¬¢è‡ªåŠ¨å¸ƒå±€å—ï¼Ÿå½“ç„¶å–œæ¬¢ï¼è‡³å°‘åœ¨storyboardä¸­åˆ›å»ºæ—¶ä¼šå–œæ¬¢ã€‚ åœ¨ä»£ç ä¸­çº¯æ‰‹å·¥åˆ›å»ºçº¦æŸç°å¸¸ç—›è‹¦ï¼Œä½†å¹¸è¿çš„æ˜¯æˆ‘ä»¬æœ‰äº†SnapKitï¼Œåœ¨boardä¸­ç”¨ä¸Šå®ƒï¼Œä½ å¯ä»¥ç®€å•ç›´è§‚åœ°ç¼–å†™çº¦æŸäº†ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae07ebf3c2c_middle.jpg" alt="16" /></p>

<h3>17. <a href="https://github.com/MortimerGoro/MGSwipeTableCell" target="_blank" title=â€œMGSwipeTableCellâ€>MGSwipeTableCell</a></h3>

<p>è¿™æ˜¯å¦ä¸€ä¸ªå¸¸è§äºå¾ˆå¤šåº”ç”¨ä¸­çš„UIç»„ä»¶ï¼Œè‹¹æœåº”è¯¥è€ƒè™‘åœ¨æ ‡å‡†çš„iOS SDKä¸­åŠ å…¥ä¸€äº›ç±»ä¼¼çš„å†…å®¹ã€‚Swipeableè¡¨æ ¼cellæ˜¯è¿™ä¸ªpodçš„æœ€ä½³æè¿°ï¼Œä¹Ÿæ˜¯æœ€å¥½çš„ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0953304a9.jpg" alt="17" /></p>

<p>è¿™åªæ˜¯å…¶ä¸­ä¸‰ä¸ªåŠ¨ç”»ç±»å‹ï¼Œè¿˜æœ‰æ›´å¤šå˜åŒ–ï¼Œè¯·æŸ¥çœ‹readmeã€‚</p>

<h3>18. <a href="https://github.com/Quick/Quick" target="_blank" title=â€œQuickâ€>Quick</a></h3>

<p>ç”¨äºSwiftä¸­çš„å•å…ƒæµ‹è¯•ï¼ˆä¹Ÿå¯ç”¨äºObjective-Cï¼‰ï¼Œä¸Xcodeæ•´åˆåœ¨ä¸€èµ·ã€‚å¦‚æœä½ æ˜¯Objective-Cçš„ç²‰ä¸ï¼Œæˆ‘å»ºè®®ç”¨Spectaä»£æ›¿è¿™ä¸ªï¼Œä½†æ˜¯å¯¹Swiftä½¿ç”¨è€…æ¥è¯´ï¼ŒQuickæ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0a6012068_middle.jpg" alt="18" /></p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0a767198e_middle.jpg" alt="181" /></p>

<h3>19. <a href="https://github.com/saturngod/IAPHelper" target="_blank" title=â€œIAPHelperâ€>IAPHelper</a></h3>

<p>åº”ç”¨å†…ä»˜è´¹ç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ ·æœ¬ä»£ç ï¼Œè€Œè¿™ä¸ªåº“ä¸¢æ‰äº†é‚£äº›ä»£ç ï¼Œå°†é‡‘é’±äº¤æ˜“ç›¸å…³çš„å¤§å¤šé€šç”¨ä»»åŠ¡åšäº†ç®€å•çš„å°è£…ã€‚</p>

<h3>20. <a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" title=â€œReactiveCocoaâ€>ReactiveCocoa</a></h3>

<p>å¥½å§ï¼Œè¿™æ˜¯ä¸ªå°æ€ªç‰©ã€‚</p>

<p>ReactiveCocoaå¹¶ä¸åƒåˆ—è¡¨ä¸­å…¶ä»–åº“ä¸€æ ·ï¼Œå®ƒä¸æ˜¯å°å‹çš„drop-iné¡¹ç›®ã€‚ReactiveCocoaç»™æˆ‘ä»¬å¸¦æ¥äº†ä¸€ä¸ªè¿¥å¼‚çš„ç¼–ç¨‹é£æ ¼ä¸ç»“æ„ï¼Œå®ƒæ˜¯åŸºäºä¿¡å·ä¸æ•°æ®æµçš„ã€‚é¦–å…ˆä½ éœ€è¦å¿˜æ‰å·²çŸ¥çš„ä¸€åˆ‡ï¼Œæ‰èƒ½ç†è§£å®ƒçš„å·¥ä½œæ–¹å¼ã€‚å¾ˆæœ‰éš¾åº¦ï¼Œä½†æ˜¯ä»·å€¼ä¸æ–ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0acf1f0dc_middle.jpg" alt="20" /></p>

<p>åœ¨è¿™é‡Œæ•™ReactiveCocoaæœ‰ç‚¹ä¸åˆé€‚ï¼Œä½†æ˜¯å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯ï¼Œæˆ‘ä¼šæä¾›ä¸€äº›å¥½æºï¼š</p>

<ul>
<li><a href="http://www.teehanlax.com/blog/getting-started-with-reactivecocoa/" target="_blank" title=â€œGetting Started with ReactiveCocoaâ€>Getting Started with ReactiveCocoa</a></li>
<li><a href="http://nshipster.com/reactivecocoa/" target="_blank" title=â€œMattt Thompsonï¼šReactiveâ€‹Cocoaâ€>Mattt Thompsonï¼šReactiveâ€‹Cocoa</a></li>
<li><a href="http://www.raywenderlich.com/62699/reactivecocoa-tutorial-pt1" target="_blank" title=â€œReactiveCocoa Tutorial â€“ The Definitive Introduction: Part 1/2â€>ReactiveCocoa Tutorial â€“ The Definitive Introduction: Part &frac12;</a></li>
</ul>


<p>æ³¨æ„ï¼šå¯¹æˆ‘ä»¬iOSå¼€å‘ç¤¾åŒºçš„æœ‹å‹æ¥è¯´ï¼Œè¿™ä¼šæ˜¯ä¸€ä¸ªç¨å¾®æœ‰äº›æŠ€æœ¯å«é‡çš„æ´»å„¿ã€‚</p>

<h3>21. <a href="https://github.com/SwiftyJSON/SwiftyJSON" target="_blank" title=â€œSwiftyJSONâ€>SwiftyJSON</a></h3>

<p>ä½¿Swiftçš„JSONè§£æå˜å¾—ç®€å•ã€‚</p>

<h3>22. <a href="https://github.com/MengTo/Spring" target="_blank" title=â€œSpringâ€>Spring</a></h3>

<p>ä½¿åŠ¨ç”»åœ¨ç®€å•æ€§ã€å¯é“¾æ¥æ€§ä¸å£°æ˜æ€§æ–¹é¢æœ‰æ‰€æé«˜ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0dfe58b6c_middle.jpg" alt="22" /></p>

<h3>23. <a href="https://github.com/ArtSabintsev/FontBlaster" target="_blank" title=â€œFontBlasterâ€>FontBlaster</a></h3>

<p>è½½å…¥å®šåˆ¶å­—ä½“æ—¶æ›´ç®€å•ã€‚</p>

<h3>24. <a href="https://github.com/JanC/TAPromotee" target="_blank" title=â€œTAPromoteeâ€>TAPromotee</a></h3>

<p>äº¤å‰æ¨å¹¿åº”ç”¨æ˜¯ä½ å¯ä»¥å…è´¹å®ç°çš„æœ€ä½³å¸‚åœºæ¨å¹¿ç­–ç•¥ä¹‹ä¸€ã€‚ä½¿ç”¨è¿™ä¸ªåº“åšèµ·æ¥éå¸¸ç®€å•ï¼Œä¸ç”¨éƒ½ä¸å¯èƒ½â€”â€”å°†TAPromoteeåŠ å…¥ä½ çš„podfileä¸­ï¼Œå…è´¹é…ç½®ä¸äº«å—æ›´å¤šä¸‹è½½å§ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0e81d6464_middle.jpg" alt="24" /></p>

<h3>25. <a href="https://github.com/contentful-labs/Concorde" target="_blank" title=â€œConcordeâ€>Concorde</a></h3>

<p>ä½ åœ¨åº”ç”¨ä¸­è½½å…¥äº†ä¸€å †jpegå—ï¼Ÿæœ‰äº†Concordeï¼Œä½ å¯ä»¥ç”¨æ›´å¥½çš„æ–¹å¼æ¥è§£å†³ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„è¿›æ­¥ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae11e47390e.jpg" alt="25" /></p>

<h3>26. <a href="https://github.com/kishikawakatsumi/KeychainAccess" target="_blank" title=â€œKeychainAccessâ€>KeychainAccess</a></h3>

<p>ç®¡ç†Keychainæ¥å…¥çš„å°åŠ©æ‰‹ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0f198a4dc_middle.jpg" alt="26" /></p>

<h3>27. <a href="https://github.com/danielgindi/ios-charts" target="_blank" title=â€œiOS-chartsâ€>iOS-charts</a></h3>

<p>æœ€åä¸€ä¸ªï¼Œä½†ç»ä¸æ˜¯æœ€ä¸é‡è¦çš„â€”â€”iOSå›¾è¡¨åº“ï¼éå¸¸æœ‰ç”¨è€Œä¸”ç¾è§‚ï¼Œè¿™é‡Œæˆ‘æ— éœ€èµ˜è¨€ã€‚å‘ä¸‹çœ‹ï¼Œä½ å°±çŸ¥é“ç”¨å®ƒå¯ä»¥åšä»€ä¹ˆäº†ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0f6715aec_middle.jpg" alt="27" /></p>

<p>æ²¡é”™ï¼Œä¸€åˆ‡éƒ½å˜æˆäº†drop-inç»„ä»¶äº†ï¼ˆä¹Ÿè®¸æ˜¯â€œcode-inç»„ä»¶ï¼‰ã€‚</p>

<p><img src="http://img.ptcms.csdn.net/article/201507/21/55ae0f7ec6743_middle.jpg" alt="271" /></p>

<p>ä¸å¹¸çš„æ˜¯ï¼Œå®ƒè¿˜ä¸æ”¯æŒCocoaPodsï¼Œæ‰€ä»¥ä½ å¾—æ‰‹åŠ¨æŠŠå®ƒæ‹½åˆ°ä½ çš„Xcode workspaceé‡Œé¢å»ã€‚</p>

<p>è¶…é•¿æ…å…¥åˆ—è¡¨ï¼š</p>

<ol>
<li><a href="https://github.com/dzenbot/DZNEmptyDataSet" target="_blank" title=â€œDZNEmptyDataSetâ€>DZNEmptyDataSet</a>ï¼ˆUIï¼Œç©ºè¡¨æ ¼è§†å›¾è§£ç®—å™¨ï¼‰</li>
<li><a href="https://github.com/jivesoftware/PDTSimpleCalendar" target="_blank" title=â€œPDTSimpleCalendarâ€>PDTSimpleCalendar</a>ï¼ˆUIï¼Œdrop-inæ—¥å†ç»„ä»¶ï¼‰</li>
<li><a href="https://github.com/magicalpanda/MagicalRecord" target="_blank" title=â€œMagicalRecordâ€>MagicalRecord</a>ï¼ˆå®æ–½æ´»è·ƒè®°å½•æ¨¡å¼çš„Core DataåŠ©æ‰‹ï¼‰</li>
<li><a href="https://github.com/ViccAlexander/Chameleon" target="_blank" title=â€œChameleonâ€>Chameleon</a>ï¼ˆUIï¼Œè‰²å½©æ¡†æ¶ï¼‰</li>
<li><a href="https://github.com/Alamofire/Alamofire" target="_blank" title=â€œAlamofireâ€>Alamofire</a>ï¼ˆSwift ç½‘ç»œï¼‰</li>
<li><a href="https://github.com/raulriera/TextFieldEffects" target="_blank" title=â€œTextFieldEffectsâ€>TextFieldEffects</a> ï¼ˆUIï¼Œè‡ªå®šä¹‰å¤–è§‚çš„æ–‡æœ¬åŒºåŸŸï¼‰</li>
<li><a href="https://github.com/BradLarson/GPUImage" target="_blank" title=â€œGPUImageâ€>GPUImage</a>ï¼ˆå¿«é€Ÿå›¾ç‰‡å¤„ç†ï¼‰</li>
<li><a href="https://github.com/nicklockwood/iRate" target="_blank" title=â€œiRateâ€>iRate</a>ï¼ˆè·å–ç”¨æˆ·è¯„ä»·ï¼‰</li>
<li><a href="https://github.com/nihalahmed/GameCenterManager" target="_blank" title=â€œGameCenterManagerâ€>GameCenterManager</a>ï¼ˆå¿«é€Ÿç®¡ç†æ¸¸æˆä¸­å¿ƒï¼‰</li>
<li><a href="https://github.com/pkluz/PKRevealController" target="_blank" title=â€œPKRevealController 2â€>PKRevealController 2</a>ï¼ˆUIï¼Œæ»‘åŠ¨ä¾§è¾¹æ èœå•ï¼‰</li>
<li><a href="https://github.com/slackhq/SlackTextViewController" target="_blank" title=â€œSlackTextViewControllerâ€>SlackTextViewController</a>ï¼ˆUIï¼Œé«˜åº¦å¯å®šåˆ¶çš„è‡ªå®šä¹‰æ–‡æœ¬åŒºåŸŸï¼‰</li>
<li><a href="https://github.com/romaonthego/RETableViewManager" target="_blank" title=â€œRETableViewManagerâ€>RETableViewManager</a>ï¼ˆè‡ªåŠ¨ä»¥ä»£ç åˆ›å»ºè¡¨æ ¼è§†å›¾ï¼‰</li>
<li><a href="https://github.com/nickoneill/PermissionScope" target="_blank" title=â€œPermissionScopeâ€>PermissionScope</a>ï¼ˆUIï¼Œé¢„è¯¢é—®ç”¨æˆ·ç³»ç»Ÿæƒé™çš„å‹å¥½ä½“éªŒï¼‰</li>
<li><a href="https://github.com/TransitApp/SVProgressHUD" target="_blank" title=â€œSVProgressHUDâ€>SVProgressHUD</a> ï¼ˆUIï¼Œè‡ªå®šä¹‰ç­‰å¾…è¿›åº¦æ¡ï¼‰</li>
<li><a href="https://github.com/PrideChung/FontAwesomeKit" target="_blank" title=â€œFontAwesomeKitâ€>FontAwesomeKit</a> ï¼ˆå¿«é€Ÿæ·»åŠ Awesomeå­—ä½“ï¼‰</li>
<li><a href="https://github.com/SnapKit/SnapKit" target="_blank" title=â€œSnapKitâ€>SnapKit</a>ï¼ˆåœ¨ä»£ç ä¸­å¿«é€Ÿè‡ªåŠ¨å¸ƒå±€ï¼‰</li>
<li><a href="https://github.com/MortimerGoro/MGSwipeTableCell" target="_blank" title=â€œMGSwipeTableCellâ€>MGSwipeTableCell</a> ï¼ˆUIï¼Œå¯æ»‘åŠ¨çš„è¡¨æ ¼è§†å›¾cellï¼‰</li>
<li><a href="https://github.com/Quick/Quick" target="_blank" title=â€œQuickâ€>Quick</a>ï¼ˆSwiftå•å…ƒæµ‹è¯•æ¡†æ¶ï¼‰</li>
<li><a href="https://github.com/saturngod/IAPHelper" target="_blank" title=â€œIAPHelperâ€>IAPHelper</a>ï¼ˆåº”ç”¨å†…è´­ä¹°åŠ©æ‰‹å°è£…ï¼‰</li>
<li><a href="https://github.com/ReactiveCocoa/ReactiveCocoa" target="_blank" title=â€œReactiveCocoaâ€>ReactiveCocoa</a>ï¼ˆFRPæ¡†æ¶ï¼‰</li>
<li><a href="https://github.com/SwiftyJSON/SwiftyJSON" target="_blank" title=â€œSwiftyJSONâ€>SwiftyJSON</a>ï¼ˆSwift JSONåº“ï¼‰</li>
<li><a href="https://github.com/MengTo/Spring" target="_blank" title=â€œSpringâ€>Spring</a>ï¼ˆåŠ¨ç”»æ¡†æ¶ï¼‰</li>
<li><a href="https://github.com/ArtSabintsev/FontBlaster" target="_blank" title=â€œFontBlasterâ€>FontBlaster</a>ï¼ˆåœ¨åº”ç”¨ä¸­å¿«é€Ÿè½½å…¥ä¸ªæ€§åŒ–å­—ä½“ï¼‰</li>
<li><a href="https://github.com/JanC/TAPromotee" target="_blank" title=â€œTAPromoteeâ€>TAPromotee</a>ï¼ˆä½¿ç”¨drop-inè§†å›¾äº¤å‰æ¨å¹¿åº”ç”¨ï¼‰</li>
<li><a href="https://github.com/contentful-labs/Concorde" target="_blank" title=â€œConcordeâ€>Concorde</a>ï¼ˆä¸‹è½½è§£ç æ¸è¿›å¼jpegï¼‰</li>
<li><a href="https://github.com/kishikawakatsumi/KeychainAccess" target="_blank" title=â€œKeychainAccessâ€>KeychainAccess</a>ï¼ˆç®€ä¾¿ç®¡ç†keychainï¼‰</li>
<li><a href="https://github.com/danielgindi/ios-charts" target="_blank" title=â€œiOS-chartsâ€>iOS-charts</a>ï¼ˆç¾è§‚çš„å›¾è¡¨åº“ï¼‰</li>
</ol>


<p>æ–‡ç« æ¥æºï¼š<a href="https://medium.com/app-coder-io/27-ios-open-source-libraries-to-skyrocket-your-development-301b67d3124c" target="_blank" title=â€œMediumâ€>Medium</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¦…ä¸Objective-Cç¼–ç¨‹è‰ºæœ¯(è¯‘)]]></title>
    <link href="http://www.superqq.com/blog/2015/07/18/ios/"/>
    <updated>2015-07-18T23:15:26+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/18/ios</id>
    <content type="html"><![CDATA[<p>ç¦…ä¸ Objective-C ç¼–ç¨‹è‰ºæœ¯ ï¼ˆZen and the Art of the Objective-C Craftsmanship ä¸­æ–‡ç¿»è¯‘ï¼‰</p>

<p>åŸæ–‡ <a href="https://github.com/objc-zen/objc-zen-book">https://github.com/objc-zen/objc-zen-book</a></p>

<p><img src="https://github.com/objc-zen/objc-zen-book/raw/master/images/zen-logo-thumb.png" alt="" /></p>

<h1>å‰è¨€</h1>

<p>æˆ‘ä»¬åœ¨ 2013 å¹´ 11 æœˆä»½å¼€å§‹å†™è¿™æœ¬ä¹¦ï¼Œæœ€åˆçš„ç›®æ ‡æ˜¯æä¾›ä¸€ä»½å¦‚ä½•ç¼–å†™å¹²å‡€æ¼‚äº®çš„ Objective-C ä»£ç çš„æŒ‡å—ï¼šç°åœ¨è™½ç„¶æœ‰å¾ˆå¤šæŒ‡å—ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯æœ‰ä¸€äº›é—®é¢˜çš„ã€‚æˆ‘ä»¬ä¸æƒ³ä»‹ç»ä¸€äº›æ­»æ¿çš„è§„å®šï¼Œæˆ‘ä»¬æƒ³æä¾›ä¸€ä¸ªåœ¨å¼€å‘è€…ä»¬ä¹‹é—´å†™æ›´ä¸€è‡´çš„ä»£ç çš„é€”å¾„ã€‚éšæ—¶é—´çš„æ¨ç§»ï¼Œè¿™æœ¬ä¹¦å¼€å§‹è½¬å‘ä»‹ç»å¦‚ä½•è®¾è®¡å’Œæ„å»ºä¼˜ç§€çš„ä»£ç ã€‚</p>

<p>è¿™æœ¬ä¹¦çš„è§‚ç‚¹æ˜¯ä»£ç ä¸ä»…æ˜¯å¯ä»¥ç¼–è¯‘çš„ï¼ŒåŒæ—¶åº”è¯¥æ˜¯ â€œæœ‰æ•ˆâ€ çš„ã€‚å¥½çš„ä»£ç æœ‰ä¸€äº›ç‰¹æ€§ï¼šç®€æ˜ï¼Œè‡ªæˆ‘è§£é‡Šï¼Œä¼˜ç§€çš„ç»„ç»‡ï¼Œè‰¯å¥½çš„æ–‡æ¡£ï¼Œè‰¯å¥½çš„å‘½åï¼Œä¼˜ç§€çš„è®¾è®¡ä»¥åŠå¯ä»¥è¢«ä¹…ç»è€ƒéªŒã€‚
æœ¬ä¹¦çš„ä¸€ä¸ªç†å¿µæ˜¯æ˜¯ä»£ç çš„æ¸…æ™°æ€§ä¼˜å…ˆäºæ€§èƒ½ï¼ŒåŒæ—¶é˜è¿°ä¸ºä»€ä¹ˆåº”è¯¥è¿™ä¹ˆåšã€‚
è™½ç„¶æ‰€æœ‰çš„ä»£ç éƒ½æ˜¯ Objective-C å†™çš„ï¼Œä½†æ˜¯ä¸€äº›ä¸»é¢˜æ˜¯é€šç”¨çš„ï¼Œå¹¶ä¸”ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€ã€‚</p>

<h2>Swift</h2>

<p>åœ¨ 2014 å¹´ 6 æœˆ 6 æ—¥ï¼Œè‹¹æœå‘å¸ƒäº†é¢å‘ iOS å’Œ Mac å¼€å‘çš„æ–°è¯­è¨€ï¼š Swiftã€‚
è¿™ä¸ªæ–°è¯­è¨€ä¸ Objective-C æˆªç„¶ä¸åŒã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æ”¹å˜äº†å†™è¿™æœ¬ä¹¦çš„è®¡åˆ’ã€‚æˆ‘ä»¬å†³å®šå‘å¸ƒè¿™æœ¬ä¹¦å½“å‰çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯ç»§ç»­ä¹¦å†™æˆ‘ä»¬åŸæ¥è®¡åˆ’å†™ä¸‹å»çš„ä¸»é¢˜ã€‚
Objective-C æ²¡æœ‰æ¶ˆå¤±ï¼Œä½†æ˜¯ç°åœ¨ç”¨ä¸€ä¸ªæ…¢æ…¢å¤±å»å…³æ³¨çš„è¯­è¨€æ¥ç»§ç»­å†™è¿™æœ¬ä¹¦å¹¶ä¸æ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ã€‚</p>

<h2>è´¡çŒ®ç»™ç¤¾åŒº</h2>

<p>æˆ‘ä»¬å°†è¿™æœ¬ä¹¦å…è´¹å‘å¸ƒå¹¶ä¸”è´¡çŒ®ç»™ç¤¾åŒºï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›æä¾›ç»™è¯»è€…ä¸€äº›æœ‰ä»·å€¼çš„å†…å®¹ã€‚å¦‚æœä½ èƒ½å­¦åˆ°è‡³å°‘ä¸€æ¡æœ€ä½³å®è·µï¼Œæˆ‘ä»¬çš„ç›®çš„å°±è¾¾åˆ°äº†ã€‚</p>

<p>æˆ‘ä»¬å·²ç»éå¸¸ç”¨å¿ƒåœ°æ‰“ç£¨äº†è¿™äº›æ–‡å­—ï¼Œä½†æ˜¯ä»ç„¶å¯èƒ½æœ‰ä¸€äº›æ‹¼å†™æˆ–è€…å…¶ä»–é”™è¯¯ã€‚æˆ‘ä»¬éå¸¸å¸Œæœ›è¯»è€…ç»™æˆ‘ä»¬ä¸€ä¸ªåé¦ˆæˆ–è€…å»ºè®®ï¼Œä»¥æ¥æ”¹å–„æœ¬ä¹¦ã€‚æ‰€ä»¥å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œè¯·è”ç³»æˆ‘ä»¬ã€‚æˆ‘ä»¬éå¸¸æ¬¢è¿å„ç§ pull-requestã€‚</p>

<h2>ä½œè€…</h2>

<p><strong>Luca Bernardi</strong></p>

<ul>
<li><a href="http://lucabernardi.com">http://lucabernardi.com</a></li>
<li>@luka_bernardi</li>
<li><a href="http://github.com/lukabernardi">http://github.com/lukabernardi</a></li>
</ul>


<p><strong>Alberto De Bortoli</strong></p>

<ul>
<li><a href="http://albertodebortoli.com">http://albertodebortoli.com</a></li>
<li>@albertodebo</li>
<li><a href="http://github.com/albertodebortoli">http://github.com/albertodebortoli</a></li>
</ul>


<h2>å…³äºä¸­æ–‡ç¿»è¯‘</h2>

<p>è¯‘è€…</p>

<p><strong>æ—ç¿”å®‡</strong>
- <a href="http://linxiangyu.org">http://linxiangyu.org</a>
- <a href="&#109;&#97;&#105;&#x6c;&#x74;&#x6f;&#58;&#x6c;&#105;&#x6e;&#x78;&#x69;&#x61;&#110;&#103;&#x79;&#x75;&#x40;&#x6e;&#x75;&#x70;&#x74;&#101;&#x72;&#46;&#x6f;&#114;&#x67;">&#x6c;&#x69;&#110;&#x78;&#x69;&#97;&#110;&#x67;&#121;&#x75;&#64;&#110;&#117;&#112;&#116;&#101;&#114;&#46;&#x6f;&#x72;&#103;</a>
- <a href="http://github.com/oa414">http://github.com/oa414</a></p>

<p><strong>åºåš</strong>
- <a href="&#109;&#x61;&#x69;&#x6c;&#x74;&#x6f;&#58;&#x62;&#x6f;&#x70;&#97;&#110;&#x67;&#x40;&#115;&#111;&#x68;&#x75;&#45;&#105;&#x6e;&#99;&#x2e;&#x63;&#111;&#x6d;">&#x62;&#x6f;&#112;&#x61;&#x6e;&#x67;&#64;&#115;&#111;&#x68;&#x75;&#45;&#105;&#110;&#x63;&#46;&#x63;&#x6f;&#x6d;</a>
- <a href="https://github.com/heistings">https://github.com/heistings</a></p>

<p>ç¿»è¯‘å·²å¾—åˆ°åŸä½œè€…è®¸å¯ï¼Œå¹¶ä¸”ä¼šåœ¨æ›´åŠ å®Œå–„åç”³è¯·åˆå¹¶åˆ°åŸæ–‡ä»“åº“ã€‚</p>

<p><strong>éƒ¨åˆ†è¯‘æ–‡è¡¨è¾¾å¯èƒ½å­˜åœ¨ä¸å¦¥ä¹‹å¤„ï¼Œéå¸¸æ¬¢è¿å„ç§ä¿®è®¢å»ºè®®å’Œæ ¡é˜Ÿã€‚ è¯·ç›´æ¥ fork æœ¬ä»“åº“ï¼Œåœ¨ README.md æ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œå¹¶ç”³è¯· pull request åˆ° <a href="https://github.com/oa414/objc-zen-book-cn/">https://github.com/oa414/objc-zen-book-cn/</a>ã€‚</strong></p>

<h1>æ¡ä»¶è¯­å¥</h1>

<p>ä¸ºäº†é¿å…é”™è¯¯ï¼Œæ¡ä»¶è¯­å¥ä½“åº”è¯¥æ€»æ˜¯è¢«å¤§æ‹¬å·åŒ…å›´ï¼Œå³ä½¿å¯ä»¥ä¸è¿™æ ·åšï¼ˆæ¯”å¦‚ï¼Œæ¡ä»¶è¯­å¥ä½“åªæœ‰ä¸€è¡Œå†…å®¹ï¼‰ã€‚å¯èƒ½çš„é”™è¯¯æ˜¯ï¼šå¤šåŠ äº†ç¬¬äºŒè¡Œï¼Œå¹¶ä¸”è¯¯ä»¥ä¸ºå®ƒæ˜¯ if è¯­å¥ä½“é‡Œé¢çš„ã€‚æ­¤å¤–ï¼Œæ›´å±é™©çš„æ˜¯ï¼Œå¦‚æœæŠŠ if è¯­å¥ä½“é‡Œçš„ä¸€è¡Œæ³¨é‡Šæ‰äº†ï¼Œä¹‹åçš„ä¸€è¡Œä»£ç ä¼šæˆä¸º if è¯­å¥é‡Œçš„ä»£ç ã€‚</p>

<p><strong>æ¨è:</strong></p>

<pre><code>if (!error) {
    return success;
}
</code></pre>

<p><strong>ä¸æ¨è:</strong></p>

<pre><code>if (!error)
    return success;
</code></pre>

<p>æˆ–è€…</p>

<pre><code>if (!error) return success;
</code></pre>

<p>åœ¨ 2014å¹´2æœˆ è‹¹æœçš„ SSL/TLS å®ç°é‡Œé¢å‘ç°äº†çŸ¥åçš„ <a href="https://gotofail.com/">goto fail</a> é”™è¯¯ã€‚</p>

<p>ä»£ç åœ¨è¿™é‡Œï¼š</p>

<pre><code>    static OSStatus
    SSLVerifySignedServerKeyExchange(SSLContext *ctx, bool isRsa, SSLBuffer signedParams,
                                     uint8_t *signature, UInt16 signatureLen)
    {
      OSStatus        err;
      ...

      if ((err = SSLHashSHA1.update(&amp;hashCtx, &amp;serverRandom)) != 0)
        goto fail;
      if ((err = SSLHashSHA1.update(&amp;hashCtx, &amp;signedParams)) != 0)
        goto fail;
        goto fail;
      if ((err = SSLHashSHA1.final(&amp;hashCtx, &amp;hashOut)) != 0)
        goto fail;
      ...

    fail:
      SSLFreeBuffer(&amp;signedHashes);
      SSLFreeBuffer(&amp;hashCtx);
      return err;
    }
</code></pre>

<p>æ˜¾è€Œæ˜“è§ï¼Œè¿™é‡Œæœ‰æ²¡æœ‰æ‹¬å·åŒ…å›´çš„2è¡Œè¿ç»­çš„ <code>goto fail;</code> ã€‚æˆ‘ä»¬å½“ç„¶ä¸å¸Œæœ›å†™å‡ºä¸Šé¢çš„ä»£ç å¯¼è‡´é”™è¯¯ã€‚</p>

<p>æ­¤å¤–ï¼Œåœ¨å…¶ä»–æ¡ä»¶è¯­å¥é‡Œé¢ä¹Ÿåº”è¯¥æŒ‰ç…§è¿™ç§é£æ ¼ç»Ÿä¸€ï¼Œè¿™æ ·æ›´ä¾¿äºæ£€æŸ¥ã€‚</p>

<h2>å°¤è¾¾è¡¨è¾¾å¼</h2>

<p>ä¸è¦ä½¿ç”¨å°¤è¾¾è¡¨è¾¾å¼ã€‚å°¤è¾¾è¡¨è¾¾å¼æ˜¯æŒ‡ï¼Œæ‹¿ä¸€ä¸ªå¸¸é‡å»å’Œå˜é‡æ¯”è¾ƒè€Œä¸æ˜¯æ‹¿å˜é‡å»å’Œå¸¸é‡æ¯”è¾ƒã€‚å®ƒå°±åƒæ˜¯åœ¨è¡¨è¾¾ â€œè“è‰²æ˜¯ä¸æ˜¯å¤©ç©ºçš„é¢œè‰²â€ æˆ–è€… â€œé«˜ä¸ªæ˜¯ä¸æ˜¯è¿™ä¸ªç”·äººçš„å±æ€§â€ è€Œä¸æ˜¯  â€œå¤©ç©ºæ˜¯ä¸æ˜¯è“çš„â€ æˆ–è€… â€œè¿™ä¸ªç”·äººæ˜¯ä¸æ˜¯é«˜ä¸ªå­çš„â€</p>

<p><img src="./images/yoda.png" alt="Yoda" /></p>

<p>ï¼ˆè¯‘è€…æ³¨ï¼šåå­—èµ·æºäºæ˜Ÿçƒå¤§æˆ˜ä¸­å°¤è¾¾å¤§å¸ˆçš„è®²è¯æ–¹å¼ï¼Œæ€»æ˜¯ç”¨å€’è£…çš„è¯­åºï¼‰</p>

<p><strong>æ¨è:</strong></p>

<pre><code>if ([myValue isEqual:@42]) { ...
</code></pre>

<p><strong>ä¸æ¨è:</strong></p>

<pre><code>if ([@42 isEqual:myValue]) { ...
</code></pre>

<h2>nil å’Œ BOOL æ£€æŸ¥</h2>

<p>ç±»ä¼¼äº Yoda è¡¨è¾¾å¼ï¼Œnil æ£€æŸ¥çš„æ–¹å¼ä¹Ÿæ˜¯å­˜åœ¨äº‰è®®çš„ã€‚ä¸€äº› notous åº“åƒè¿™æ ·æ£€æŸ¥å¯¹è±¡æ˜¯å¦ä¸º nilï¼š</p>

<pre><code>if (nil == myValue) { ...
</code></pre>

<p>æˆ–è®¸æœ‰äººä¼šæå‡ºè¿™æ˜¯é”™çš„ï¼Œå› ä¸ºåœ¨ nil ä½œä¸ºä¸€ä¸ªå¸¸é‡çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·åšå°±åƒ Yoda è¡¨è¾¾å¼äº†ã€‚ ä½†æ˜¯ä¸€äº›ç¨‹åºå‘˜è¿™ä¹ˆåšçš„åŸå› æ˜¯ä¸ºäº†é¿å…è°ƒè¯•çš„å›°éš¾ï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>

<pre><code>if (myValue == nil) { ...
</code></pre>

<p>å¦‚æœç¨‹åºå‘˜æ•²é”™æˆè¿™æ ·ï¼š</p>

<pre><code>if (myValue = nil) { ...
</code></pre>

<p>è¿™æ˜¯åˆæ³•çš„è¯­å¥ï¼Œä½†æ˜¯å³ä½¿ä½ æ˜¯ä¸€ä¸ªä¸°å¯Œç»éªŒçš„ç¨‹åºå‘˜ï¼Œå³ä½¿ç›¯ç€çœ¼ç›ç§ä¸Šå¥½å¤šéä¹Ÿå¾ˆéš¾è°ƒè¯•å‡ºé”™è¯¯ã€‚ä½†æ˜¯å¦‚æœæŠŠ nil æ”¾åœ¨å·¦è¾¹ï¼Œå› ä¸ºå®ƒä¸èƒ½è¢«èµ‹å€¼ï¼Œæ‰€ä»¥å°±ä¸ä¼šå‘ç”Ÿè¿™æ ·çš„é”™è¯¯ã€‚ å¦‚æœç¨‹åºå‘˜è¿™æ ·åšï¼Œä»–/å¥¹å°±å¯ä»¥è½»æ¾æ£€æŸ¥å‡ºå¯èƒ½çš„åŸå› ï¼Œæ¯”ä¸€ééæ£€æŸ¥æ•²ä¸‹çš„ä»£ç è¦å¥½å¾ˆå¤šã€‚</p>

<p>ä¸ºäº†é¿å…è¿™äº›å¥‡æ€ªçš„é—®é¢˜ï¼Œå¯ä»¥ç”¨æ„Ÿå¹å·æ¥ä½œä¸ºè¿ç®—ç¬¦ã€‚å› ä¸º nil æ˜¯ è§£é‡Šåˆ° NOï¼Œæ‰€ä»¥æ²¡å¿…è¦åœ¨æ¡ä»¶è¯­å¥é‡Œé¢æŠŠå®ƒå’Œå…¶ä»–å€¼æ¯”è¾ƒã€‚åŒæ—¶ï¼Œä¸è¦ç›´æ¥æŠŠå®ƒå’Œ <code>YES</code> æ¯”è¾ƒï¼Œå› ä¸º <code>YES</code> çš„å®šä¹‰æ˜¯ 1ï¼Œ è€Œ <code>BOOL</code> æ˜¯ 8 bitçš„ï¼Œå®é™…ä¸Šæ˜¯ char ç±»å‹ã€‚</p>

<p><strong>æ¨è:</strong></p>

<pre><code>if (someObject) { ...
if (![someObject boolValue]) { ...
if (!someObject) { ...
</code></pre>

<p><strong>ä¸æ¨è:</strong></p>

<pre><code>if (someObject == YES) { ... // Wrong
if (myRawValue == YES) { ... // Never do this.
if ([someObject boolValue] == NO) { ...
</code></pre>

<p>åŒæ—¶è¿™æ ·ä¹Ÿèƒ½æé«˜ä¸€è‡´æ€§ï¼Œä»¥åŠæå‡å¯è¯»æ€§ã€‚</p>

<p>åŸæ–‡ <a href="https://github.com/objc-zen/objc-zen-book">https://github.com/objc-zen/objc-zen-book</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSæäº¤åç”³è¯·åŠ æ€¥å®¡æ ¸]]></title>
    <link href="http://www.superqq.com/blog/2015/07/13/iosti-jiao-hou-shen-qing-jia-ji-shen-he/"/>
    <updated>2015-07-13T23:14:17+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/13/iosti-jiao-hou-shen-qing-jia-ji-shen-he</id>
    <content type="html"><![CDATA[<p>ä¹‹å‰åªæ˜¯å¬è¿‡åŠ æ€¥å®¡æ ¸è¿™å›äº‹ï¼Œä¸€ç›´ä¹Ÿæ²¡æœ‰ç”¨åˆ°è¿‡ã€‚æ˜¨å¤©ç”¨äº†ä¸‹æœç„¶å¾ˆç»™åŠ›ã€‚æ˜¨å¤©æ™šä¸Šå°†è¿‘8ç‚¹ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰æäº¤åº”ç”¨ï¼Œä»Šå¤©æ—©ä¸Šä¸Šç­çœ‹äº†ä¸‹å·²ç»é€šè¿‡äº†å®¡æ ¸ï¼Œè€Œä¸”å¯ä»¥åœ¨AppStoreé‡Œä¸‹è½½åˆ°ã€‚</p>

<p>è¯è¯´åŠ æ€¥çš„åŸå› æ¯”è¾ƒæ‚²å‚¬ï¼Œå¹´å‰ä¸€ç›´åœ¨åšè€ç‰ˆæœ¬çš„æ›´æ–°ï¼ˆä¸€ç›´åœ¨æ”¹åˆ«äººä»£ç çš„bugï¼‰ï¼Œä¸´è¿‡å¹´ä¸€å‘¨å¤šçš„æ—¶å€™è¯´ä¸æ”¹äº†ï¼Œåšæ–°ç‰ˆæœ¬çš„ã€‚å¿ƒé‡Œç»ˆäºèˆ’æœäº›ï¼Œå¼€å§‹
è‡ªå·±å†™æ–°ç‰ˆæœ¬ã€‚2æœˆ7å·ä¸Šç­åˆ°2æœˆ18å·ä¸€ç›´åœ¨åšæ–°ç‰ˆæœ¬ã€‚å°±åœ¨ç»ç†å¤©å¤©å‚¬ï¼Œè€æ¿ç»å¸¸é—®è¿›åº¦çš„æ—¶å€™ï¼Œå®æ–½é‚£è¾¹è¯´xxxé‚£è¾¹20å·è¦éªŒæ”¶ï¼ŒéªŒæ”¶ä¸è¿‡è¦æ‰“å®˜å¸
äº†â€¦â€¦</p>

<p>ç„¶åå¼€å§‹æ‚²å‚¬çš„ç»§ç»­æ‰¾åˆ°ä»¥å‰åˆ«äººçš„ä»£ç æ”¹bugï¼Œåå‡ ä¸ªï¼Œè™½è¯´éš¾åº¦ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯å¾ˆä¸çˆ½~</p>

<p>18å·åŠ ç­æ”¹å®Œï¼Œ19å·ç»™æµ‹è¯•äººå‘˜æµ‹è¯•ã€‚ç„¶åæˆ‘ç»§ç»­å¼€å§‹æ–°ç‰ˆæœ¬ã€‚ç»“æœæµ‹è¯•é‚£ä¸€å¤©äº†æ²¡æ¶ˆæ¯ï¼ŒLZå¾ˆ2çš„å»æ‰¾åˆ°æµ‹è¯•å»é—®æµ‹è¯•å®Œäº†å—ï¼Ÿç„¶åæµ‹è¯•MMç¬‘ç€å’Œ
æˆ‘è¯´ï¼Œå‘€ï¼Œå¿˜äº†å’Œä½ è¯´äº†ï¼Œæ²¡é—®é¢˜äº†ã€‚
æ‹¬å¼§å½“æ—¶æ—¶é—´ä¸ºä¸‹åˆ6ç‚¹å·¦å³ï¼ŒLZå½“å¤©æ­£å¸¸ä¸‹ç­æ—¶é—´æ˜¯6ç‚¹åå‡ åˆ†ã€‚ç„¶åå¼€å§‹å›æ¥ä»Šå¤©æäº¤ã€‚è¯è¯´æäº¤é€Ÿåº¦é‚£å«ä¸€ä¸ªæ…¢ï¼æ²¡åŠæ³•ï¼Œå¯ç”¨ç±³å›½VPNï¼Œé€Ÿåº¦å¿«äº†å¾ˆ
å¤šï¼Œçœ‹ç€è¿›åº¦æ¡ä¸€ç‚¹ä¸€ç‚¹å¾€å‰èµ°ï¼Œæ…¢æ…¢èµ°ï¼Œæ…¢æ…¢èµ°â€¦â€¦nä¹…åèµ°åˆ°å¤´ã€‚ç„¶åä¸Šé¢æ–‡å­—æç¤ºè¯´å·²ç»æäº¤å®Œæ¯•ï¼Œä½†æ˜¯è¿›åº¦æ¡åˆå›åˆ°äº†åˆå§‹ä½ç½®æ˜¯æ€ä¹ˆå›äº‹
ï¼Ÿï¼æ„¤æ€’äº†ï¼å»iTunes connecté‡Œåˆ·æ–°çŠ¶æ€æç¤ºç­‰å¾…æäº¤
 = =ï¼</p>

<p>å¥½å§ï¼Œé‡æ–°æäº¤ &ndash;> ç„¶åå¡é‚£ä¸åŠ¨äº† ~~ è¿™ç±³å›½vpnä¹Ÿä¸å¥½ç”¨å•Šè¿˜æ˜¯åº“å…‹é‚£æœåŠ¡å™¨çš„åŸå› å•Šã€‚ã€‚ã€‚ã€‚</p>

<p>å”‰ï¼Œå–æ¶ˆæäº¤ç„¶åç”¨Application Loaderæäº¤ï¼Œæ‰“åŒ…ã€é€‰æ‹©ã€ä¸Šä¼ ï¼Œé€Ÿåº¦å¾ˆæ…¢ä½†æ˜¯ä¸€åˆ‡è¿˜ç®—æ˜¯é¡ºåˆ©ã€‚åœ¨å¿½ä¸Šå¿½ä¸‹ã€â€œåŠ¨è¡ä¸å®šâ€çš„ç½‘é€Ÿä¸­ç»ˆäºæäº¤æˆåŠŸã€‚iTunes connecté‡Œåˆ·æ–°çŠ¶æ€ä¸ºç­‰å¾…å®¡æ ¸ã€‚OKï¼Œç»ˆäºæäº¤äº†ã€‚</p>

<p>ç«Ÿç„¶æ‰¯äº†è¿™ä¹ˆå¤š~</p>

<p>ä¸‹é¢è¿›å…¥æ­£é¢˜ã€‚æäº¤å®Œæˆåè¿›å…¥åŠ æ€¥å®¡æ ¸é¡µé¢ã€‚</p>

<p>é“¾æ¥ï¼š<a href="https://developer.apple.com/appstore/contact/appreviewteam/index.html">https://developer.apple.com/appstore/contact/appreviewteam/index.html</a></p>

<p>åœ¨i would like toé‡Œé€‰æ‹©åŠ æ€¥å®¡æ ¸</p>

<p><img src="http://7xjrlb.com1.z0.glb.clouddn.com/jiaji1.png" alt="1" /></p>

<p>ç„¶åå¡«å†™ç›¸å…³ä¿¡æ¯ã€‚</p>

<p><img src="http://7xjrlb.com1.z0.glb.clouddn.com/jiaji2.png" alt="2" /></p>

<p>App Informationé‡Œå¡«å†™åº”ç”¨åç§°ï¼ŒIDå¡«å†™9ä½æ•°å­—IDã€‚</p>

<p>ç»§ç»­</p>

<p><img src="http://7xjrlb.com1.z0.glb.clouddn.com/jiaji3.png" alt="3" /></p>

<p>é€‰æ‹©åŸå› ï¼Œç„¶åå¡«å†™ç†ç”±ã€‚</p>

<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ç†ç”±ä¸€èˆ¬æ˜¯ç”¨æˆ·å®‰å…¨é—®é¢˜æˆ–è€…å´©æºƒé—®é¢˜æˆåŠŸç‡ä¼šé«˜ä¸€äº›ï¼ˆLZå†™çš„æ˜¯å´©æºƒï¼Œä¸è¦è¯´æˆ‘æ˜¯èµ¶æ—¶é—´ï¼Œè‹¹æœä¼šä¸åŒæ„ï¼Œä»¥å‰ç‰ˆæœ¬ç¡®å®æœ‰å´©æºƒé—®é¢˜ï¼Œåªä¸è¿‡ä¸å¤š~ è¿™é‡Œæˆ‘ä¸å¤šè¯´äº†ï¼Œä½ ä»¬æ‡‚çš„ï¼‰</p>

<p>è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ˜¯å´©æºƒé—®é¢˜ï¼Œä½ æœ€å¥½å†™ä¸Šæ“ä½œæ­¥éª¤ï¼Œè®©å®¡æ ¸å‘˜å»é‡ç°è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>PS. å¦‚æœé‡åˆ°éå¸¸æ—¶æœŸæˆ–è€…äººå“ä¸å¥½é‡åˆ°å¿ƒæƒ…ä¸å¥½çš„å®¡æ ¸å‘˜ï¼Œè¯·è‡ªè¡Œå¦è¡Œå¤„ç†~</p>

<p>å°±åˆ°è¿™é‡Œäº†ï¼Œç»§ç»­æ¬ç –å»äº†~</p>

<p>2014.5.10è¡¥å……ï¼š</p>

<p>ä¹‹å‰å¬åˆ«äººè¯´ä¸€å¹´åªæœ‰ä¸¤æ¬¡åŠ æ€¥çš„æœºä¼šã€‚ä¸€ç›´æ²¡æœ‰å°è¯•è¿‡ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æ³•è¯æ˜æ˜¯å¦æ˜¯çœŸçš„ã€‚</p>

<p>æ˜¨å¤©æ™šä¸Šï¼ˆå‘¨äº”æ™šï¼‰ç”±äºé”€å”®è¦åœ¨å‘¨ä¸€çš„æ—¶å€™å¼€å§‹åšå¤§é‡æ¨å¹¿ï¼Œæ‰€ä»¥ä»Šå¹´çš„ç¬¬ä¸‰æ¬¡åŠ æ€¥å®¡æ ¸åˆå¼€å§‹äº†â€¦â€¦</p>

<p>ä»Šå¤©æ—©ä¸Šèµ·åºŠåè¿˜åœ¨æ‹…å¿ƒåº”è¯¥æ˜¯æ²¡æœ‰é€šè¿‡ï¼Œä½†æ˜¯AppStoreæŸ¥çœ‹äº†ä¸‹ï¼Œå·²ç»é€šè¿‡äº†å®¡æ ¸ã€‚</p>

<p>è¯´æ˜ä¹‹å‰ä¸€å¹´åªæœ‰ä¸¤æ¬¡åŠ æ€¥å®¡æ ¸çš„æœºä¼šæ˜¯ä¸æ­£ç¡®çš„ã€‚è‡³äºä¸€å¹´åˆ°åº•æœ‰å¤šå°‘æ¬¡åŠ æ€¥å®¡æ ¸çš„æœºä¼šï¼Œå®˜æ–¹æ²¡æœ‰çœ‹åˆ°ç›¸å…³çš„è¯´æ˜ï¼Œä¹Ÿä¸èƒ½ç¡®å®šæ¬¡æ•°æ˜¯å¤šå°‘ã€‚</p>

<p>å¦‚æœæœ‰çœ‹åˆ°ç›¸å…³æ–‡æ¡£æˆ–è¯´æ˜çš„ç«¥é‹ï¼Œå¸Œæœ›èƒ½å’Œå¤§å®¶åˆ†äº«ä¸‹~</p>

<p>2014.5.14è¡¥å……ï¼š</p>

<p>ç¬¬å››æ¬¡åŠ æ€¥ï¼Œä»æäº¤åˆ°é€šè¿‡å¤§æ¦‚è¿‡äº†ä¸¤å¤©çš„æ—¶é—´ã€‚</p>

<p>2015.6.2è¡¥å……ï¼š</p>

<p>åŠ æ€¥å®¡æ ¸è¯´æ˜æ˜¯å¯ä»¥å†™ä¸­æ–‡çš„ã€‚è¿™é‡Œæ„Ÿè°¢ @ç¬¬ä¸ƒåªèš‚èš æä¾›å®è´µçš„ä¿¡æ¯ã€‚</p>

<p>åŸæ–‡æ¥è‡ªï¼š<a href="http://blog.csdn.net/showhilllee/article/details/19541493">iOSæäº¤åç”³è¯·åŠ æ€¥å®¡æ ¸</a></p>
]]></content>
  </entry>
  
</feed>
