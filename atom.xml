<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[åˆšåˆšåœ¨çº¿]]></title>
  <link href="http://www.superqq.com/atom.xml" rel="self"/>
  <link href="http://www.superqq.com/"/>
  <updated>2015-08-10T00:40:27+08:00</updated>
  <id>http://www.superqq.com/</id>
  <author>
    <name><![CDATA[æåˆš]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[CoreMotionæ¡†æ¶ä¸­åŠ é€Ÿåº¦è®¡ä½¿ç”¨ç®€æ˜æ•™ç¨‹]]></title>
    <link href="http://www.superqq.com/blog/2015/08/10/coremotion-framework-use-accelerometer/"/>
    <updated>2015-08-10T00:37:33+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/10/coremotion-framework-use-accelerometer</id>
    <content type="html"><![CDATA[<h2>å‰è¨€</h2>

<p>ä¹‹å‰æœ‰äººé€šè¿‡iPhoneçš„åŠ é€Ÿåº¦è®¡åšå‡ºä¸€ä¸ªæ‰‹æœºé˜²ç›—APPï¼Œè€Œä¸”æ­£æ˜¯é€šè¿‡è¿™ä¸ªé˜²ç›—APPæ‹¿åˆ°å¤©ä½¿æŠ•èµ„ã€‚ä»æ­¤ä»¥ååä¸½è½¬èº«ï¼Œå…¬å¸å‘å±•çš„æœ‰å£°æœ‰è‰²ã€‚è™½ç„¶è¿™ä¸ªé¡¹ç›®æœ€åä¸æ€ä¹ˆæ ·ï¼Œä½†æ˜¯ï¼Œç¡®å®æ˜¯ä¸€ä¸ªä¸é”™çš„æƒ³æ³•ã€‚</p>

<p>ä¹Ÿè®¸ä½ ä¸çŸ¥é“ï¼Œæ¯ä¸€å°iPhoneéƒ½å†…ç½®çš„æœ‰åŠ é€Ÿåº¦è®¡ã€‚è¿™æ ·å½“ç”¨æˆ·æ“ä½œæ‰‹æœºçš„çš„æ—¶å€™ï¼Œæ¯”å¦‚æ—‹è½¬æ‰‹æœºï¼Œå†…ç½®çš„åŠ é€Ÿåº¦è®¡å°±ä¼šåšå‡ºååº”ã€‚</p>

<p>åœ¨iOS4ä¹‹å‰åŠ é€Ÿåº¦è®¡æ˜¯ç”±<code>UIAccelerometer</code>æ¥é‡‡é›†æ•°æ®çš„ï¼Œç°åœ¨éƒ½æ˜¯ç”¨<code>CoreMotion</code>æ¥å¤„ç†ã€‚ä¸¤ç§ä½¿ç”¨éƒ½æ¯”è¾ƒç®€å•ï¼Œç›¸å¯¹æ¥è¯´<code>UIAccelerometer</code>æ›´ç®€å•ä¸€äº›ã€‚æœ¬æ–‡å°†åˆ†äº«ä¸¤è€…çš„ç”¨æ³•ã€‚</p>

<h2>åŠ é€Ÿåº¦è®¡åŸç†</h2>

<p><img src="http://images.90159.com/08/Accelerometer.png" alt="Accelerometer.png" /></p>

<p>æ¥è‡ªç½‘ç»œ</p>

<p>iPhoneçš„åŠ é€Ÿåº¦è®¡æœ‰ä¸‰ä¸ªè½´ï¼Œåˆ†åˆ«æ˜¯xè½´ã€yè½´ã€zè½´ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚è¿™æ˜¯ä¸€ä¸ªä¸‰ç»´ç«‹ä½“ç©ºé—´ï¼Œå¯ä»¥æ•è·ç”¨æˆ·æ¯ä¸€ä¸ªè§’åº¦çš„æ“ä½œã€‚é€šè¿‡è¿™ä¸‰ä¸ªè½´å¯ä»¥è®¡ç®—iPhoneå€¾æ–œçš„è§’åº¦ï¼Œä»è€Œè®¡ç®—å‡ºåŠ é€Ÿåº¦ã€‚</p>

<h2>UIAccelerometerä½¿ç”¨</h2>

<p><code>UIAccelerometer</code>çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œéœ€è¦å®ç°<code>UIAccelerometerDelegate</code>çš„ä»£ç†æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>UIAccelerometer *accelerometer = [UIAccelerometer sharedAccelerometer];
accelerometer.delegate = self;
accelerometer.updateInterval = 0.1;
</code></pre>

<p>å®ç°<code>UIAccelerometerDelegate</code>ä»£ç†æ–¹æ³•ï¼š</p>

<pre><code>- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration NS_DEPRECATED_IOS(2_0, 5_0)
{
    NSLog(@"x -&gt; %f y - &gt; %f z -&gt; %f",accelerometer.x,accelerometer.y,accelerometer.z);
}
</code></pre>

<h2>CoreMotionåŠ é€Ÿåº¦è®¡</h2>

<p>é¦–å…ˆéœ€è¦å¼•å…¥<code>#import &lt;CoreMotion/CoreMotion.h&gt;</code>ï¼Œç›´æ¥é€šè¿‡<code>block</code>å›è°ƒï¼Œç„¶åå¤„ç†ä¸‰ä¸ªè½´çš„æ•°æ®ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>CMMotionManager *motionManager = [[CMMotionManager alloc] init];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
//åŠ é€Ÿè®¡
if (motionManager.accelerometerAvailable) {
    motionManager.accelerometerUpdateInterval = 0.1;
    [motionManager startAccelerometerUpdatesToQueue:queue withHandler:^(CMAccelerometerData *accelerometerData,NSError *error){
        if (error) {
            [motionManager stopAccelerometerUpdates];
            NSLog(@"error");
        }else{
            NSLog(@"x -&gt; %f y - &gt; %f z -&gt; %f",accelerometerData.acceleration.x,accelerometerData.acceleration.y,accelerometerData.acceleration.z);
        }
    }];
}else{
    NSLog(@"This device has no accelerometer");
}
</code></pre>

<p>ä»¥ä¸Šå°±æ˜¯å…³äº<code>UIAccelerometer</code>å’Œ<code>CoreMotion</code>çš„ä½¿ç”¨ï¼ŒåŠ é€Ÿåº¦è®¡ç¡®å®æ˜¯iPhoneæ‰‹æœºçš„äº®ç‚¹åŠŸèƒ½ã€‚å…·ä½“ç”¨é€”ï¼Œéœ€è¦æˆ‘ä»¬å‘æ•£æ€ç»´ï¼Œè¯´ä¸å®šå“ªä¸€å¤©ä½ ä¹Ÿæœ‰ä¸€ä¸ªå¾ˆç‰›çš„åˆ›æ„ã€‚å±Œä¸é€†è¢­ä¹Ÿè®¸å°±åœ¨ä¸‹ä¸€åˆ»ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ä¸€æ¬¡å¯¹MKMapViewçš„æ€§èƒ½ä¼˜åŒ–]]></title>
    <link href="http://www.superqq.com/blog/2015/08/09/performance-optimization-of-mkmapview/"/>
    <updated>2015-08-09T13:18:21+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/09/performance-optimization-of-mkmapview</id>
    <content type="html"><![CDATA[<h2>å‰è¨€</h2>

<p>æœ€è¿‘åšçš„é¡¹ç›®ä¸»è¦æ˜¯LBSè¿™å— ä¸»æ‰“æˆå‘˜å®šä½åŠŸèƒ½ æˆ‘ä»¬çš„UIè®¾è®¡æ˜¯è¿™æ ·çš„</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-1.png" alt="Pic-MK-1" /></p>

<p>ä¹ä¸€çœ‹ä¸Šå»æ˜¯æŒºå¥½æŒºç¾è§‚çš„ ä¸åŒçš„äººä¼šæ˜¾ç¤ºä¸åŒçš„å¤´åƒ å¯æ˜¯å½“äººæ‰å †çš„æ—¶å€™ é—®é¢˜å°±æ¥äº†</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-2.png" alt="Pic-MK-2" /></p>

<p>å½“äººå¤šçš„æ—¶å€™(ä¾‹å¦‚ä¸Šå›¾æ‰€ç¤º) åœ°å›¾æ»‘åŠ¨èµ·æ¥å°±èƒ½æ„Ÿè§‰åˆ°æ˜æ˜¾é¡¿å¡ é‚£ç§ä¸æµç•…æ„Ÿèƒ½æŠ˜ç£¨æ­»äºº æ‰€ä»¥ è‡ªç„¶æˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜(ç­‰ç­‰ å…ˆä¸è¦åæ§½ä¸ºä»€ä¹ˆä¸ç”¨åœ°å›¾èšåˆ å› ä¸ºè¿™å·²ç»æ˜¯åœ°å›¾æ”¾åˆ°æœ€å¤§äº† èšåˆä¸é€‚åˆè¿™æ¬¡çš„é—®é¢˜è®¨è®º)</p>

<h2>åˆ†æ</h2>

<p>é¦–å…ˆçœ‹ä¸‹æˆ‘æ˜¯æ€ä¹ˆå®ç°è¿™ä¸ªannotationViewçš„ ç”±äºè¿™ä¸ªannotationsViewæ˜¯å¼‚å½¢çš„(ä¹Ÿå°±æ˜¯æ— æ³•é€šè¿‡è®¾ç½®åœ†è§’ç›´æ¥å¾—åˆ°) è€Œä¸”é‡Œé¢çš„å›¾ç‰‡è¿˜å› ç”¨æˆ·è€Œå¼‚ æ‰€ä»¥è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨layer.maskæ¥è¿›è¡Œé®ç½© ä»£ç å¦‚ä¸‹</p>

<pre><code>@implementation MMAnnotationView

- (instancetype)initWithAnnotation:(id&lt;MKAnnotation&gt;)annotation reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
    if ( self )
    {
        self.frame = CGRectMake(0, 0, TRACK_ANNOTATION_SIZE.width, TRACK_ANNOTATION_SIZE.height);
        self.centerOffset = CGPointMake(0, -(TRACK_ANNOTATION_SIZE.height-3)/2);
        self.canShowCallout = NO;

        self.avatarView = [[UIImageView alloc] initWithFrame:self.bounds];
        [self addSubview:self.avatarView];
        self.avatarView.contentMode = UIViewContentModeScaleAspectFill;

        CAShapeLayer *shapelayer = [CAShapeLayer layer];
        shapelayer.frame = self.bounds;
        shapelayer.path = self.framePath.CGPath;
        self.avatarView.layer.mask = shapelayer;

        self.layer.shadowPath = self.framePath.CGPath;
        self.layer.shadowRadius = 1.0f;
        self.layer.shadowColor = [UIColor colorWithHex:0x666666FF].CGColor;
        self.layer.shadowOpacity = 1.0f;
        self.layer.shadowOffset = CGSizeMake(0, 0);
        self.layer.masksToBounds = NO;
    }
    return self;
}

//maskè·¯å¾„
- (UIBezierPath *)framePath
{
    if ( !_framePath )
    {
        CGFloat arrowWidth = 14;

        CGMutablePathRef path = CGPathCreateMutable();

        CGRect rectangle = CGRectInset(CGRectMake(0, 0, CGRectGetWidth(self.bounds), CGRectGetWidth(self.bounds)), 3,3);

        CGPoint p[3] = {
        {CGRectGetMidX(self.bounds)-arrowWidth/2, CGRectGetWidth(self.bounds)-6},
        {CGRectGetMidX(self.bounds)+arrowWidth/2, CGRectGetWidth(self.bounds)-6},
        {CGRectGetMidX(self.bounds), CGRectGetHeight(self.bounds)-4}
        };

        CGPathAddRoundedRect(path, NULL, rectangle, 5, 5);
        CGPathAddLines(path, NULL, p, 3);

        CGPathCloseSubpath(path);

        _framePath = [UIBezierPath bezierPathWithCGPath:path];

        CGPathRelease(path);
    }

    return _framePath;
}
</code></pre>

<p>æˆ‘ç”¨ä»£ç ç”Ÿæˆäº†å½¢çŠ¶è·¯å¾„ å¹¶ä»¥æ­¤ç”Ÿæˆäº†layerçš„maskå’ŒshadowPath
ä½¿ç”¨æ—¶ åªè¦ç›´æ¥ç”¨SDWebImageè®¾ç½®å¤´åƒå°±è¡Œäº†</p>

<pre><code>[annotationView.avatarView sd_setImageWithURL:[NSURL URLWithString:avatarURL] placeholderImage:placeHolderImage];
</code></pre>

<p>æ¥ä¸‹æ¥ç”¨å·¥å…·åˆ†æä¸€ä¸‹é—®é¢˜å‡ºæ¥å“ª åˆ†ææ€§èƒ½å½“ç„¶æ˜¯é€‰æ‹©Instrments(ç”¨æ³•åœ¨è¿™é‡Œå°±ä¸åšä»‹ç»äº†) æ‰“å¼€Core Animation ç„¶åè¿è¡Œç¨‹åº æ»‘åŠ¨åœ°å›¾ å¯ä»¥çœ‹åˆ°æ€§èƒ½åˆ†æå¦‚ä¸‹</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-3.jpg" alt="Pic-MK-3" /></p>

<p>åŸæ¥å¹³å‡å¸§æ•°åªæœ‰ä¸åˆ°30å¸§ è¿™ç¦»æˆ‘ä»¬çš„ç›®æ ‡60å¸§å·®å¾—å®åœ¨å¤ªè¿œ</p>

<p>å†ä½¿ç”¨Debug Optionæ¥æ·±å…¥åˆ†æä¸€ä¸‹</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-4.png" alt="Pic-MK-4" /></p>

<p>ç”±äºMKMapViewçš„åŸå›  è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³å¿ƒè¿™å‡ ä¸ªé€‰é¡¹</p>

<ul>
<li>Color Blended Layers</li>
<li>Color Misaligned Images</li>
<li>Color Offscreen-Rendered Yellow</li>
</ul>


<p>åˆ†åˆ«æ‰“å¼€è¿™å‡ ä¸ªé€‰é¡¹ ç»“æœå¦‚ä¸‹</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-5.png" alt="Pic-MK-5" /></p>

<p>å¯ä»¥çœ‹åˆ°</p>

<ul>
<li>Color Blended Layersæ²¡æœ‰é—®é¢˜ ä¸è¿‡è¿™ä¹Ÿæ˜¯æ­£å¸¸çš„ ç”±äºä½¿ç”¨äº†mask æ²¡æœ‰é€æ˜çš„åœ°æ–¹</li>
<li>Color Misaligned Imagesé™¤äº†é»˜è®¤å¤´åƒå¤–å…¨ä¸­ è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨ä¸Šçš„å›¾ç‰‡å¤§å°è·Ÿæ˜¾ç¤ºçš„å¤§å°ä¸ä¸€è‡´ å¯¼è‡´ç¼©æ”¾ è€Œé»˜è®¤å¤´åƒåˆ™æ˜¯ä¸€è‡´çš„ æ‰€ä»¥æ²¡é—®é¢˜</li>
<li>Color Offscreen-Rendered Yellowå…¨ä¸­ ç”±äºä½¿ç”¨äº†mask å¯¼è‡´å¤§é‡çš„ç¦»å±æ¸²æŸ“ è¿™ä¹Ÿæ˜¯æ€§èƒ½ä¸‹é™çš„ä¸»è¦åŸå› </li>
</ul>


<h2>è§£å†³</h2>

<p>é—®é¢˜çš„åŸå› æ‰¾åˆ°äº† é‚£ä¹ˆæ¥ä¸‹æ¥è¯¥å¦‚ä½•è§£å†³å‘¢?</p>

<ul>
<li>é¦–å…ˆmaskæ˜¯è‚¯å®šä¸èƒ½ç”¨äº†</li>
<li><p>å…¶æ¬¡ä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡æˆ‘ä»¬è¦é¢„å¤„ç†æˆå®é™…å¤§å°
é‚£ä¹ˆ ç›´æ¥æŠŠä¸‹è½½ä¸‹æ¥çš„å›¾ç‰‡åˆæˆä¸ºæˆ‘ä»¬è¦æ˜¾ç¤ºçš„æœ€ç»ˆç»“æœä¸å°±okäº†å—? è¯•è¯•çœ‹</p>

<pre><code>  - (void)loadAnnotationImageWithURL:(NSString*)url imageView:(UIImageView*)imageView
  {
      //å°†åˆæˆåçš„å›¾ç‰‡ç¼“å­˜èµ·æ¥
      NSString *annoImageURL = url;
      NSString *annoImageCacheURL = [annoImageURL stringByAppendingString:@"cache"];

      UIImage *cacheImage = [[SDImageCache sharedImageCache] imageFromDiskCacheForKey:annoImageCacheURL];
      if ( cacheImage )
      {
          //LLLog(@"hit cache");
          imageView.image = cacheImage;
      }
      else
      {
          //LLLog(@"no cache");
          [imageView sd_setImageWithURL:[NSURL URLWithString:annoImageURL]
          placeholderImage:placeHolderImage
          completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {
          if (!error)
          {
              UIImage *annoImage = [image annotationImage];
              imageView.image = annoImage;

              [[SDImageCache sharedImageCache] storeImage:annoImage forKey:annoImageCacheURL];
              }
          }];
      }
  }

  @implementation UIImage (LJC)
  - (UIImage*) annotationImage
  {
      static UIView *snapshotView = nil;
      static UIImageView *imageView = nil;

      if ( !snapshotView )
      {
          snapshotView = [UIView new];
          snapshotView.frame = CGRectMake(0, 0, TRACK_ANNOTATION_SIZE.width, TRACK_ANNOTATION_SIZE.height);

          imageView = [UIImageView new];
          [snapshotView addSubview:imageView];
          imageView.clipsToBounds = YES;
          imageView.frame = snapshotView.bounds;
          imageView.contentMode = UIViewContentModeScaleAspectFill;

          CGFloat arrowWidth = 14;

          CGMutablePathRef path = CGPathCreateMutable();

          CGRect rectangle = CGRectInset(CGRectMake(0, 0, CGRectGetWidth(imageView.bounds), CGRectGetWidth(imageView.bounds)), 3,3);

          CGPoint p[3] = {
              {CGRectGetMidX(imageView.bounds)-arrowWidth/2, CGRectGetWidth(imageView.bounds)-6},
              {CGRectGetMidX(imageView.bounds)+arrowWidth/2, CGRectGetWidth(imageView.bounds)-6},
              {CGRectGetMidX(imageView.bounds), CGRectGetHeight(imageView.bounds)-4}
          };

          CGPathAddRoundedRect(path, NULL, rectangle, 5, 5);
          CGPathAddLines(path, NULL, p, 3);

          CGPathCloseSubpath(path);

          CAShapeLayer *shapelayer = [CAShapeLayer layer];
          shapelayer.frame = imageView.bounds;
          shapelayer.path = path;

          imageView.layer.mask = shapelayer;

          snapshotView.layer.shadowPath = path;
          snapshotView.layer.shadowRadius = 1.0f;
          snapshotView.layer.shadowColor = [UIColor colorWithHex:0x666666FF].CGColor;
          snapshotView.layer.shadowOpacity = 1.0f;
          snapshotView.layer.shadowOffset = CGSizeMake(0, 0);

          CGPathRelease(path);
      }

      imageView.image = self;

      UIGraphicsBeginImageContextWithOptions(TRACK_ANNOTATION_SIZE, NO, 0);

      [snapshotView.layer renderInContext:UIGraphicsGetCurrentContext()];

      UIImage *copied = UIGraphicsGetImageFromCurrentImageContext();
      UIGraphicsEndImageContext();

      return copied;
  }
  @end
</code></pre></li>
</ul>


<p>ç„¶åä½¿ç”¨çš„æ—¶å€™ åªè¦ç®€å•çš„å¦‚ä¸‹è°ƒç”¨å°±OKäº†</p>

<pre><code>[self loadAnnotationImageWithURL:avatarURL imageView:annotationView.avatarView];
</code></pre>

<p>çœ‹çœ‹ä¿®æ”¹ä¹‹åçš„Instrumentsè¡¨ç°å¦‚ä½•</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-6.png" alt="Pic-MK-6" /></p>

<ul>
<li>Color Blended Layerså…¨ä¸­ è¿™ä¹Ÿæ˜¯æ— å¯é¿å…çš„ å› ä¸ºæ˜¾ç¤ºçš„å°±æ˜¯ä¸€å¼ å¸¦é€æ˜åº¦çš„å›¾ ä½†æ˜¯ç”±äºåœ°å›¾çš„ç‰¹æ®Šæ€§(å¤´åƒçš„ä½ç½®å˜åŒ–é—´éš”è¾ƒé•¿ æ‰€ä»¥ä¸ä¼šç»å¸¸å¼•å‘åˆæˆ ä¹Ÿæ²¡æœ‰åŠ¨ç”») æ‰€ä»¥è¿™é‡Œä¹Ÿä¸æ˜¯é—®é¢˜</li>
<li>Color Misaligned Imagesæ²¡é—®é¢˜äº† å› ä¸ºå¤´åƒå·²è¢«ç¼©æ”¾æˆäº†ç›¸åŒå¤§å°</li>
<li>Color Offscreen-Rendered Yellowæ²¡é—®é¢˜äº† å› ä¸ºåªæ˜¯ç®€å•çš„æ˜¾ç¤ºäº†ä¸€å¼ å›¾ç‰‡ è€Œå¹¶æ²¡æœ‰éœ€è¦ç¦»å±æ¸²æŸ“çš„ä¸œè¥¿äº†</li>
</ul>


<p>å†æ¥çœ‹ä¸‹å¸§æ•°æƒ…å†µ</p>

<p><img src="http://7xkkjz.com1.z0.glb.clouddn.com/MK-7.jpg" alt="Pic-MK-7" /></p>

<p>Oh-Yeah~ ä¸å…‰å¸§æ•°è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®æ ‡60å¸§(ç”±äºè¿˜æœ‰ä¸šåŠ¡é€»è¾‘çº¿ç¨‹åœ¨åå°è·‘ æ‰€ä»¥æ²¡æœ‰é‚£ä¹ˆçš„ç¨³å®š) å°±è¿å¹³å‡è¿è¡Œè€—æ—¶éƒ½ä¸‹é™äº†ä¸å°‘ å°±ç®—åœ°å›¾ä¸Šå†å¤šæ˜¾ç¤ºå‡ åä¸ªäºº ä¹Ÿä¸æˆé—®é¢˜äº†</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„iOSã€‹é¢è¯•é¢˜å‚è€ƒç­”æ¡ˆï¼ˆä¸Šï¼‰]]></title>
    <link href="http://www.superqq.com/blog/2015/08/08/interview-ios-question-answer/"/>
    <updated>2015-08-08T00:16:38+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/08/interview-ios-question-answer</id>
    <content type="html"><![CDATA[<blockquote><p>æ¨èç†ç”±ï¼šæœ€è¿‘æ¯”è¾ƒğŸ”¥çš„å…³äºiOSå¼€å‘é¢è¯•é¢˜çš„æ–‡ç« ã€‚ç®€å•å–µäº†ä¸€çœ¼ï¼Œæ„Ÿè§‰å¾ˆä¸é”™ï¼Œä½œè€…sunnyxxä¹Ÿæ˜¯ä¸ªå¤§ç‰›ã€‚ç‰¹æ­¤æ¨èï¼</p></blockquote>

<p><a href="http://blog.sunnyxx.com/2015/07/04/ios-interview/">ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„ iOSã€‹</a>â€”å‚è€ƒç­”æ¡ˆï¼ˆä¸Šï¼‰</p>

<p>è¯´æ˜ï¼šé¢è¯•é¢˜æ¥æºæ˜¯<a href="http://weibo.com/u/1364395395">å¾®åš@æˆ‘å°±å«Sunnyæ€ä¹ˆäº†</a>çš„è¿™ç¯‡åšæ–‡ï¼š<a href="http://blog.sunnyxx.com/2015/07/04/ios-interview/">ã€Šæ‹›è˜ä¸€ä¸ªé è°±çš„ iOSã€‹</a>ï¼Œå…¶ä¸­å…±55é¢˜ï¼Œé™¤ç¬¬ä¸€é¢˜ä¸ºçº é”™é¢˜å¤–ï¼Œå…¶ä»–54é“å‡ä¸ºç®€ç­”é¢˜ã€‚</p>

<p>å‡ºé¢˜è€…ç®€ä»‹ï¼š å­™æºï¼ˆsunnyxxï¼‰ï¼Œç›®å‰å°±èŒäºç™¾åº¦ï¼Œè´Ÿè´£ç™¾åº¦çŸ¥é“ iOS å®¢æˆ·ç«¯çš„å¼€å‘å·¥ä½œï¼Œå¯¹æŠ€æœ¯å–œæ¬¢åˆ¨æ ¹é—®åº•å’Œæ€»ç»“æœ€ä½³å®è·µï¼Œçƒ­çˆ±åˆ†äº«å’Œå¼€æºï¼Œç»´æŠ¤ä¸€ä¸ªå« forkingdog çš„å¼€æºå°ç»„ã€‚</p>

<p>ç­”æ¡ˆä¸º<a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a>æ•´ç†ï¼Œæœªç»å‡ºé¢˜è€…æ ¡å¯¹ï¼Œå¦‚æœ‰çº°æ¼ï¼Œè¯·å‘<a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a>æŒ‡æ­£ã€‚</p>

<hr />

<h3>1. é£æ ¼çº é”™é¢˜</h3>

<p><img src="http://i.imgur.com/O7Zev94.png" alt="enter image description here" />
ä¿®æ”¹å®Œçš„ä»£ç ï¼š</p>

<p>ä¿®æ”¹æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œç°ç»™å‡ºä¸€ç§åšç¤ºä¾‹ï¼š</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä¿®æ”¹å®Œçš„ä»£ç ï¼Œè¿™æ˜¯ç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ï¼Œåé¢ä¼šç»™å‡ºç¬¬äºŒç§ä¿®æ”¹æ–¹æ³•

typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};

@interface CYLUser : NSObject&lt;NSCopying&gt;

@property (nonatomic, copy, readonly) NSString *name;
@property (nonatomic, assign, readonly) NSUInteger age;
@property (nonatomic, assign, readonly) CYLSex sex;

- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;

@end
</code></pre>

<p>ä¸‹é¢å¯¹å…·ä½“ä¿®æ”¹çš„åœ°æ–¹ï¼Œåˆ†ä¸¤éƒ¨åˆ†åšä¸‹ä»‹ç»ï¼š<strong><em>ç¡¬ä¼¤éƒ¨åˆ†</em></strong>å’Œ<strong><em>ä¼˜åŒ–éƒ¨åˆ†</em></strong>
ã€‚å› ä¸º<strong><em>ç¡¬ä¼¤éƒ¨åˆ†</em></strong>æ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œä¸ºäº†èŠ‚çœå¤§å®¶æ—¶é—´ï¼Œæ”¾åœ¨åé¢è®²ï¼Œå¤§ç¥è¯·ç›´æ¥çœ‹<strong><em>ä¼˜åŒ–éƒ¨åˆ†</em></strong>ã€‚</p>

<h4><strong><em>ä¼˜åŒ–éƒ¨åˆ†</em></strong></h4>

<ol>
<li><p>enumå»ºè®®ä½¿ç”¨ <code>NS_ENUM</code> å’Œ <code>NS_OPTIONS</code> å®æ¥å®šä¹‰æšä¸¾ç±»å‹ï¼Œå‚è§å®˜æ–¹çš„ <a href="https://developer.apple.com/library/ios/releasenotes/ObjectiveC/ModernizationObjC/AdoptingModernObjective-C/AdoptingModernObjective-C.html">Adopting Modern Objective-C</a> ä¸€æ–‡ï¼š</p>

<p>&#8220;`objective-c
//å®šä¹‰ä¸€ä¸ªæšä¸¾
typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};</p></li>
</ol>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> 2. ageå±æ€§çš„ç±»å‹ï¼šåº”é¿å…ä½¿ç”¨åŸºæœ¬ç±»å‹ï¼Œå»ºè®®ä½¿Foundationæ•°æ®ç±»å‹ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š
</span><span class='line'> 
</span><span class='line'> ```Objective-C
</span><span class='line'>  int -&gt; NSInteger
</span><span class='line'>  unsigned -&gt; NSUInteger
</span><span class='line'>  float -&gt; CGFloat
</span><span class='line'>  åŠ¨ç”»æ—¶é—´ -&gt; NSTimeInterval</span></code></pre></td></tr></table></div></figure>


<p>åŒæ—¶è€ƒè™‘åˆ°ageçš„ç‰¹ç‚¹ï¼Œåº”ä½¿ç”¨NSUIntegerï¼Œè€Œéintã€‚
è¿™æ ·åšçš„æ˜¯åŸºäº64-bit é€‚é…è€ƒè™‘ï¼Œè¯¦æƒ…å¯å‚è€ƒå‡ºé¢˜è€…çš„åšæ–‡<a href="http://blog.sunnyxx.com/2014/12/20/64-bit-tips/">ã€Š64-bit Tipsã€‹</a>ã€‚</p>

<ol>
<li>å¦‚æœå·¥ç¨‹é¡¹ç›®éå¸¸åºå¤§ï¼Œéœ€è¦æ‹†åˆ†æˆä¸åŒçš„æ¨¡å—ï¼Œå¯ä»¥åœ¨ç±»ã€typedefå®å‘½åçš„æ—¶å€™ä½¿ç”¨å‰ç¼€ã€‚</li>
<li>doLogInæ–¹æ³•ä¸åº”å†™åœ¨è¯¥ç±»ä¸­ï¼šè™½ç„¶<code>LogIn</code>çš„å‘½åä¸å¤ªæ¸…æ™°ï¼Œä½†ç¬”è€…çŒœæµ‹æ˜¯loginçš„æ„æ€ï¼Œè€Œç™»å½•æ“ä½œå±äºä¸šåŠ¡é€»è¾‘ï¼Œè§‚å¯Ÿç±»å UserModel ï¼Œä»¥åŠå±æ€§çš„å‘½åæ–¹å¼ï¼Œè¯¥ç±»åº”è¯¥æ˜¯ä¸€ä¸ª Model è€Œä¸æ˜¯ä¸€ä¸ªâ€œ MVVM æ¨¡å¼ä¸‹çš„ ViewModel â€ï¼š</li>
</ol>


<blockquote><p>æ— è®ºæ˜¯MVCæ¨¡å¼è¿˜æ˜¯MVVMæ¨¡å¼ï¼Œä¸šåŠ¡é€»è¾‘éƒ½ä¸åº”å½“å†™åœ¨Modelé‡Œã€‚</p></blockquote>

<p> ï¼ˆå¦‚æœæŠ›å¼€å‘½åè§„èŒƒï¼Œå‡è®¾è¯¥ç±»çœŸçš„æ˜¯MVVMæ¨¡å¼é‡Œçš„ ViewModel ï¼Œé‚£ä¹ˆUserModelè¿™ä¸ªç±»å¯èƒ½å¯¹åº”çš„æ˜¯ç”¨æˆ·æ³¨å†Œé¡µé¢ï¼Œå¦‚æœæœ‰ç‰¹æ®Šçš„ä¸šåŠ¡éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šloginå¯¹åº”çš„åº”å½“æ˜¯æ³¨å†Œå¹¶ç™»å½•çš„ä¸€ä¸ªButtonï¼Œå‡ºç°loginæ–¹æ³•ä¹Ÿå¯èƒ½æ˜¯åˆç†çš„ã€‚ï¼‰</p>

<ol>
<li>doLogInæ–¹æ³•å‘½åä¸è§„èŒƒï¼šæ·»åŠ äº†å¤šä½™çš„åŠ¨è¯å‰ç¼€ã€‚
è¯·ç‰¢è®°ï¼š</li>
</ol>


<blockquote><p>å¦‚æœæ–¹æ³•è¡¨ç¤ºè®©å¯¹è±¡æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œï¼Œä½¿ç”¨åŠ¨è¯æ‰“å¤´æ¥å‘½åï¼Œæ³¨æ„ä¸è¦ä½¿ç”¨<code>do</code>ï¼Œ<code>does</code>è¿™ç§å¤šä½™çš„å…³é”®å­—ï¼ŒåŠ¨è¯æœ¬èº«çš„æš—ç¤ºå°±è¶³å¤Ÿäº†ã€‚
 11. <code>-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;</code>æ–¹æ³•ä¸­ä¸è¦ç”¨<code>with</code>æ¥è¿æ¥ä¸¤ä¸ªå‚æ•°:<code>withAge:</code>åº”å½“æ¢ä¸º<code>age:</code>ï¼Œ<code>age:</code>å·²ç»è¶³ä»¥æ¸…æ™°è¯´æ˜å‚æ•°çš„ä½œç”¨ï¼Œä¹Ÿä¸å»ºè®®ç”¨<code>andAge:</code>ï¼šé€šå¸¸æƒ…å†µä¸‹ï¼Œå³ä½¿æœ‰ç±»ä¼¼<code>withA:withB:</code>çš„å‘½åéœ€æ±‚ï¼Œä¹Ÿé€šå¸¸æ˜¯ä½¿ç”¨<code>withA:andB:</code>è¿™ç§å‘½åï¼Œç”¨æ¥è¡¨ç¤ºæ–¹æ³•æ‰§è¡Œäº†ä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ“ä½œï¼ˆ<em>ä»è®¾è®¡ä¸Šæ¥è¯´ï¼Œè¿™æ—¶å€™ä¹Ÿå¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„æ–¹æ³•</em>ï¼‰ï¼Œå®ƒä¸åº”è¯¥ç”¨ä½œé˜æ˜æœ‰å¤šä¸ªå‚æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„ï¼š</p></blockquote>

<p>  &#8220;`objective-c
//é”™è¯¯ï¼Œä¸è¦ä½¿ç”¨&#8221;and&#8221;æ¥è¿æ¥å‚æ•°
- (int)runModalForDirectory:(NSString <em>)path andFile:(NSString </em>)name andTypes:(NSArray <em>)fileTypes;
//é”™è¯¯ï¼Œä¸è¦ä½¿ç”¨&#8221;and&#8221;æ¥é˜æ˜æœ‰å¤šä¸ªå‚æ•°
- (instancetype)initWithName:(CGFloat)width andAge:(CGFloat)height;
//æ­£ç¡®ï¼Œä½¿ç”¨&#8221;and&#8221;æ¥è¡¨ç¤ºä¸¤ä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ“ä½œ
- (BOOL)openFile:(NSString </em>)fullPath withApplication:(NSString *)appName andDeactivate:(BOOL)flag;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'> 12. ç”±äºå­—ç¬¦ä¸²å€¼å¯èƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥è¦æŠŠç›¸å…³å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€å£°æ˜ä¸ºcopyã€‚(åŸå› åœ¨ä¸‹æ–‡æœ‰è¯¦ç»†è®ºè¿°ï¼š***ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ***)
</span><span class='line'> 2. â€œæ€§åˆ«â€(sexï¼‰å±æ€§çš„ï¼šè¯¥ç±»ä¸­åªç»™å‡ºäº†ä¸€ç§â€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ç”¨äºè®¾ç½®â€œå§“åâ€(Name)å’Œâ€œå¹´é¾„â€(Age)çš„åˆå§‹å€¼ï¼Œé‚£å¦‚ä½•å¯¹â€œæ€§åˆ«â€(Sexï¼‰åˆå§‹åŒ–ï¼Ÿ
</span><span class='line'>
</span><span class='line'> Objective-C æœ‰ designated å’Œ secondary åˆå§‹åŒ–æ–¹æ³•çš„è§‚å¿µã€‚ designated åˆå§‹åŒ–æ–¹æ³•æ˜¯æä¾›æ‰€æœ‰çš„å‚æ•°ï¼Œsecondary åˆå§‹åŒ–æ–¹æ³•æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„é»˜è®¤å‚æ•°æ¥è°ƒç”¨ designated åˆå§‹åŒ–æ–¹æ³•çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸¾ä¾‹è¯´æ˜ï¼š
</span><span class='line'>
</span><span class='line'> 
</span><span class='line'>
</span><span class='line'> 
</span><span class='line'> ```Objective-C
</span><span class='line'>
</span><span class='line'>    // .mæ–‡ä»¶
</span><span class='line'>    // http://weibo.com/luohanchenyilong/
</span><span class='line'>    // https://github.com/ChenYilong
</span><span class='line'>    //
</span><span class='line'>
</span><span class='line'>    @implementation CYLUser
</span><span class='line'>
</span><span class='line'>    - (instancetype)initWithName:(NSString *)name
</span><span class='line'>                             age:(NSUInteger)age
</span><span class='line'>                             sex:(CYLSex)sex {
</span><span class='line'>        if(self = [super init]) {
</span><span class='line'>            _name = [name copy];
</span><span class='line'>            _age = age;
</span><span class='line'>            _sex = sex;
</span><span class='line'>        }
</span><span class='line'>        return self;
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    - (instancetype)initWithName:(NSString *)name
</span><span class='line'>                             age:(NSUInteger)age {
</span><span class='line'>        return [self initWithName:name age:age sex:nil];
</span><span class='line'>    }
</span><span class='line'>
</span><span class='line'>    @end</span></code></pre></td></tr></table></div></figure>


<p> ä¸Šé¢çš„ä»£ç ä¸­initWithName:age:sex: å°±æ˜¯ designated åˆå§‹åŒ–æ–¹æ³•ï¼Œå¦å¤–çš„æ˜¯ secondary åˆå§‹åŒ–æ–¹æ³•ã€‚å› ä¸ºä»…ä»…æ˜¯è°ƒç”¨ç±»å®ç°çš„ designated åˆå§‹åŒ–æ–¹æ³•ã€‚</p>

<p>  å› ä¸ºå‡ºé¢˜è€…æ²¡æœ‰ç»™å‡º.mæ–‡ä»¶ï¼Œæ‰€ä»¥æœ‰ä¸¤ç§çŒœæµ‹ï¼š1ï¼šæœ¬æ¥æ‰“ç®—åªè®¾è®¡ä¸€ä¸ªdesignated åˆå§‹åŒ–æ–¹æ³•ï¼Œä½†æ¼æ‰äº†â€œæ€§åˆ«â€(sexï¼‰å±æ€§ã€‚é‚£ä¹ˆæœ€ç»ˆçš„ä¿®æ”¹ä»£ç å°±æ˜¯ä¸Šæ–‡ç»™å‡ºçš„ç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ã€‚2ï¼šä¸æ‰“ç®—åˆå§‹æ—¶åˆå§‹åŒ–â€œæ€§åˆ«â€(sexï¼‰å±æ€§ï¼Œæ‰“ç®—åæœŸå†ä¿®æ”¹ï¼Œå¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆåº”è¯¥æŠŠâ€œæ€§åˆ«â€(sexï¼‰å±æ€§è®¾ä¸ºreadwriteå±æ€§ï¼Œæœ€ç»ˆç»™å‡ºçš„ä¿®æ”¹ä»£ç åº”è¯¥æ˜¯ï¼š</p>

<p> &#8220;`Objective-C</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ç¬¬äºŒç§ä¿®æ”¹æ–¹æ³•ï¼ˆåŸºäºç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•çš„åŸºç¡€ä¸Šï¼‰

typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};

@interface CYLUser : NSObject&lt;NSCopying&gt;

@property (nonatomic, copy, readonly) NSString *name;
@property (nonatomic, assign, readonly) NSUInteger age;
@property (nonatomic, assign, readwrite) CYLSex sex;

- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age;
+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;

@end
</code></pre>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'> .hä¸­æš´éœ² designated åˆå§‹åŒ–æ–¹æ³•ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å­ç±»åŒ– ï¼ˆæƒ³äº†è§£æ›´å¤šï¼Œè¯·æˆ³--ã€‹ [***ã€Šç¦…ä¸ Objective-C ç¼–ç¨‹è‰ºæœ¯ ï¼ˆZen and the Art of the Objective-C Craftsmanship ä¸­æ–‡ç¿»è¯‘ï¼‰ã€‹***](http://is.gd/OQ49zk)ã€‚ï¼‰
</span><span class='line'>
</span><span class='line'>
</span><span class='line'> 2. æŒ‰ç…§æ¥å£è®¾è®¡çš„æƒ¯ä¾‹ï¼Œå¦‚æœè®¾è®¡äº†â€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ï¼Œä¹Ÿåº”å½“æ­é…ä¸€ä¸ªå¿«æ·æ„é€ æ–¹æ³•ã€‚è€Œå¿«æ·æ„é€ æ–¹æ³•çš„è¿”å›å€¼ï¼Œå»ºè®®ä¸ºinstancetypeï¼Œä¸ºä¿æŒä¸€è‡´æ€§ï¼Œinitæ–¹æ³•å’Œå¿«æ·æ„é€ æ–¹æ³•çš„è¿”å›ç±»å‹æœ€å¥½éƒ½ç”¨instancetypeã€‚
</span><span class='line'> 2. å¦‚æœåŸºäºç¬¬ä¸€ç§ä¿®æ”¹æ–¹æ³•ï¼šæ—¢ç„¶è¯¥ç±»ä¸­å·²ç»æœ‰ä¸€ä¸ªâ€œåˆå§‹åŒ–æ–¹æ³•â€ (initializer)ï¼Œç”¨äºè®¾ç½®â€œå§“åâ€(Name)ã€â€œå¹´é¾„â€(Age)å’Œâ€œæ€§åˆ«â€(Sexï¼‰çš„åˆå§‹å€¼:
</span><span class='line'>é‚£ä¹ˆåœ¨è®¾è®¡å¯¹åº”@propertyæ—¶å°±åº”è¯¥å°½é‡ä½¿ç”¨ä¸å¯å˜çš„å¯¹è±¡ï¼šå…¶ä¸‰ä¸ªå±æ€§éƒ½åº”è¯¥è®¾ä¸ºâ€œåªè¯»â€ã€‚ç”¨åˆå§‹åŒ–æ–¹æ³•è®¾ç½®å¥½å±æ€§å€¼ä¹‹åï¼Œå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä»éœ€å£°æ˜å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€ã€‚äºæ˜¯å¯ä»¥æŠŠå±æ€§çš„å®šä¹‰æ”¹æˆè¿™æ ·
</span><span class='line'>
</span><span class='line'>        @property (nonatomic, copy, readonly) NSString *name;
</span><span class='line'>        @property (nonatomic, assign, readonly) NSUInter age;
</span><span class='line'>        @property (nonatomic, assign, readonly) CYLSex sex;
</span><span class='line'>      ç”±äºæ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶åˆ›å»ºå¯¹åº”çš„â€œè®¾ç½®æ–¹æ³•â€ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å†™ä¸Šè¿™äº›å±æ€§çš„è¯­ä¹‰ï¼Œä»¥æ­¤è¡¨æ˜åˆå§‹åŒ–æ–¹æ³•åœ¨è®¾ç½®è¿™äº›å±æ€§å€¼æ—¶æ‰€ç”¨çš„æ–¹å¼ã€‚è¦æ˜¯ä¸å†™æ˜è¯­ä¹‰çš„è¯ï¼Œè¯¥ç±»çš„è°ƒç”¨è€…å°±ä¸çŸ¥é“åˆå§‹åŒ–æ–¹æ³•é‡Œä¼šæ‹·è´è¿™äº›å±æ€§ï¼Œä»–ä»¬æœ‰å¯èƒ½ä¼šåœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰è‡ªè¡Œæ‹·è´å±æ€§å€¼ã€‚è¿™ç§æ“ä½œå¤šä½™è€Œä¸”ä½æ•ˆã€‚
</span><span class='line'> 2. `initUserModelWithUserName`å¦‚æœæ”¹ä¸º`initWithName`ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚
</span><span class='line'> 2. `UserModel`å¦‚æœæ”¹ä¸º`User`ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚
</span><span class='line'> 2. `UserSex`å¦‚æœæ”¹ä¸º`Sex`ä¼šæ›´åŠ ç®€æ´ï¼Œè€Œä¸”è¶³å¤Ÿæ¸…æ™°ã€‚
</span><span class='line'>
</span><span class='line'>####***ç¡¬ä¼¤éƒ¨åˆ†***
</span><span class='line'>
</span><span class='line'> 1. åœ¨-å’Œ(void)ä¹‹é—´åº”è¯¥æœ‰ä¸€ä¸ªç©ºæ ¼
</span><span class='line'> 3. enumä¸­é©¼å³°å‘½åæ³•å’Œä¸‹åˆ’çº¿å‘½åæ³•æ··ç”¨é”™è¯¯ï¼šæšä¸¾ç±»å‹çš„å‘½åè§„åˆ™å’Œå‡½æ•°çš„å‘½åè§„åˆ™ç›¸åŒï¼šå‘½åæ—¶ä½¿ç”¨é©¼å³°å‘½åæ³•ï¼Œå‹¿ä½¿ç”¨ä¸‹åˆ’çº¿å‘½åæ³•ã€‚
</span><span class='line'> 3. enumå·¦æ‹¬å·å‰åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œæˆ–è€…å°†å·¦æ‹¬å·æ¢åˆ°ä¸‹ä¸€è¡Œ
</span><span class='line'> 4. enumå³æ‹¬å·ååŠ ä¸€ä¸ªç©ºæ ¼
</span><span class='line'> 2. `UserModel :NSObject` åº”ä¸º`UserModel : NSObject`ï¼Œä¹Ÿå°±æ˜¯`:`å³ä¾§å°‘äº†ä¸€ä¸ªç©ºæ ¼ã€‚
</span><span class='line'> 2. @interfaceä¸@propertyå±æ€§å£°æ˜ä¸­é—´åº”å½“é—´éš”ä¸€è¡Œã€‚
</span><span class='line'> 2. ä¸¤ä¸ªæ–¹æ³•å®šä¹‰ä¹‹é—´ä¸éœ€è¦æ¢è¡Œï¼Œæœ‰æ—¶ä¸ºäº†åŒºåˆ†æ–¹æ³•çš„åŠŸèƒ½ä¹Ÿå¯é—´éš”ä¸€è¡Œï¼Œä½†ç¤ºä¾‹ä»£ç ä¸­é—´éš”äº†ä¸¤è¡Œã€‚
</span><span class='line'> 9. 
</span><span class='line'>  `-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;`æ–¹æ³•ä¸­æ–¹æ³•åä¸å‚æ•°ä¹‹é—´å¤šäº†ç©ºæ ¼ã€‚è€Œä¸”`-` ä¸`(id)`ä¹‹é—´å°‘äº†ç©ºæ ¼ã€‚
</span><span class='line'> 10. 
</span><span class='line'>  `-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;`æ–¹æ³•ä¸­æ–¹æ³•åä¸å‚æ•°ä¹‹é—´å¤šäº†ç©ºæ ¼ï¼š`(NSString*)name`å‰å¤šäº†ç©ºæ ¼ã€‚
</span><span class='line'> 10. 
</span><span class='line'>  `-(id)initUserModelWithUserName: (NSString*)name withAge:(int)age;`æ–¹æ³•ä¸­`(NSString*)name`,åº”ä¸º`(NSString *)name`ï¼Œå°‘äº†ç©ºæ ¼ã€‚ 
</span><span class='line'> 7.  doLogInæ–¹æ³•å‘½åä¸æ¸…æ™°ï¼šç¬”è€…çŒœæµ‹æ˜¯loginçš„æ„æ€ï¼Œåº”è¯¥æ˜¯ç²—å¿ƒæ‰‹è¯¯é€ æˆçš„ã€‚
</span><span class='line'> 2. ç¬¬äºŒä¸ª@propertyä¸­assignå’Œnonatomicè°ƒæ¢ä½ç½®ã€‚
</span><span class='line'>
</span><span class='line'>###2. ä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Œç›¸æ¯” assign æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ
</span><span class='line'>ä»€ä¹ˆæƒ…å†µä½¿ç”¨ weak å…³é”®å­—ï¼Ÿ
</span><span class='line'>
</span><span class='line'>
</span><span class='line'> 1. åœ¨ARCä¸­,åœ¨æœ‰å¯èƒ½å‡ºç°å¾ªç¯å¼•ç”¨çš„æ—¶å€™,å¾€å¾€è¦é€šè¿‡è®©å…¶ä¸­ä¸€ç«¯ä½¿ç”¨weakæ¥è§£å†³,æ¯”å¦‚:delegateä»£ç†å±æ€§
</span><span class='line'>
</span><span class='line'> 2. è‡ªèº«å·²ç»å¯¹å®ƒè¿›è¡Œä¸€æ¬¡å¼ºå¼•ç”¨,æ²¡æœ‰å¿…è¦å†å¼ºå¼•ç”¨ä¸€æ¬¡,æ­¤æ—¶ä¹Ÿä¼šä½¿ç”¨weak,è‡ªå®šä¹‰IBOutletæ§ä»¶å±æ€§ä¸€èˆ¬ä¹Ÿä½¿ç”¨weakï¼›å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨strongã€‚åœ¨ä¸‹æ–‡ä¹Ÿæœ‰è®ºè¿°ï¼š***ã€ŠIBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?ã€‹***
</span><span class='line'>
</span><span class='line'>ä¸åŒç‚¹ï¼š
</span><span class='line'> 
</span><span class='line'> 1. `weak` æ­¤ç‰¹è´¨è¡¨æ˜è¯¥å±æ€§å®šä¹‰äº†ä¸€ç§â€œéæ‹¥æœ‰å…³ç³»â€ (nonowning relationship)ã€‚ä¸ºè¿™ç§å±æ€§è®¾ç½®æ–°å€¼æ—¶ï¼Œè®¾ç½®æ–¹æ³•æ—¢ä¸ä¿ç•™æ–°å€¼ï¼Œä¹Ÿä¸é‡Šæ”¾æ—§å€¼ã€‚æ­¤ç‰¹è´¨åŒassignç±»ä¼¼ï¼Œ
</span><span class='line'>ç„¶è€Œåœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚
</span><span class='line'>è€Œ `assign` çš„â€œè®¾ç½®æ–¹æ³•â€åªä¼šæ‰§è¡Œé’ˆå¯¹â€œçº¯é‡ç±»å‹â€ (scalar typeï¼Œä¾‹å¦‚ CGFloat æˆ– 
</span><span class='line'>NSlnteger ç­‰)çš„ç®€å•èµ‹å€¼æ“ä½œã€‚
</span><span class='line'>
</span><span class='line'> 2. assigin å¯ä»¥ç”¨éOCå¯¹è±¡,è€Œweakå¿…é¡»ç”¨äºOCå¯¹è±¡
</span><span class='line'>
</span><span class='line'>###3. æ€ä¹ˆç”¨ copy å…³é”®å­—ï¼Ÿ
</span><span class='line'>ç”¨é€”ï¼š
</span><span class='line'>
</span><span class='line'> 1. NSStringã€NSArrayã€NSDictionary ç­‰ç­‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼›
</span><span class='line'> 2. blockä¹Ÿç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œå…·ä½“åŸå› è§[å®˜æ–¹æ–‡æ¡£ï¼š***Objects Use Properties to Keep Track of Blocks***](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW12)ï¼š
</span><span class='line'>
</span><span class='line'> blockä½¿ç”¨copyæ˜¯ä»MRCé—ç•™ä¸‹æ¥çš„â€œä¼ ç»Ÿâ€,åœ¨MRCä¸­,æ–¹æ³•å†…éƒ¨çš„blockæ˜¯åœ¨æ ˆåŒºçš„,ä½¿ç”¨copyå¯ä»¥æŠŠå®ƒæ”¾åˆ°å †åŒº.åœ¨ARCä¸­å†™ä¸å†™éƒ½è¡Œï¼šå¯¹äºblockä½¿ç”¨copyè¿˜æ˜¯strongæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†å†™ä¸Šcopyä¹Ÿæ— ä¼¤å¤§é›…ï¼Œè¿˜èƒ½æ—¶åˆ»æé†’æˆ‘ä»¬ï¼šç¼–è¯‘å™¨è‡ªåŠ¨å¯¹blockè¿›è¡Œäº†copyæ“ä½œã€‚
</span><span class='line'>
</span><span class='line'> ![enter image description here](http://i.imgur.com/VlVKl8L.png)
</span><span class='line'>
</span><span class='line'>ä¸‹é¢åšä¸‹è§£é‡Šï¼š
</span><span class='line'>copyæ­¤ç‰¹è´¨æ‰€è¡¨è¾¾çš„æ‰€å±å…³ç³»ä¸strongç±»ä¼¼ã€‚ç„¶è€Œè®¾ç½®æ–¹æ³•å¹¶ä¸ä¿ç•™æ–°å€¼ï¼Œè€Œæ˜¯å°†å…¶â€œæ‹·è´â€ (copy)ã€‚
</span><span class='line'>å½“å±æ€§ç±»å‹ä¸ºNSStringæ—¶ï¼Œç»å¸¸ç”¨æ­¤ç‰¹è´¨æ¥ä¿æŠ¤å…¶å°è£…æ€§ï¼Œå› ä¸ºä¼ é€’ç»™è®¾ç½®æ–¹æ³•çš„æ–°å€¼æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ªNSMutableStringç±»çš„å®ä¾‹ã€‚è¿™ä¸ªç±»æ˜¯NSStringçš„å­ç±»ï¼Œè¡¨ç¤ºä¸€ç§å¯ä¿®æ”¹å…¶å€¼çš„å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶è‹¥æ˜¯ä¸æ‹·è´å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè®¾ç½®å®Œå±æ€§ä¹‹åï¼Œå­—ç¬¦ä¸²çš„å€¼å°±å¯èƒ½ä¼šåœ¨å¯¹è±¡ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹é­äººæ›´æ”¹ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å°±è¦æ‹·è´ä¸€ä»½â€œä¸å¯å˜â€ (immutable)çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ã€‚åªè¦å®ç°å±æ€§æ‰€ç”¨çš„å¯¹è±¡æ˜¯â€œå¯å˜çš„â€ (mutable)ï¼Œå°±åº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&gt; ç”¨@propertyå£°æ˜ NSStringã€NSArrayã€NSDictionary ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼šNSMutableStringã€NSMutableArrayã€NSMutableDictionaryï¼Œä»–ä»¬ä¹‹é—´å¯èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œä¸ºç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ï¼Œåº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚
</span><span class='line'> 
</span><span class='line'>è¯¥é—®é¢˜åœ¨ä¸‹æ–‡ä¸­ä¹Ÿæœ‰è®ºè¿°ï¼š***ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ***
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>###4. è¿™ä¸ªå†™æ³•ä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼š `@property (copy) NSMutableArray *array;`
</span><span class='line'>ä¸¤ä¸ªé—®é¢˜ï¼š1ã€æ·»åŠ ,åˆ é™¤,ä¿®æ”¹æ•°ç»„å†…çš„å…ƒç´ çš„æ—¶å€™,ç¨‹åºä¼šå› ä¸ºæ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•è€Œå´©æºƒ.å› ä¸ºcopyå°±æ˜¯å¤åˆ¶ä¸€ä¸ªä¸å¯å˜NSArrayçš„å¯¹è±¡ï¼›2ã€ä½¿ç”¨äº†atomicå±æ€§ä¼šä¸¥é‡å½±å“æ€§èƒ½ ï¼› 
</span><span class='line'>
</span><span class='line'>ç¬¬1æ¡çš„ç›¸å…³åŸå› åœ¨ä¸‹æ–‡ä¸­æœ‰è®ºè¿°***ã€Šç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿã€‹*** ä»¥åŠä¸Šæ–‡***ã€Šæ€ä¹ˆç”¨ copy å…³é”®å­—ï¼Ÿã€‹***ä¹Ÿæœ‰è®ºè¿°ã€‚
</span><span class='line'>
</span><span class='line'>æ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ
</span><span class='line'>
</span><span class='line'> 
</span><span class='line'> </span></code></pre></td></tr></table></div></figure>


<p>Objective-C
// .hæ–‡ä»¶
// <a href="http://weibo.com/luohanchenyilong/">http://weibo.com/luohanchenyilong/</a>
// <a href="https://github.com/ChenYilong">https://github.com/ChenYilong</a>
// ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ</p>

<p>@property (nonatomic, copy) NSMutableArray *mutableArray;</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Objective-C
// .mæ–‡ä»¶
// <a href="http://weibo.com/luohanchenyilong/">http://weibo.com/luohanchenyilong/</a>
// <a href="https://github.com/ChenYilong">https://github.com/ChenYilong</a>
// ä¸‹é¢çš„ä»£ç å°±ä¼šå‘ç”Ÿå´©æºƒ</p>

<p>NSMutableArray *array = [NSMutableArray arrayWithObjects:@1,@2,nil];
self.mutableArray = array;
[self.mutableArray removeObjectAtIndex:0];</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>æ¥ä¸‹æ¥å°±ä¼šå¥”æºƒï¼š
</span><span class='line'>
</span><span class='line'> </span></code></pre></td></tr></table></div></figure>


<p>Objective-C
 -[__NSArrayI removeObjectAtIndex:]: unrecognized selector sent to instance 0x7fcd1bc30460</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>ç¬¬2æ¡åŸå› ï¼Œå¦‚ä¸‹ï¼š
</span><span class='line'>
</span><span class='line'>&gt; è¯¥å±æ€§ä½¿ç”¨äº†åŒæ­¥é”ï¼Œä¼šåœ¨åˆ›å»ºæ—¶ç”Ÿæˆä¸€äº›é¢å¤–çš„ä»£ç ç”¨äºå¸®åŠ©ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºï¼Œè¿™ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œé€šè¿‡å£°æ˜nonatomicå¯ä»¥èŠ‚çœè¿™äº›è™½ç„¶å¾ˆå°ä½†æ˜¯ä¸å¿…è¦é¢å¤–å¼€é”€ã€‚
</span><span class='line'>
</span><span class='line'>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±ç¼–è¯‘å™¨æ‰€åˆæˆçš„æ–¹æ³•ä¼šé€šè¿‡é”å®šæœºåˆ¶ç¡®ä¿å…¶åŸå­æ€§(atomicity)ã€‚å¦‚æœå±æ€§å…·å¤‡nonatomicç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨åŒæ­¥é”ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ²¡æœ‰åä¸ºâ€œatomicâ€çš„ç‰¹è´¨(å¦‚æœæŸå±æ€§ä¸å…·å¤‡nonatomicç‰¹è´¨ï¼Œé‚£å®ƒå°±æ˜¯â€œåŸå­çš„â€(atomic))ã€‚
</span><span class='line'>
</span><span class='line'>åœ¨iOSå¼€å‘ä¸­ï¼Œä½ ä¼šå‘ç°ï¼Œå‡ ä¹æ‰€æœ‰å±æ€§éƒ½å£°æ˜ä¸ºnonatomicã€‚
</span><span class='line'>
</span><span class='line'>ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸è¦æ±‚å±æ€§å¿…é¡»æ˜¯â€œåŸå­çš„â€ï¼Œå› ä¸ºè¿™å¹¶ä¸èƒ½ä¿è¯â€œçº¿ç¨‹å®‰å…¨â€ ( thread safety)ï¼Œè‹¥è¦å®ç°â€œçº¿ç¨‹å®‰å…¨â€çš„æ“ä½œï¼Œè¿˜éœ€é‡‡ç”¨æ›´ä¸ºæ·±å±‚çš„é”å®šæœºåˆ¶æ‰è¡Œã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨è¿ç»­å¤šæ¬¡è¯»å–æŸå±æ€§å€¼çš„è¿‡ç¨‹ä¸­æœ‰åˆ«çš„çº¿ç¨‹åœ¨åŒæ—¶æ”¹å†™è¯¥å€¼ï¼Œé‚£ä¹ˆå³ä¾¿å°†å±æ€§å£°æ˜ä¸ºatomicï¼Œä¹Ÿè¿˜æ˜¯ä¼šè¯»åˆ°ä¸åŒçš„å±æ€§å€¼ã€‚
</span><span class='line'>
</span><span class='line'>å› æ­¤ï¼Œå¼€å‘iOSç¨‹åºæ—¶ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨nonatomicå±æ€§ã€‚ä½†æ˜¯åœ¨å¼€å‘Mac OS Xç¨‹åºæ—¶ï¼Œä½¿ç”¨
</span><span class='line'>atomicå±æ€§é€šå¸¸éƒ½ä¸ä¼šæœ‰æ€§èƒ½ç“¶é¢ˆã€‚
</span><span class='line'>
</span><span class='line'>###5. å¦‚ä½•è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Ÿå¦‚ä½•é‡å†™å¸¦ copy å…³é”®å­—çš„ setterï¼Ÿ
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&gt; è‹¥æƒ³ä»¤è‡ªå·±æ‰€å†™çš„å¯¹è±¡å…·æœ‰æ‹·è´åŠŸèƒ½ï¼Œåˆ™éœ€å®ç°NSCopyingåè®®ã€‚å¦‚æœè‡ªå®šä¹‰çš„å¯¹è±¡åˆ†ä¸ºå¯å˜ç‰ˆæœ¬ä¸ä¸å¯å˜ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±è¦åŒæ—¶å®ç°NSCopyiogä¸NSMutableCopyingåè®®ã€‚
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>å…·ä½“æ­¥éª¤ï¼š
</span><span class='line'>
</span><span class='line'> 1. éœ€å£°æ˜è¯¥ç±»éµä»NSCopyingåè®®
</span><span class='line'> 2. å®ç°NSCopyingåè®®ã€‚è¯¥åè®®åªæœ‰ä¸€ä¸ªæ–¹æ³•: 
</span><span class='line'>
</span><span class='line'> ```Objective-C
</span><span class='line'>- (id)copyWithZone: (NSZone*) zone</span></code></pre></td></tr></table></div></figure>


<p>æ³¨æ„ï¼šä¸€æåˆ°è®©è‡ªå·±çš„ç±»ç”¨ copy ä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬æ€»æ˜¯æƒ³è¦†å†™copyæ–¹æ³•ï¼Œå…¶å®çœŸæ­£éœ€è¦å®ç°çš„å´æ˜¯â€œcopyWithZoneâ€æ–¹æ³•ã€‚</p>

<p>ä»¥ç¬¬ä¸€é¢˜çš„ä»£ç ä¸ºä¾‹ï¼š</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä¿®æ”¹å®Œçš„ä»£ç 

typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};

@interface CYLUser : NSObject&lt;NSCopying&gt;

@property (nonatomic, copy, readonly) NSString *name;
@property (nonatomic, assign, readonly) NSUInteger age;
@property (nonatomic, assign, readonly) CYLSex sex;

- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;

@end
</code></pre>

<p>ç„¶åå®ç°åè®®ä¸­è§„å®šçš„æ–¹æ³•ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">copyWithZone:</span><span class="p">(</span><span class="n">NSZone</span> <span class="o">*</span><span class="p">)</span><span class="nv">zone</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">CYLUser</span> <span class="o">*</span><span class="k">copy</span> <span class="o">=</span> <span class="p">[[[</span><span class="nb">self</span> <span class="k">copy</span><span class="p">]</span> <span class="nl">allocWithZone</span><span class="p">:</span><span class="n">zone</span><span class="p">]</span>
</span><span class='line'>                   <span class="nl">initWithName</span><span class="p">:</span><span class="n">_name</span>
</span><span class='line'>                                <span class="nl">age</span><span class="p">:</span><span class="n">_age</span>
</span><span class='line'>                                <span class="nl">sex</span><span class="p">:</span><span class="n">_sex</span><span class="p">];</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">copy</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä½†åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œä¸å¯èƒ½è¿™ä¹ˆç®€å•ï¼Œé‡åˆ°æ›´å¤æ‚ä¸€ç‚¹ï¼Œæ¯”å¦‚ç±»å¯¹è±¡ä¸­çš„æ•°æ®ç»“æ„å¯èƒ½å¹¶æœªåœ¨åˆå§‹åŒ–æ–¹æ³•ä¸­è®¾ç½®å¥½ï¼Œéœ€è¦å¦è¡Œè®¾ç½®ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚CYLUserä¸­å«æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œä¸å…¶ä»–CYLUserå¯¹è±¡å»ºç«‹æˆ–è§£é™¤æœ‹å‹å…³ç³»çš„é‚£äº›æ–¹æ³•éƒ½éœ€è¦æ“ä½œè¿™ä¸ªæ•°ç»„ã€‚é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¾—æŠŠè¿™ä¸ªåŒ…å«æœ‹å‹å¯¹è±¡çš„æ•°ç»„ä¹Ÿä¸€å¹¶æ‹·è´è¿‡æ¥ã€‚ä¸‹é¢åˆ—å‡ºäº†å®ç°æ­¤åŠŸèƒ½æ‰€éœ€çš„å…¨éƒ¨ä»£ç :</p>

<pre><code>// .hæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// ä»¥ç¬¬ä¸€é¢˜ã€Šé£æ ¼çº é”™é¢˜ã€‹é‡Œçš„ä»£ç ä¸ºä¾‹

typedef NS_ENUM(NSInteger, CYLSex) {
    CYLSexMan,
    CYLSexWoman
};

@interface CYLUser : NSObject&lt;NSCopying&gt;

@property (nonatomic, copy, readonly) NSString *name;
@property (nonatomic, assign, readonly) NSUInteger age;
@property (nonatomic, assign, readonly) CYLSex sex;

- (instancetype)initWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
+ (instancetype)userWithName:(NSString *)name age:(NSUInteger)age sex:(CYLSex)sex;
- (void)addFriend:(CYLUser *)user;
- (void)removeFriend:(CYLUser *)user;

@end
</code></pre>

<p>// .mæ–‡ä»¶</p>

<pre><code>// .mæ–‡ä»¶
// http://weibo.com/luohanchenyilong/
// https://github.com/ChenYilong
// 

@implementation CYLUser {
    NSMutableSet *_friends;
}

- (void)setName:(NSString *)name {
    _name = [name copy];
}

- (instancetype)initWithName:(NSString *)name 
                             age:(NSUInteger)age 
                             sex:(CYLSex)sex {
     if(self = [super init]) {
        _name = [name copy];
        _age = age;
        _sex = sex;
        _friends = [[NSMutableSet alloc] init];
     }
     return self;
}

- (void)addFriend:(CYLUser *)user {
    [_friends addObject:user];
}

- (void)removeFriend:(CYLUser *)user {
    [_friends removeObject:person];
}

- (id)copyWithZone:(NSZone *)zone {
    CYLUser *copy = [[[self copy] allocWithZone:zone] 
                     initWithName:_name
                                  age:_age
                                  sex:_sex];
    copy-&gt;_friends = [_friends mutableCopy];
    return copy;
}

- (id)deepCopy {
    CYLUser *copy = [[[self copy] allocWithZone:zone] 
                     initWithName:_name
                                  age:_age
                                  sex:_sex];
    copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends 
                                             copyItems:YES];
    return copy;
}

@end
</code></pre>

<p>ä»¥ä¸Šåšæ³•èƒ½æ»¡è¶³åŸºæœ¬çš„éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºé™·ï¼š</p>

<blockquote><p>å¦‚æœä½ æ‰€å†™çš„å¯¹è±¡éœ€è¦æ·±æ‹·è´ï¼Œé‚£ä¹ˆå¯è€ƒè™‘æ–°å¢ä¸€ä¸ªä¸“é—¨æ‰§è¡Œæ·±æ‹·è´çš„æ–¹æ³•ã€‚</p></blockquote>

<p>ã€æ³¨ï¼šæ·±æµ…æ‹·è´çš„æ¦‚å¿µï¼Œåœ¨ä¸‹æ–‡ä¸­æœ‰ä»‹ç»ï¼Œè¯¦è§ä¸‹æ–‡çš„ï¼š<strong><em>ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</em></strong>ã€‘</p>

<p>åœ¨ä¾‹å­ä¸­ï¼Œå­˜æ”¾æœ‹å‹å¯¹è±¡çš„setæ˜¯ç”¨â€œcopyWithZooe:â€æ–¹æ³•æ¥æ‹·è´çš„ï¼Œè¿™ç§æµ…æ‹·è´æ–¹å¼ä¸ä¼šé€ä¸ªå¤åˆ¶setä¸­çš„å…ƒç´ ã€‚è‹¥éœ€è¦æ·±æ‹·è´çš„è¯ï¼Œåˆ™å¯åƒä¸‹é¢è¿™æ ·ï¼Œç¼–å†™ä¸€ä¸ªä¸“ä¾›æ·±æ‹·è´æ‰€ç”¨çš„æ–¹æ³•:</p>

<pre><code>- (id)deepCopy {
    CYLUser *copy = [[[self copy] allocWithZone:zone] 
                     initWithName:_name
                                  age:_age
                                  sex:_sex];
    copy-&gt;_friends = [[NSMutableSet alloc] initWithSet:_friends 
                                             copyItems:YES];
    return copy;
}
</code></pre>

<p>è‡³äº<strong><em>å¦‚ä½•é‡å†™å¸¦ copy å…³é”®å­—çš„ setter</em></strong>è¿™ä¸ªé—®é¢˜ï¼Œ</p>

<p>å¦‚æœæŠ›å¼€æœ¬ä¾‹æ¥å›ç­”çš„è¯ï¼Œå¦‚ä¸‹ï¼š</p>

<pre><code>- (void)setName:(NSString *)name {
    _name = [name copy];
}
</code></pre>

<p>å¦‚æœå•å•å°±ä¸Šæ–‡çš„ä»£ç è€Œè¨€ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¹Ÿä¸èƒ½é‡å†™nameçš„ setter ï¼šç”±äºæ˜¯nameæ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸ä¼šä¸ºå…¶åˆ›å»ºå¯¹åº”çš„â€œè®¾ç½®æ–¹æ³•â€ï¼Œç”¨åˆå§‹åŒ–æ–¹æ³•è®¾ç½®å¥½å±æ€§å€¼ä¹‹åï¼Œå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚ï¼ˆ åœ¨æœ¬ä¾‹ä¸­ï¼Œä¹‹æ‰€ä»¥è¿˜è¦å£°æ˜å±æ€§çš„â€œå†…å­˜ç®¡ç†è¯­ä¹‰â€&ndash;copyï¼Œæ˜¯å› ä¸ºï¼šå¦‚æœä¸å†™copyï¼Œè¯¥ç±»çš„è°ƒç”¨è€…å°±ä¸çŸ¥é“åˆå§‹åŒ–æ–¹æ³•é‡Œä¼šæ‹·è´è¿™äº›å±æ€§ï¼Œä»–ä»¬æœ‰å¯èƒ½ä¼šåœ¨è°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ä¹‹å‰è‡ªè¡Œæ‹·è´å±æ€§å€¼ã€‚è¿™ç§æ“ä½œå¤šä½™è€Œä½æ•ˆã€‚ï¼‰ã€‚</p>

<p>é‚£å¦‚ä½•ç¡®ä¿nameè¢«copyï¼Ÿåœ¨åˆå§‹åŒ–æ–¹æ³•(initializer)ä¸­åšï¼š</p>

<pre><code>- (instancetype)initWithName:(NSString *)name 
                             age:(NSUInteger)age 
                             sex:(CYLSex)sex {
     if(self = [super init]) {
        _name = [name copy];
        _age = age;
        _sex = sex;
        _friends = [[NSMutableSet alloc] init];
     }
     return self;
}
</code></pre>

<h3>6. @property çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿivarã€getterã€setter æ˜¯å¦‚ä½•ç”Ÿæˆå¹¶æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­çš„</h3>

<p><strong>@property çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>

<blockquote><p>@property = ivar + getter + setter;</p></blockquote>

<p>ä¸‹é¢è§£é‡Šä¸‹ï¼š</p>

<blockquote><p>â€œå±æ€§â€ (property)æœ‰ä¸¤å¤§æ¦‚å¿µï¼šivarï¼ˆå®ä¾‹å˜é‡ï¼‰ã€å­˜å–æ–¹æ³•ï¼ˆaccess method ï¼ getter + setterï¼‰ã€‚</p></blockquote>

<p>â€œå±æ€§â€ (property)ä½œä¸º Objective-C çš„ä¸€é¡¹ç‰¹æ€§ï¼Œä¸»è¦çš„ä½œç”¨å°±åœ¨äºå°è£…å¯¹è±¡ä¸­çš„æ•°æ®ã€‚ Objective-C å¯¹è±¡é€šå¸¸ä¼šæŠŠå…¶æ‰€éœ€è¦çš„æ•°æ®ä¿å­˜ä¸ºå„ç§å®ä¾‹å˜é‡ã€‚å®ä¾‹å˜é‡ä¸€èˆ¬é€šè¿‡â€œå­˜å–æ–¹æ³•â€(access method)æ¥è®¿é—®ã€‚å…¶ä¸­ï¼Œâ€œè·å–æ–¹æ³•â€ (getter)ç”¨äºè¯»å–å˜é‡å€¼ï¼Œè€Œâ€œè®¾ç½®æ–¹æ³•â€ (setter)ç”¨äºå†™å…¥å˜é‡å€¼ã€‚è¿™ä¸ªæ¦‚å¿µå·²ç»å®šå‹ï¼Œå¹¶ä¸”ç»ç”±â€œå±æ€§â€è¿™ä¸€ç‰¹æ€§è€Œæˆä¸º<code>Objective-C 2.0</code>çš„ä¸€éƒ¨åˆ†ã€‚
è€Œåœ¨æ­£è§„çš„ Objective-C ç¼–ç é£æ ¼ä¸­ï¼Œå­˜å–æ–¹æ³•æœ‰ç€ä¸¥æ ¼çš„å‘½åè§„èŒƒã€‚
æ­£å› ä¸ºæœ‰äº†è¿™ç§ä¸¥æ ¼çš„å‘½åè§„èŒƒï¼Œæ‰€ä»¥ Objective-C è¿™é—¨è¯­è¨€æ‰èƒ½æ ¹æ®åç§°è‡ªåŠ¨åˆ›å»ºå‡ºå­˜å–æ–¹æ³•ã€‚å…¶å®ä¹Ÿå¯ä»¥æŠŠå±æ€§å½“åšä¸€ç§å…³é”®å­—ï¼Œå…¶è¡¨ç¤º:</p>

<blockquote><p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å†™å‡ºä¸€å¥—å­˜å–æ–¹æ³•ï¼Œç”¨ä»¥è®¿é—®ç»™å®šç±»å‹ä¸­å…·æœ‰ç»™å®šåç§°çš„å˜é‡ã€‚
æ‰€ä»¥ä½ ä¹Ÿå¯ä»¥è¿™ä¹ˆè¯´ï¼š</p>

<p>@property = getter + setter;</p></blockquote>

<p>ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªç±»ï¼š</p>

<pre><code>@interface Person : NSObject 
@property NSString *firstName; 
@property NSString *lastName; 
@end 
</code></pre>

<p>ä¸Šè¿°ä»£ç å†™å‡ºæ¥çš„ç±»ä¸ä¸‹é¢è¿™ç§å†™æ³•ç­‰æ•ˆï¼š</p>

<pre><code>@interface Person : NSObject 
- (NSString *)firstName; 
- (void)setFirstName:(NSString *)firstName; 
- (NSString *)lastName; 
- (void)setLastName:(NSString *)lastName; 
@end 
</code></pre>

<p><strong>ivarã€getterã€setter æ˜¯å¦‚ä½•ç”Ÿæˆå¹¶æ·»åŠ åˆ°è¿™ä¸ªç±»ä¸­çš„?</strong></p>

<blockquote><p>â€œè‡ªåŠ¨åˆæˆâ€( autosynthesis)</p></blockquote>

<p>å®Œæˆå±æ€§å®šä¹‰åï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç¼–å†™è®¿é—®è¿™äº›å±æ€§æ‰€éœ€çš„æ–¹æ³•ï¼Œæ­¤è¿‡ç¨‹å«åšâ€œè‡ªåŠ¨åˆæˆâ€( autosynthesis)ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”±ç¼–è¯‘
å™¨åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œæ‰€ä»¥ç¼–è¾‘å™¨é‡Œçœ‹ä¸åˆ°è¿™äº›â€œåˆæˆæ–¹æ³•â€(synthesized method)çš„æºä»£ç ã€‚é™¤äº†ç”Ÿæˆæ–¹æ³•ä»£ç  getterã€setter ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜è¦è‡ªåŠ¨å‘ç±»ä¸­æ·»åŠ é€‚å½“ç±»å‹çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨å±æ€§åå‰é¢åŠ ä¸‹åˆ’çº¿ï¼Œä»¥æ­¤ä½œä¸ºå®ä¾‹å˜é‡çš„åå­—ã€‚åœ¨å‰ä¾‹ä¸­ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œå…¶åç§°åˆ†åˆ«ä¸º
<code>_firstName</code>ä¸<code>_lastName</code>ã€‚ä¹Ÿå¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡
@synthesizeè¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—.</p>

<pre><code>@implementation Person 
@synthesize firstName = _myFirstName; 
@synthesize lastName = myLastName; 
@end 
</code></pre>

<p>æˆ‘ä¸ºäº†ææ¸…å±æ€§æ˜¯æ€ä¹ˆå®ç°çš„,æ›¾ç»åç¼–è¯‘è¿‡ç›¸å…³çš„ä»£ç ,ä»–å¤§è‡´ç”Ÿæˆäº†äº”ä¸ªä¸œè¥¿</p>

<ol>
<li><code>OBJC_IVAR_$ç±»å$å±æ€§åç§°</code> ï¼šè¯¥å±æ€§çš„â€œåç§»é‡â€ (offset)ï¼Œè¿™ä¸ªåç§»é‡æ˜¯â€œç¡¬ç¼–ç â€ (hardcode)ï¼Œè¡¨ç¤ºè¯¥å˜é‡è·ç¦»å­˜æ”¾å¯¹è±¡çš„å†…å­˜åŒºåŸŸçš„èµ·å§‹åœ°å€æœ‰å¤šè¿œã€‚</li>
<li>setterä¸getteræ–¹æ³•å¯¹åº”çš„å®ç°å‡½æ•°</li>
<li><code>ivar_list</code> ï¼šæˆå‘˜å˜é‡åˆ—è¡¨</li>
<li><code>method_list</code> ï¼šæ–¹æ³•åˆ—è¡¨</li>
<li><code>prop_list</code> ï¼šå±æ€§åˆ—è¡¨</li>
</ol>


<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬æ¯æ¬¡åœ¨å¢åŠ ä¸€ä¸ªå±æ€§,ç³»ç»Ÿéƒ½ä¼šåœ¨<code>ivar_list</code>ä¸­æ·»åŠ ä¸€ä¸ªæˆå‘˜å˜é‡çš„æè¿°,åœ¨<code>method_list</code>ä¸­å¢åŠ setterä¸getteræ–¹æ³•çš„æè¿°,åœ¨å±æ€§åˆ—è¡¨ä¸­å¢åŠ ä¸€ä¸ªå±æ€§çš„æè¿°,ç„¶åè®¡ç®—è¯¥å±æ€§åœ¨å¯¹è±¡ä¸­çš„åç§»é‡,ç„¶åç»™å‡ºsetterä¸getteræ–¹æ³•å¯¹åº”çš„å®ç°,åœ¨setteræ–¹æ³•ä¸­ä»åç§»é‡çš„ä½ç½®å¼€å§‹èµ‹å€¼,åœ¨getteræ–¹æ³•ä¸­ä»åç§»é‡å¼€å§‹å–å€¼,ä¸ºäº†èƒ½å¤Ÿè¯»å–æ­£ç¡®å­—èŠ‚æ•°,ç³»ç»Ÿå¯¹è±¡åç§»é‡çš„æŒ‡é’ˆç±»å‹è¿›è¡Œäº†ç±»å‹å¼ºè½¬.</p>

<h3>7. @protocol å’Œ category ä¸­å¦‚ä½•ä½¿ç”¨ @property</h3>

<ol>
<li>åœ¨protocolä¸­ä½¿ç”¨propertyåªä¼šç”Ÿæˆsetterå’Œgetteræ–¹æ³•å£°æ˜,æˆ‘ä»¬ä½¿ç”¨å±æ€§çš„ç›®çš„,æ˜¯å¸Œæœ›éµå®ˆæˆ‘åè®®çš„å¯¹è±¡èƒ½å®ç°è¯¥å±æ€§</li>
<li><p>category ä½¿ç”¨ @property ä¹Ÿæ˜¯åªä¼šç”Ÿæˆsetterå’Œgetteræ–¹æ³•çš„å£°æ˜,å¦‚æœæˆ‘ä»¬çœŸçš„éœ€è¦ç»™categoryå¢åŠ å±æ€§çš„å®ç°,éœ€è¦å€ŸåŠ©äºè¿è¡Œæ—¶çš„ä¸¤ä¸ªå‡½æ•°ï¼š</p></li>
<li><p><code>objc_setAssociatedObject</code></p></li>
<li><code>objc_getAssociatedObject</code></li>
</ol>


<h3>8. runtime å¦‚ä½•å®ç° weak å±æ€§</h3>

<p>è¦å®ç°weakå±æ€§ï¼Œé¦–å…ˆè¦ææ¸…æ¥šweakå±æ€§çš„ç‰¹ç‚¹ï¼š</p>

<blockquote><p>weak æ­¤ç‰¹è´¨è¡¨æ˜è¯¥å±æ€§å®šä¹‰äº†ä¸€ç§â€œéæ‹¥æœ‰å…³ç³»â€ (nonowning relationship)ã€‚ä¸ºè¿™ç§å±æ€§è®¾ç½®æ–°å€¼æ—¶ï¼Œè®¾ç½®æ–¹æ³•æ—¢ä¸ä¿ç•™æ–°å€¼ï¼Œä¹Ÿä¸é‡Šæ”¾æ—§å€¼ã€‚æ­¤ç‰¹è´¨åŒassignç±»ä¼¼ï¼Œ ç„¶è€Œåœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚</p></blockquote>

<p>é‚£ä¹ˆruntimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ</p>

<blockquote><p>runtime å¯¹æ³¨å†Œçš„ç±»ï¼Œ ä¼šè¿›è¡Œå¸ƒå±€ï¼Œå¯¹äº weak å¯¹è±¡ä¼šæ”¾å…¥ä¸€ä¸ª hash è¡¨ä¸­ã€‚ ç”¨ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€ä½œä¸º keyï¼Œå½“æ­¤å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º0çš„æ—¶å€™ä¼š deallocï¼Œå‡å¦‚ weak æŒ‡å‘çš„å¯¹è±¡å†…å­˜åœ°å€æ˜¯aï¼Œé‚£ä¹ˆå°±ä¼šä»¥aä¸ºé”®ï¼Œ åœ¨è¿™ä¸ª weak è¡¨ä¸­æœç´¢ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»¥aä¸ºé”®çš„ weak å¯¹è±¡ï¼Œä»è€Œè®¾ç½®ä¸º nilã€‚</p></blockquote>

<p>æˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼ˆä¼ªä»£ç ï¼‰æ¥è¡¨ç¤ºä¸Šè¿°æœºåˆ¶ï¼š</p>

<p><code>objc_storeWeak(&amp;a, b)</code>å‡½æ•°ï¼š</p>

<p><code>objc_storeWeak</code>å‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°&ndash;èµ‹å€¼å¯¹è±¡ï¼ˆbï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼keyï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°&ndash;weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä½œä¸ºvalueï¼Œæ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆbï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆaï¼‰çš„å†…å­˜åœ°å€ï¼ˆ&amp;aï¼‰ä»weakè¡¨ä¸­åˆ é™¤ï¼Œ</p>

<p>ä½ å¯ä»¥æŠŠ<code>objc_storeWeak(&amp;a, b)</code>ç†è§£ä¸ºï¼š<code>objc_storeWeak(value, key)</code>ï¼Œå¹¶ä¸”å½“keyå˜nilï¼Œå°†valueç½®nilã€‚</p>

<p>åœ¨bénilæ—¶ï¼Œaå’ŒbæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨bå˜nilæ—¶ï¼Œaå˜nilã€‚æ­¤æ—¶å‘aå‘é€æ¶ˆæ¯ä¸ä¼šå´©æºƒï¼šåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ã€‚</p>

<p>è€Œå¦‚æœaæ˜¯ç”±assignä¿®é¥°çš„ï¼Œåˆ™ï¼š
åœ¨bénilæ—¶ï¼Œaå’ŒbæŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ï¼Œåœ¨bå˜nilæ—¶ï¼Œaè¿˜æ˜¯æŒ‡å‘è¯¥å†…å­˜åœ°å€ï¼Œå˜é‡æŒ‡é’ˆã€‚æ­¤æ—¶å‘aå‘é€æ¶ˆæ¯ææ˜“å´©æºƒã€‚</p>

<p>ä¸‹é¢æˆ‘ä»¬å°†åŸºäº<code>objc_storeWeak(&amp;a, b)</code>å‡½æ•°ï¼Œä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿâ€œruntimeå¦‚ä½•å®ç°weakå±æ€§â€ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="c1">// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§</span>
</span><span class='line'><span class="c1">// http://weibo.com/luohanchenyilong/</span>
</span><span class='line'><span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>
</span><span class='line'> <span class="kt">id</span> <span class="n">obj1</span><span class="p">;</span>
</span><span class='line'> <span class="n">objc_initWeak</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj</span><span class="p">);</span>
</span><span class='line'><span class="cm">/*objå¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œå˜é‡ä½œç”¨åŸŸç»“æŸ*/</span>
</span><span class='line'> <span class="n">objc_destroyWeak</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj1</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¸‹é¢å¯¹ç”¨åˆ°çš„ä¸¤ä¸ªæ–¹æ³•<code>objc_initWeak</code>å’Œ<code>objc_destroyWeak</code>åšä¸‹è§£é‡Šï¼š</p>

<p>æ€»ä½“è¯´æ¥ï¼Œä½œç”¨æ˜¯ï¼š
é€šè¿‡<code>objc_initWeak</code>å‡½æ•°åˆå§‹åŒ–â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€ï¼Œåœ¨å˜é‡ä½œç”¨åŸŸç»“æŸæ—¶é€šè¿‡<code>objc_destoryWeak</code>å‡½æ•°é‡Šæ”¾è¯¥å˜é‡ï¼ˆobj1ï¼‰ã€‚</p>

<p>ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸‹æ–¹æ³•çš„å†…éƒ¨å®ç°ï¼š</p>

<p><code>objc_initWeak</code>å‡½æ•°çš„å®ç°æ˜¯è¿™æ ·çš„ï¼šåœ¨å°†â€œé™„æœ‰weakä¿®é¥°ç¬¦çš„å˜é‡ï¼ˆobj1ï¼‰â€åˆå§‹åŒ–ä¸º0ï¼ˆnilï¼‰åï¼Œä¼šå°†â€œèµ‹å€¼å¯¹è±¡â€ï¼ˆobjï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨<code>objc_storeWeak</code>å‡½æ•°ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="n">obj1</span> <span class="o">=</span> <span class="mi">0</span><span class="err">ï¼›</span>
</span><span class='line'><span class="n">obj_storeWeak</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>

<blockquote><p> weak ä¿®é¥°çš„æŒ‡é’ˆé»˜è®¤å€¼æ˜¯ nil ï¼ˆåœ¨Objective-Cä¸­å‘nilå‘é€æ¶ˆæ¯æ˜¯å®‰å…¨çš„ï¼‰</p></blockquote>

<p>ç„¶å<code>obj_destroyWeak</code>å‡½æ•°å°†0ï¼ˆnilï¼‰ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨<code>objc_storeWeak</code>å‡½æ•°ã€‚</p>

<p><code>objc_storeWeak(&amp;obj1, 0);</code></p>

<p>å‰é¢çš„æºä»£ç ä¸ä¸‹åˆ—æºä»£ç ç›¸åŒã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="c1">// ä½¿ç”¨ä¼ªä»£ç æ¨¡æ‹Ÿï¼šruntimeå¦‚ä½•å®ç°weakå±æ€§</span>
</span><span class='line'><span class="c1">// http://weibo.com/luohanchenyilong/</span>
</span><span class='line'><span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>
</span><span class='line'><span class="kt">id</span> <span class="n">obj1</span><span class="p">;</span>
</span><span class='line'><span class="n">obj1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="n">objc_storeWeak</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj</span><span class="p">);</span>
</span><span class='line'><span class="cm">/* ... objçš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œè¢«ç½®nil ... */</span>
</span><span class='line'><span class="n">objc_storeWeak</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>objc_storeWeak</code>å‡½æ•°æŠŠç¬¬äºŒä¸ªå‚æ•°&ndash;èµ‹å€¼å¯¹è±¡ï¼ˆobjï¼‰çš„å†…å­˜åœ°å€ä½œä¸ºé”®å€¼ï¼Œå°†ç¬¬ä¸€ä¸ªå‚æ•°&ndash;weakä¿®é¥°çš„å±æ€§å˜é‡ï¼ˆobj1ï¼‰çš„å†…å­˜åœ°å€æ³¨å†Œåˆ° weak è¡¨ä¸­ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ï¼ˆobjï¼‰ä¸º0ï¼ˆnilï¼‰ï¼Œé‚£ä¹ˆæŠŠå˜é‡ï¼ˆobj1ï¼‰çš„åœ°å€ä»weakè¡¨ä¸­åˆ é™¤ï¼Œåœ¨åé¢çš„ç›¸å…³ä¸€é¢˜ä¼šè¯¦è§£ã€‚</p>

<p>ä½¿ç”¨ä¼ªä»£ç æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä¸‹é¢æˆ‘ä»¬â€œçœŸæªå®å¼¹â€åœ°å®ç°ä¸‹ï¼š</p>

<blockquote><p>å¦‚ä½•è®©ä¸ä½¿ç”¨weakä¿®é¥°çš„@propertyï¼Œæ‹¥æœ‰weakçš„æ•ˆæœã€‚</p></blockquote>

<p>æˆ‘ä»¬ä»setteræ–¹æ³•å…¥æ‰‹ï¼š</p>

<pre><code>- (void)setObject:(NSObject *)object
{
    objc_setAssociatedObject(self, "object", object, OBJC_ASSOCIATION_ASSIGN);
    [object cyl_runAtDealloc:^{
        _object = nil;
    }];
}
</code></pre>

<p>ä¹Ÿå°±æ˜¯æœ‰ä¸¤ä¸ªæ­¥éª¤ï¼š</p>

<ol>
<li><p>åœ¨setteræ–¹æ³•ä¸­åšå¦‚ä¸‹è®¾ç½®ï¼š</p>

<pre><code>objc_setAssociatedObject(self, "object", object, OBJC_ASSOCIATION_ASSIGN);
</code></pre></li>
<li><p>åœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º(nil out)ã€‚åšåˆ°è¿™ç‚¹ï¼ŒåŒæ ·è¦å€ŸåŠ©runtimeï¼š</p></li>
</ol>


<p> &#8220;`Objective-C
//è¦é”€æ¯çš„ç›®æ ‡å¯¹è±¡
id objectToBeDeallocated;
//å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ä¸Šé¢çš„ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚
id objectWeWantToBeReleasedWhenThatHappens;
objc_setAssociatedObject(objectToBeDeallocted,
                         someUniqueKey,
                         objectWeWantToBeReleasedWhenThatHappens,
                         OBJC_ASSOCIATION_RETAIN);</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
<span class='line-number'>154</span>
<span class='line-number'>155</span>
<span class='line-number'>156</span>
<span class='line-number'>157</span>
<span class='line-number'>158</span>
<span class='line-number'>159</span>
<span class='line-number'>160</span>
<span class='line-number'>161</span>
<span class='line-number'>162</span>
<span class='line-number'>163</span>
<span class='line-number'>164</span>
<span class='line-number'>165</span>
<span class='line-number'>166</span>
<span class='line-number'>167</span>
<span class='line-number'>168</span>
<span class='line-number'>169</span>
<span class='line-number'>170</span>
<span class='line-number'>171</span>
<span class='line-number'>172</span>
<span class='line-number'>173</span>
<span class='line-number'>174</span>
<span class='line-number'>175</span>
<span class='line-number'>176</span>
<span class='line-number'>177</span>
<span class='line-number'>178</span>
<span class='line-number'>179</span>
<span class='line-number'>180</span>
<span class='line-number'>181</span>
<span class='line-number'>182</span>
<span class='line-number'>183</span>
<span class='line-number'>184</span>
<span class='line-number'>185</span>
<span class='line-number'>186</span>
<span class='line-number'>187</span>
<span class='line-number'>188</span>
<span class='line-number'>189</span>
<span class='line-number'>190</span>
<span class='line-number'>191</span>
<span class='line-number'>192</span>
<span class='line-number'>193</span>
<span class='line-number'>194</span>
<span class='line-number'>195</span>
<span class='line-number'>196</span>
<span class='line-number'>197</span>
<span class='line-number'>198</span>
<span class='line-number'>199</span>
<span class='line-number'>200</span>
<span class='line-number'>201</span>
<span class='line-number'>202</span>
<span class='line-number'>203</span>
<span class='line-number'>204</span>
<span class='line-number'>205</span>
<span class='line-number'>206</span>
<span class='line-number'>207</span>
<span class='line-number'>208</span>
<span class='line-number'>209</span>
<span class='line-number'>210</span>
<span class='line-number'>211</span>
<span class='line-number'>212</span>
<span class='line-number'>213</span>
<span class='line-number'>214</span>
<span class='line-number'>215</span>
<span class='line-number'>216</span>
<span class='line-number'>217</span>
<span class='line-number'>218</span>
<span class='line-number'>219</span>
<span class='line-number'>220</span>
<span class='line-number'>221</span>
<span class='line-number'>222</span>
<span class='line-number'>223</span>
<span class='line-number'>224</span>
<span class='line-number'>225</span>
<span class='line-number'>226</span>
<span class='line-number'>227</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="err">çŸ¥é“äº†æ€è·¯ï¼Œæˆ‘ä»¬å°±å¼€å§‹å®ç°`</span><span class="n">cyl_runAtDealloc</span><span class="err">`æ–¹æ³•ï¼Œå®ç°è¿‡ç¨‹åˆ†ä¸¤éƒ¨åˆ†ï¼š</span>
</span><span class='line'>
</span><span class='line'><span class="err">ç¬¬ä¸€éƒ¨åˆ†ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©</span><span class="n">block</span><span class="err">æ‰§è¡Œâ€œäº‹ä»¶â€ã€‚</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// .hæ–‡ä»¶</span>
</span><span class='line'>    <span class="c1">// http://weibo.com/luohanchenyilong/</span>
</span><span class='line'>    <span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>    <span class="c1">// è¿™ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©blockæ‰§è¡Œâ€œäº‹ä»¶â€ã€‚</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">typedef</span> <span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="n">voidBlock</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@interface</span> <span class="nc">CYLBlockExecutor</span> : <span class="bp">NSObject</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nl">initWithBlock</span><span class="p">:(</span><span class="n">voidBlock</span><span class="p">)</span><span class="n">block</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// .mæ–‡ä»¶</span>
</span><span class='line'>    <span class="c1">// http://weibo.com/luohanchenyilong/</span>
</span><span class='line'>    <span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>    <span class="c1">// è¿™ä¸ªç±»ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œäº‹ä»¶â€ï¼šå½“ç›®æ ‡å¯¹è±¡é”€æ¯æ—¶ï¼ŒåŒæ—¶è¦å‘ç”Ÿçš„â€œäº‹ä»¶â€ã€‚å€ŸåŠ©blockæ‰§è¡Œâ€œäº‹ä»¶â€ã€‚</span>
</span><span class='line'>
</span><span class='line'>    <span class="cp">#import &quot;CYLBlockExecutor.h&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@interface</span> <span class="nc">CYLBlockExecutor</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">voidBlock</span> <span class="n">_block</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">@implementation</span> <span class="nc">CYLBlockExecutor</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nl">initWithBlock</span><span class="p">:(</span><span class="n">voidBlock</span><span class="p">)</span><span class="n">aBlock</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nb">self</span> <span class="o">=</span> <span class="p">[</span><span class="nb">super</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="nb">self</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">_block</span> <span class="o">=</span> <span class="p">[</span><span class="n">aBlock</span> <span class="k">copy</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="nb">self</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">dealloc</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">_block</span> <span class="o">?</span> <span class="n">_block</span><span class="p">()</span> <span class="o">:</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@end</span>
</span><span class='line'>
</span><span class='line'><span class="err">ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒä»£ç ï¼šåˆ©ç”¨</span><span class="n">runtime</span><span class="err">å®ç°`</span><span class="n">cyl_runAtDealloc</span><span class="err">`æ–¹æ³•</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// CYLNSObject+RunAtDealloc.hæ–‡ä»¶</span>
</span><span class='line'>    <span class="c1">// http://weibo.com/luohanchenyilong/</span>
</span><span class='line'>    <span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>    <span class="c1">// åˆ©ç”¨runtimeå®ç°cyl_runAtDeallocæ–¹æ³•</span>
</span><span class='line'>
</span><span class='line'>    <span class="cp">#import &quot;CYLBlockExecutor.h&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">runAtDeallocBlockKey</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">runAtDeallocBlockKey</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@interface</span> <span class="bp">NSObject</span> <span class="nl">(CYLRunAtDealloc)</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">cyl_runAtDealloc</span><span class="p">:(</span><span class="n">voidBlock</span><span class="p">)</span><span class="n">block</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@end</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// CYLNSObject+RunAtDealloc.mæ–‡ä»¶</span>
</span><span class='line'>    <span class="c1">// http://weibo.com/luohanchenyilong/</span>
</span><span class='line'>    <span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>    <span class="c1">// åˆ©ç”¨runtimeå®ç°cyl_runAtDeallocæ–¹æ³•</span>
</span><span class='line'>
</span><span class='line'>    <span class="cp">#import &quot;CYLNSObject+RunAtDealloc.h&quot;</span>
</span><span class='line'>    <span class="cp">#import &quot;CYLBlockExecutor.h&quot;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@implementation</span> <span class="bp">NSObject</span> <span class="nl">(CYLRunAtDealloc)</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">cyl_runAtDealloc</span><span class="p">:(</span><span class="n">voidBlock</span><span class="p">)</span><span class="n">block</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">block</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">CYLBlockExecutor</span> <span class="o">*</span><span class="n">executor</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CYLBlockExecutor</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithBlock</span><span class="p">:</span><span class="n">block</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">objc_setAssociatedObject</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span>
</span><span class='line'>                                     <span class="n">runAtDeallocBlockKey</span><span class="p">,</span>
</span><span class='line'>                                     <span class="n">executor</span><span class="p">,</span>
</span><span class='line'>                                     <span class="n">OBJC_ASSOCIATION_RETAIN</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">@end</span>
</span><span class='line'>
</span><span class='line'><span class="err">ä½¿ç”¨æ–¹æ³•ï¼š</span>
</span><span class='line'><span class="err">å¯¼å…¥</span>
</span><span class='line'>
</span><span class='line'>    <span class="cp">#import &quot;CYLNSObject+RunAtDealloc.h&quot;</span>
</span><span class='line'><span class="err">ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ï¼š</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">NSObject</span> <span class="o">*</span><span class="n">foo</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSObject</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">[</span><span class="n">foo</span> <span class="nl">cyl_runAtDealloc</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>            <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;æ­£åœ¨é‡Šæ”¾foo!&quot;</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="err">å¦‚æœå¯¹`</span><span class="n">cyl_runAtDealloc</span><span class="err">`çš„å®ç°åŸç†æœ‰å…´è¶£ï¼Œå¯ä»¥çœ‹ä¸‹è¿™ç¯‡åšæ–‡</span> <span class="p">[</span><span class="o">***</span><span class="n">Fun</span> <span class="n">With</span> <span class="n">the</span> <span class="n">Objective</span><span class="o">-</span><span class="n">C</span> <span class="nl">Runtime</span><span class="p">:</span> <span class="n">Run</span> <span class="n">Code</span> <span class="n">at</span> <span class="n">Deallocation</span> <span class="n">of</span> <span class="n">Any</span> <span class="n">Object</span><span class="o">***</span><span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//stackoverflow.com/a/31560217/3395008)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cp">###9. @propertyä¸­æœ‰å“ªäº›å±æ€§å…³é”®å­—ï¼Ÿ/ @property åé¢å¯ä»¥æœ‰å“ªäº›ä¿®é¥°ç¬¦ï¼Ÿ</span>
</span><span class='line'><span class="err">å±æ€§å¯ä»¥æ‹¥æœ‰çš„ç‰¹è´¨åˆ†ä¸ºå››ç±»</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="err">åŸå­æ€§</span><span class="o">---</span><span class="err">`</span><span class="k">nonatomic</span><span class="err">`ç‰¹è´¨</span>
</span><span class='line'>
</span><span class='line'>    <span class="err">åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±ç¼–è¯‘å™¨åˆæˆçš„æ–¹æ³•ä¼šé€šè¿‡é”å®šæœºåˆ¶ç¡®ä¿å…¶åŸå­æ€§</span><span class="p">(</span><span class="n">atomicity</span><span class="p">)</span><span class="err">ã€‚å¦‚æœå±æ€§å…·å¤‡</span><span class="k">nonatomic</span><span class="err">ç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨åŒæ­¥é”ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ²¡æœ‰åä¸ºâ€œ</span><span class="k">atomic</span><span class="err">â€çš„ç‰¹è´¨</span><span class="p">(</span><span class="err">å¦‚æœæŸå±æ€§ä¸å…·å¤‡</span><span class="k">nonatomic</span><span class="err">ç‰¹è´¨ï¼Œé‚£å®ƒå°±æ˜¯â€œåŸå­çš„â€</span> <span class="p">(</span> <span class="k">atomic</span><span class="p">)</span> <span class="p">)</span><span class="err">ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥åœ¨å±æ€§ç‰¹è´¨ä¸­å†™æ˜è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ã€‚è‹¥æ˜¯è‡ªå·±å®šä¹‰å­˜å–æ–¹æ³•ï¼Œé‚£ä¹ˆå°±åº”è¯¥éµä»ä¸å±æ€§ç‰¹è´¨ç›¸ç¬¦çš„åŸå­æ€§ã€‚</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">2.</span> <span class="err">è¯»</span><span class="o">/</span><span class="err">å†™æƒé™</span><span class="o">---</span><span class="err">`</span><span class="k">readwrite</span><span class="p">(</span><span class="err">è¯»å†™</span><span class="p">)</span><span class="err">`ã€`</span><span class="n">readooly</span> <span class="p">(</span><span class="err">åªè¯»</span><span class="p">)</span><span class="err">`</span>
</span><span class='line'> <span class="mf">3.</span> <span class="err">å†…å­˜ç®¡ç†è¯­ä¹‰</span><span class="o">---</span><span class="err">`</span><span class="k">assign</span><span class="err">`ã€`</span><span class="k">strong</span><span class="err">`ã€</span> <span class="err">`</span><span class="k">weak</span><span class="err">`ã€`</span><span class="k">unsafe_unretained</span><span class="err">`ã€`</span><span class="k">copy</span><span class="err">`</span>
</span><span class='line'> <span class="mf">4.</span> <span class="err">æ–¹æ³•å</span><span class="o">---</span><span class="err">`</span><span class="k">getter</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="err">`</span> <span class="err">ã€`</span><span class="k">setter</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="err">`</span>
</span><span class='line'>
</span><span class='line'>  <span class="err">`</span><span class="k">getter</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="err">`çš„æ ·å¼ï¼š</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">getter</span><span class="o">=</span><span class="n">isOn</span><span class="p">)</span> <span class="kt">BOOL</span> <span class="n">on</span><span class="p">;</span>
</span><span class='line'><span class="err">ï¼ˆ</span> <span class="err">`</span><span class="k">setter</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="err">`è¿™ç§ä¸å¸¸ç”¨ï¼Œä¹Ÿä¸æ¨èä½¿ç”¨ã€‚æ•…ä¸åœ¨è¿™é‡Œç»™å‡ºå†™æ³•ã€‚ï¼‰</span>
</span><span class='line'> <span class="mf">3.</span> <span class="err">ä¸å¸¸ç”¨çš„ï¼š`</span><span class="n">nonnull</span><span class="err">`</span><span class="p">,</span><span class="err">`</span><span class="n">null_resettable</span><span class="err">`</span><span class="p">,</span><span class="err">`</span><span class="n">nullable</span><span class="err">`</span>
</span><span class='line'>
</span><span class='line'><span class="cp">###10. weakå±æ€§éœ€è¦åœ¨deallocä¸­ç½®nilä¹ˆï¼Ÿ</span>
</span><span class='line'><span class="err">ä¸éœ€è¦ã€‚</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="err">åœ¨</span><span class="n">ARC</span><span class="err">ç¯å¢ƒæ— è®ºæ˜¯å¼ºæŒ‡é’ˆè¿˜æ˜¯å¼±æŒ‡é’ˆéƒ½æ— éœ€åœ¨</span> <span class="n">dealloc</span> <span class="err">è®¾ç½®ä¸º</span> <span class="nb">nil</span> <span class="err">ï¼Œ</span> <span class="n">ARC</span> <span class="err">ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†</span>
</span><span class='line'>
</span><span class='line'><span class="err">å³ä¾¿æ˜¯ç¼–è¯‘å™¨ä¸å¸®æˆ‘ä»¬åšè¿™äº›ï¼Œ</span><span class="k">weak</span><span class="err">ä¹Ÿä¸éœ€è¦åœ¨</span><span class="n">dealloc</span><span class="err">ä¸­ç½®</span><span class="nb">nil</span><span class="err">ï¼š</span>
</span><span class='line'>
</span><span class='line'><span class="err">æ­£å¦‚ä¸Šæ–‡çš„ï¼š</span><span class="o">***</span><span class="n">runtime</span> <span class="err">å¦‚ä½•å®ç°</span> <span class="k">weak</span> <span class="err">å±æ€§</span><span class="o">***</span> <span class="err">ä¸­æåˆ°çš„ï¼š</span>
</span><span class='line'>
</span><span class='line'><span class="err">æˆ‘ä»¬æ¨¡æ‹Ÿä¸‹</span><span class="k">weak</span><span class="err">çš„</span><span class="k">setter</span><span class="err">æ–¹æ³•ï¼Œåº”è¯¥å¦‚ä¸‹ï¼š</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">setObject</span><span class="p">:(</span><span class="bp">NSObject</span> <span class="o">*</span><span class="p">)</span><span class="n">object</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">objc_setAssociatedObject</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="s">&quot;object&quot;</span><span class="p">,</span> <span class="n">object</span><span class="p">,</span> <span class="n">OBJC_ASSOCIATION_ASSIGN</span><span class="p">);</span>
</span><span class='line'>        <span class="p">[</span><span class="n">object</span> <span class="nl">cyl_runAtDealloc</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>            <span class="n">_object</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="err">ä¹Ÿå³</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="err">åœ¨å±æ€§æ‰€æŒ‡çš„å¯¹è±¡é­åˆ°æ‘§æ¯æ—¶ï¼Œå±æ€§å€¼ä¹Ÿä¼šæ¸…ç©º</span><span class="p">(</span><span class="nb">nil</span> <span class="k">out</span><span class="p">)</span><span class="err">ã€‚</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cp">###11. @synthesizeå’Œ@dynamicåˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="k">@property</span><span class="err">æœ‰ä¸¤ä¸ªå¯¹åº”çš„è¯ï¼Œä¸€ä¸ªæ˜¯</span><span class="k">@synthesize</span><span class="err">ï¼Œä¸€ä¸ªæ˜¯</span><span class="k">@dynamic</span><span class="err">ã€‚å¦‚æœ</span><span class="k">@synthesize</span><span class="err">å’Œ</span><span class="k">@dynamic</span><span class="err">éƒ½æ²¡å†™ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯`</span><span class="p">@</span><span class="n">syntheszie</span> <span class="n">var</span> <span class="o">=</span> <span class="n">_var</span><span class="p">;</span><span class="err">`</span>
</span><span class='line'> <span class="mf">2.</span> <span class="k">@synthesize</span><span class="err">çš„è¯­ä¹‰æ˜¯å¦‚æœä½ æ²¡æœ‰æ‰‹åŠ¨å®ç°</span><span class="k">setter</span><span class="err">æ–¹æ³•å’Œ</span><span class="k">getter</span><span class="err">æ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºä½ åŠ ä¸Šè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</span>
</span><span class='line'> <span class="mf">3.</span> <span class="k">@dynamic</span><span class="err">å‘Šè¯‰ç¼–è¯‘å™¨ï¼šå±æ€§çš„</span><span class="k">setter</span><span class="err">ä¸</span><span class="k">getter</span><span class="err">æ–¹æ³•ç”±ç”¨æˆ·è‡ªå·±å®ç°ï¼Œä¸è‡ªåŠ¨ç”Ÿæˆã€‚ï¼ˆå½“ç„¶å¯¹äº</span><span class="k">readonly</span><span class="err">çš„å±æ€§åªéœ€æä¾›</span><span class="k">getter</span><span class="err">å³å¯ï¼‰ã€‚å‡å¦‚ä¸€ä¸ªå±æ€§è¢«å£°æ˜ä¸º</span><span class="k">@dynamic</span> <span class="n">var</span><span class="err">ï¼Œç„¶åä½ æ²¡æœ‰æä¾›</span><span class="p">@</span><span class="k">setter</span><span class="err">æ–¹æ³•å’Œ</span><span class="p">@</span><span class="k">getter</span><span class="err">æ–¹æ³•ï¼Œç¼–è¯‘çš„æ—¶å€™æ²¡é—®é¢˜ï¼Œä½†æ˜¯å½“ç¨‹åºè¿è¡Œåˆ°`</span><span class="n">instance</span><span class="p">.</span><span class="n">var</span> <span class="o">=</span> <span class="n">someVar</span><span class="err">`ï¼Œç”±äºç¼º</span><span class="k">setter</span><span class="err">æ–¹æ³•ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼›æˆ–è€…å½“è¿è¡Œåˆ°</span> <span class="err">`</span><span class="n">someVar</span> <span class="o">=</span> <span class="n">var</span><span class="err">`æ—¶ï¼Œç”±äºç¼º</span><span class="k">getter</span><span class="err">æ–¹æ³•åŒæ ·ä¼šå¯¼è‡´å´©æºƒã€‚ç¼–è¯‘æ—¶æ²¡é—®é¢˜ï¼Œè¿è¡Œæ—¶æ‰æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„åŠ¨æ€ç»‘å®šã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="cp">###12. ARCä¸‹ï¼Œä¸æ˜¾å¼æŒ‡å®šä»»ä½•å±æ€§å…³é”®å­—æ—¶ï¼Œé»˜è®¤çš„å…³é”®å­—éƒ½æœ‰å“ªäº›ï¼Ÿ</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="err">å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤å…³é”®å­—æ˜¯</span>
</span><span class='line'>
</span><span class='line'> <span class="k">atomic</span><span class="p">,</span><span class="k">readwrite</span><span class="p">,</span><span class="k">assign</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">å¯¹äºæ™®é€šçš„</span><span class="n">OC</span><span class="err">å¯¹è±¡</span>
</span><span class='line'>
</span><span class='line'> <span class="k">atomic</span><span class="p">,</span><span class="k">readwrite</span><span class="p">,</span><span class="k">strong</span>
</span><span class='line'>
</span><span class='line'><span class="err">å‚è€ƒé“¾æ¥ï¼š</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="p">[</span> <span class="o">***</span><span class="n">Objective</span><span class="o">-</span><span class="n">C</span> <span class="nl">ARC</span><span class="p">:</span> <span class="k">strong</span> <span class="n">vs</span> <span class="k">retain</span> <span class="n">and</span> <span class="k">weak</span> <span class="n">vs</span> <span class="k">assign</span><span class="o">***</span> <span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//stackoverflow.com/a/15541801/3395008)</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">2.</span> <span class="p">[</span> <span class="o">***</span><span class="n">Variable</span> <span class="n">property</span> <span class="n">attributes</span> <span class="n">or</span> <span class="n">Modifiers</span> <span class="k">in</span> <span class="n">iOS</span><span class="o">***</span> <span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//rdcworld-iphone.blogspot.in/2012/12/variable-property-attributes-or.html)</span>
</span><span class='line'>
</span><span class='line'><span class="cp">###13. ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="err">å› ä¸ºçˆ¶ç±»æŒ‡é’ˆå¯ä»¥æŒ‡å‘å­ç±»å¯¹è±¡</span><span class="p">,</span><span class="err">ä½¿ç”¨</span><span class="k">copy</span><span class="err">çš„ç›®çš„æ˜¯ä¸ºäº†è®©æœ¬å¯¹è±¡çš„å±æ€§ä¸å—å¤–ç•Œå½±å“</span><span class="p">,</span><span class="err">ä½¿ç”¨</span><span class="k">copy</span><span class="err">æ— è®ºç»™æˆ‘ä¼ å…¥æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡è¿˜æ˜¯ä¸å¯å¯¹è±¡</span><span class="p">,</span><span class="err">æˆ‘æœ¬èº«æŒæœ‰çš„å°±æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å‰¯æœ¬</span><span class="p">.</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ˜¯</span><span class="k">strong</span><span class="p">,</span><span class="err">é‚£ä¹ˆè¿™ä¸ªå±æ€§å°±æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ªå¯å˜å¯¹è±¡</span><span class="p">,</span><span class="err">å¦‚æœè¿™ä¸ªå¯å˜å¯¹è±¡åœ¨å¤–éƒ¨è¢«ä¿®æ”¹äº†</span><span class="p">,</span><span class="err">é‚£ä¹ˆä¼šå½±å“è¯¥å±æ€§</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="k">copy</span><span class="err">æ­¤ç‰¹è´¨æ‰€è¡¨è¾¾çš„æ‰€å±å…³ç³»ä¸</span><span class="k">strong</span><span class="err">ç±»ä¼¼ã€‚ç„¶è€Œè®¾ç½®æ–¹æ³•å¹¶ä¸ä¿ç•™æ–°å€¼ï¼Œè€Œæ˜¯å°†å…¶â€œæ‹·è´â€</span> <span class="p">(</span><span class="k">copy</span><span class="p">)</span><span class="err">ã€‚</span>
</span><span class='line'><span class="err">å½“å±æ€§ç±»å‹ä¸º</span><span class="bp">NSString</span><span class="err">æ—¶ï¼Œç»å¸¸ç”¨æ­¤ç‰¹è´¨æ¥ä¿æŠ¤å…¶å°è£…æ€§ï¼Œå› ä¸ºä¼ é€’ç»™è®¾ç½®æ–¹æ³•çš„æ–°å€¼æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ª</span><span class="bp">NSMutableString</span><span class="err">ç±»çš„å®ä¾‹ã€‚è¿™ä¸ªç±»æ˜¯</span><span class="bp">NSString</span><span class="err">çš„å­ç±»ï¼Œè¡¨ç¤ºä¸€ç§å¯ä¿®æ”¹å…¶å€¼çš„å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶è‹¥æ˜¯ä¸æ‹·è´å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè®¾ç½®å®Œå±æ€§ä¹‹åï¼Œå­—ç¬¦ä¸²çš„å€¼å°±å¯èƒ½ä¼šåœ¨å¯¹è±¡ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹é­äººæ›´æ”¹ã€‚æ‰€ä»¥ï¼Œè¿™æ—¶å°±è¦æ‹·è´ä¸€ä»½â€œä¸å¯å˜â€</span> <span class="p">(</span><span class="n">immutable</span><span class="p">)</span><span class="err">çš„å­—ç¬¦ä¸²ï¼Œç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ã€‚åªè¦å®ç°å±æ€§æ‰€ç”¨çš„å¯¹è±¡æ˜¯â€œå¯å˜çš„â€</span> <span class="p">(</span><span class="n">mutable</span><span class="p">)</span><span class="err">ï¼Œå°±åº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="err">ä¸ºäº†ç†è§£è¿™ç§åšæ³•ï¼Œé¦–å…ˆè¦çŸ¥é“ï¼Œå¯¹éé›†åˆç±»å¯¹è±¡çš„</span><span class="k">copy</span><span class="err">æ“ä½œï¼š</span>
</span><span class='line'>
</span><span class='line'><span class="err">åœ¨éé›†åˆç±»å¯¹è±¡ä¸­ï¼šå¯¹</span><span class="n">immutable</span><span class="err">å¯¹è±¡è¿›è¡Œ</span><span class="k">copy</span><span class="err">æ“ä½œï¼Œæ˜¯æŒ‡é’ˆå¤åˆ¶ï¼Œ</span><span class="n">mutableCopy</span><span class="err">æ“ä½œæ—¶å†…å®¹å¤åˆ¶ï¼›å¯¹</span><span class="n">mutable</span><span class="err">å¯¹è±¡è¿›è¡Œ</span><span class="k">copy</span><span class="err">å’Œ</span><span class="n">mutableCopy</span><span class="err">éƒ½æ˜¯å†…å®¹å¤åˆ¶ã€‚ç”¨ä»£ç ç®€å•è¡¨ç¤ºå¦‚ä¸‹ï¼š</span>
</span><span class='line'>
</span><span class='line'> <span class="o">-</span> <span class="p">[</span><span class="n">immutableObject</span> <span class="k">copy</span><span class="p">]</span> <span class="c1">// æµ…å¤åˆ¶</span>
</span><span class='line'> <span class="o">-</span> <span class="p">[</span><span class="n">immutableObject</span> <span class="n">mutableCopy</span><span class="p">]</span> <span class="c1">//æ·±å¤åˆ¶</span>
</span><span class='line'> <span class="o">-</span> <span class="p">[</span><span class="n">mutableObject</span> <span class="k">copy</span><span class="p">]</span> <span class="c1">//æ·±å¤åˆ¶</span>
</span><span class='line'> <span class="o">-</span> <span class="p">[</span><span class="n">mutableObject</span> <span class="n">mutableCopy</span><span class="p">]</span> <span class="c1">//æ·±å¤åˆ¶</span>
</span><span class='line'>  
</span><span class='line'><span class="err">æ¯”å¦‚ä»¥ä¸‹ä»£ç ï¼š</span>
</span><span class='line'>
</span><span class='line'>  <span class="bp">NSMutableString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSMutableString</span> <span class="nl">stringWithString</span><span class="p">:</span><span class="s">@&quot;origin&quot;</span><span class="p">];</span><span class="c1">//copy</span>
</span><span class='line'>  <span class="bp">NSString</span> <span class="o">*</span><span class="n">stringCopy</span> <span class="o">=</span> <span class="p">[</span><span class="n">string</span> <span class="k">copy</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="err">æŸ¥çœ‹å†…å­˜ï¼Œä¼šå‘ç°</span> <span class="n">string</span><span class="err">ã€</span><span class="n">stringCopy</span> <span class="err">å†…å­˜åœ°å€éƒ½ä¸ä¸€æ ·ï¼Œè¯´æ˜æ­¤æ—¶éƒ½æ˜¯åšå†…å®¹æ‹·è´ã€æ·±æ‹·è´ã€‚å³ä½¿ä½ è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">[</span><span class="n">string</span> <span class="nl">appendString</span><span class="p">:</span><span class="s">@&quot;origion!&quot;</span><span class="p">]</span>
</span><span class='line'><span class="n">stringCopy</span><span class="err">çš„å€¼ä¹Ÿä¸ä¼šå› æ­¤æ”¹å˜ï¼Œä½†æ˜¯å¦‚æœä¸ä½¿ç”¨</span><span class="k">copy</span><span class="err">ï¼Œ</span><span class="n">stringCopy</span><span class="err">çš„å€¼å°±ä¼šè¢«æ”¹å˜ã€‚</span>
</span><span class='line'>  <span class="err">é›†åˆç±»å¯¹è±¡ä»¥æ­¤ç±»æ¨ã€‚</span>
</span><span class='line'><span class="err">æ‰€ä»¥ï¼Œ</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="err">ç”¨</span><span class="k">@property</span><span class="err">å£°æ˜</span> <span class="bp">NSString</span><span class="err">ã€</span><span class="bp">NSArray</span><span class="err">ã€</span><span class="bp">NSDictionary</span> <span class="err">ç»å¸¸ä½¿ç”¨</span><span class="k">copy</span><span class="err">å…³é”®å­—ï¼Œæ˜¯å› ä¸ºä»–ä»¬æœ‰å¯¹åº”çš„å¯å˜ç±»å‹ï¼š</span><span class="bp">NSMutableString</span><span class="err">ã€</span><span class="bp">NSMutableArray</span><span class="err">ã€</span><span class="bp">NSMutableDictionary</span><span class="err">ï¼Œä»–ä»¬ä¹‹é—´å¯èƒ½è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œä¸ºç¡®ä¿å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²å€¼ä¸ä¼šæ— æ„é—´å˜åŠ¨ï¼Œåº”è¯¥åœ¨è®¾ç½®æ–°å±æ€§å€¼æ—¶æ‹·è´ä¸€ä»½ã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="err">å‚è€ƒé“¾æ¥ï¼š</span><span class="p">[</span><span class="n">iOS</span> <span class="err">é›†åˆçš„æ·±å¤åˆ¶ä¸æµ…å¤åˆ¶</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//www.zybuluo.com/MicroCai/note/50592)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cp">###14. @synthesizeåˆæˆå®ä¾‹å˜é‡çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå‡å¦‚propertyåä¸ºfooï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º`_foo`çš„å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿˜ä¼šè‡ªåŠ¨åˆæˆæ–°å˜é‡ä¹ˆï¼Ÿ</span>
</span><span class='line'><span class="err">åœ¨å›ç­”ä¹‹å‰å…ˆè¯´æ˜ä¸‹ä¸€ä¸ªæ¦‚å¿µï¼š</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="err">å®ä¾‹å˜é‡</span> <span class="o">=</span> <span class="err">æˆå‘˜å˜é‡</span> <span class="err">ï¼</span> <span class="n">ivar</span>
</span><span class='line'>
</span><span class='line'><span class="err">è¿™äº›è¯´æ³•ï¼Œç¬”è€…ä¸‹æ–‡ä¸­ï¼Œå¯èƒ½éƒ½ä¼šç”¨åˆ°ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="err">æ­£å¦‚</span>
</span><span class='line'><span class="p">[</span><span class="n">Apple</span><span class="err">å®˜æ–¹æ–‡æ¡£</span> <span class="o">***</span><span class="n">You</span> <span class="n">Can</span> <span class="n">Customize</span> <span class="n">Synthesized</span> <span class="n">Instance</span> <span class="n">Variable</span> <span class="n">Names</span><span class="o">***</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW6) æ‰€è¯´ï¼š</span>
</span><span class='line'><span class="o">!</span><span class="p">[</span><span class="n">enter</span> <span class="n">image</span> <span class="n">description</span> <span class="n">here</span><span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//i.imgur.com/D6d0zGJ.png)</span>
</span><span class='line'>
</span><span class='line'><span class="err">å¦‚æœä½¿ç”¨äº†å±æ€§çš„è¯ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°±ä¼šè‡ªåŠ¨ç¼–å†™è®¿é—®å±æ€§æ‰€éœ€çš„æ–¹æ³•ï¼Œæ­¤è¿‡ç¨‹å«åšâ€œè‡ªåŠ¨åˆæˆâ€</span><span class="p">(</span> <span class="k">auto</span> <span class="n">synthesis</span><span class="p">)</span><span class="err">ã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œæ‰€ä»¥ç¼–è¾‘å™¨é‡Œçœ‹ä¸åˆ°è¿™äº›â€œåˆæˆæ–¹æ³•â€</span> <span class="p">(</span><span class="n">synthesized</span> <span class="n">method</span><span class="p">)</span><span class="err">çš„æºä»£ç ã€‚é™¤äº†ç”Ÿæˆæ–¹æ³•ä»£ç ä¹‹å¤–ï¼Œç¼–è¯‘å™¨è¿˜è¦è‡ªåŠ¨å‘ç±»ä¸­æ·»åŠ é€‚å½“ç±»å‹çš„å®ä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨å±æ€§åå‰é¢åŠ ä¸‹åˆ’çº¿ï¼Œä»¥æ­¤ä½œä¸ºå®ä¾‹å˜é‡çš„åå­—ã€‚</span>
</span><span class='line'>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Objective-C
@interface CYLPerson : NSObject
@property NSString <em>firstName;
@property NSString </em>lastName;
@end</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="err">åœ¨ä¸Šä¾‹ä¸­ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªå®ä¾‹å˜é‡ï¼Œå…¶åç§°åˆ†åˆ«ä¸º</span>
</span><span class='line'><span class="err">`</span><span class="n">_firstName</span><span class="err">`ä¸`</span><span class="n">_lastName</span><span class="err">`ã€‚ä¹Ÿå¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡`</span><span class="k">@synthesize</span><span class="err">`è¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—</span><span class="o">:</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Objective-C
@implementation CYLPerson
@synthesize firstName = <em>myFirstName;
@synthesize lastName = </em>myLastName;
@end</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="err">ä¸Šè¿°è¯­æ³•ä¼šå°†ç”Ÿæˆçš„å®ä¾‹å˜é‡å‘½åä¸º`</span><span class="n">_myFirstName</span><span class="err">`ä¸`</span><span class="n">_myLastName</span><span class="err">`ï¼Œè€Œä¸å†ä½¿ç”¨é»˜è®¤çš„åå­—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ— é¡»ä¿®æ”¹é»˜è®¤çš„å®ä¾‹å˜é‡åï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ä»¥ä¸‹åˆ’çº¿æ¥å‘½åå®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¿™ä¸ªåŠæ³•å°†å…¶æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„åå­—ã€‚ç¬”è€…è¿˜æ˜¯æ¨èä½¿ç”¨é»˜è®¤çš„å‘½åæ–¹æ¡ˆï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰äººéƒ½åšæŒè¿™å¥—æ–¹æ¡ˆï¼Œé‚£ä¹ˆå†™å‡ºæ¥çš„ä»£ç å¤§å®¶éƒ½èƒ½çœ‹å¾—æ‡‚ã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="err">æ€»ç»“ä¸‹</span><span class="k">@synthesize</span><span class="err">åˆæˆå®ä¾‹å˜é‡çš„è§„åˆ™ï¼Œæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="err">å¦‚æœæŒ‡å®šäº†æˆå‘˜å˜é‡çš„åç§°</span><span class="p">,</span><span class="err">ä¼šç”Ÿæˆä¸€ä¸ªæŒ‡å®šçš„åç§°çš„æˆå‘˜å˜é‡</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">2.</span> <span class="err">å¦‚æœè¿™ä¸ªæˆå‘˜å·²ç»å­˜åœ¨äº†å°±ä¸å†ç”Ÿæˆäº†</span><span class="p">.</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">å¦‚æœæ˜¯</span> <span class="err">`</span><span class="k">@synthesize</span> <span class="n">foo</span><span class="p">;</span><span class="err">`</span> <span class="err">è¿˜ä¼šç”Ÿæˆä¸€ä¸ªåç§°ä¸º</span><span class="n">foo</span><span class="err">çš„æˆå‘˜å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼š</span>
</span><span class='line'>
</span><span class='line'> <span class="o">&gt;</span> <span class="err">å¦‚æœæ²¡æœ‰æŒ‡å®šæˆå‘˜å˜é‡çš„åç§°ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå±æ€§åŒåçš„æˆå‘˜å˜é‡</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'> <span class="mf">2.</span> <span class="err">å¦‚æœæ˜¯</span> <span class="err">`</span><span class="k">@synthesize</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">_foo</span><span class="p">;</span><span class="err">`</span> <span class="err">å°±ä¸ä¼šç”Ÿæˆæˆå‘˜å˜é‡äº†</span><span class="p">.</span>
</span><span class='line'>
</span><span class='line'><span class="err">å‡å¦‚</span><span class="n">property</span><span class="err">åä¸º</span><span class="n">foo</span><span class="err">ï¼Œå­˜åœ¨ä¸€ä¸ªåä¸º</span><span class="n">_foo</span><span class="err">çš„å®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆè¿˜ä¼šè‡ªåŠ¨åˆæˆæ–°å˜é‡ä¹ˆï¼Ÿ</span>
</span><span class='line'><span class="err">ä¸ä¼šã€‚å¦‚ä¸‹å›¾ï¼š</span>
</span><span class='line'>
</span><span class='line'><span class="o">!</span><span class="p">[</span><span class="n">enter</span> <span class="n">image</span> <span class="n">description</span> <span class="n">here</span><span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//i.imgur.com/t28ge4W.png)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cp">###15. åœ¨æœ‰äº†è‡ªåŠ¨åˆæˆå±æ€§å®ä¾‹å˜é‡ä¹‹åï¼Œ@synthesizeè¿˜æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</span>
</span><span class='line'>
</span><span class='line'><span class="err">å›ç­”è¿™ä¸ªé—®é¢˜å‰ï¼Œæˆ‘ä»¬è¦ææ¸…æ¥šä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¸ä¼š</span><span class="n">autosynthesis</span><span class="err">ï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Ÿ</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="err">åŒæ—¶é‡å†™äº†</span><span class="k">setter</span><span class="err">å’Œ</span><span class="k">getter</span><span class="err">æ—¶</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">é‡å†™äº†åªè¯»å±æ€§çš„</span><span class="k">getter</span><span class="err">æ—¶</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">ä½¿ç”¨äº†</span><span class="k">@dynamic</span><span class="err">æ—¶</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">åœ¨</span> <span class="k">@protocol</span> <span class="err">ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">åœ¨</span> <span class="n">category</span> <span class="err">ä¸­å®šä¹‰çš„æ‰€æœ‰å±æ€§</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">é‡è½½çš„å±æ€§</span>
</span><span class='line'>
</span><span class='line'> <span class="err">å½“ä½ åœ¨å­ç±»ä¸­é‡è½½äº†çˆ¶ç±»ä¸­çš„å±æ€§ï¼Œä½ å¿…é¡»</span> <span class="err">ä½¿ç”¨`</span><span class="k">@synthesize</span><span class="err">`æ¥æ‰‹åŠ¨åˆæˆ</span><span class="n">ivar</span><span class="err">ã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="err">é™¤äº†åä¸‰æ¡ï¼Œå¯¹å…¶ä»–å‡ ä¸ªæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºä¸€ä¸ªè§„å¾‹ï¼šå½“ä½ æƒ³æ‰‹åŠ¨ç®¡ç†</span><span class="k">@property</span><span class="err">çš„æ‰€æœ‰å†…å®¹æ—¶ï¼Œä½ å°±ä¼šå°è¯•é€šè¿‡å®ç°</span><span class="k">@property</span><span class="err">çš„æ‰€æœ‰â€œå­˜å–æ–¹æ³•â€ï¼ˆ</span><span class="n">the</span> <span class="n">accessor</span> <span class="n">methods</span><span class="err">ï¼‰æˆ–è€…ä½¿ç”¨`</span><span class="k">@dynamic</span><span class="err">`æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œè¿™æ—¶ç¼–è¯‘å™¨å°±ä¼šè®¤ä¸ºä½ æ‰“ç®—æ‰‹åŠ¨ç®¡ç†</span><span class="k">@property</span><span class="err">ï¼Œäºæ˜¯ç¼–è¯‘å™¨å°±ç¦ç”¨äº†</span><span class="n">autosynthesis</span><span class="err">ï¼ˆè‡ªåŠ¨åˆæˆï¼‰ã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="err">å› ä¸ºæœ‰äº†</span><span class="n">autosynthesis</span><span class="err">ï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Œå¤§éƒ¨åˆ†å¼€å‘è€…å·²ç»ä¹ æƒ¯ä¸å»æ‰‹åŠ¨å®šä¹‰</span><span class="n">ivar</span><span class="err">ï¼Œè€Œæ˜¯ä¾èµ–äº</span><span class="n">autosynthesis</span><span class="err">ï¼ˆè‡ªåŠ¨åˆæˆï¼‰ï¼Œä½†æ˜¯ä¸€æ—¦ä½ éœ€è¦ä½¿ç”¨</span><span class="n">ivar</span><span class="err">ï¼Œè€Œ</span><span class="n">autosynthesis</span><span class="err">ï¼ˆè‡ªåŠ¨åˆæˆï¼‰åˆå¤±æ•ˆäº†ï¼Œå¦‚æœä¸å»æ‰‹åŠ¨å®šä¹‰</span><span class="n">ivar</span><span class="err">ï¼Œé‚£ä¹ˆä½ å°±å¾—å€ŸåŠ©`</span><span class="k">@synthesize</span><span class="err">`æ¥æ‰‹åŠ¨åˆæˆ</span><span class="n">ivar</span><span class="err">ã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="err">å…¶å®ï¼Œ`</span><span class="k">@synthesize</span><span class="err">`è¯­æ³•è¿˜æœ‰ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼Œä½†æ˜¯ä¸å¤ªå»ºè®®å¤§å®¶ä½¿ç”¨ï¼š</span>
</span><span class='line'>
</span><span class='line'><span class="err">å¯ä»¥åœ¨ç±»çš„å®ç°ä»£ç é‡Œé€šè¿‡`</span><span class="k">@synthesize</span><span class="err">`è¯­æ³•æ¥æŒ‡å®šå®ä¾‹å˜é‡çš„åå­—</span><span class="o">:</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Objective-C
@implementation CYLPerson
@synthesize firstName = <em>myFirstName;
@synthesize lastName = </em>myLastName;
@end</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="err">ä¸Šè¿°è¯­æ³•ä¼šå°†ç”Ÿæˆçš„å®ä¾‹å˜é‡å‘½åä¸º`</span><span class="n">_myFirstName</span><span class="err">`ä¸`</span><span class="n">_myLastName</span><span class="err">`ï¼Œè€Œä¸å†ä½¿ç”¨é»˜è®¤çš„åå­—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹æ— é¡»ä¿®æ”¹é»˜è®¤çš„å®ä¾‹å˜é‡åï¼Œä½†æ˜¯å¦‚æœä½ ä¸å–œæ¬¢ä»¥ä¸‹åˆ’çº¿æ¥å‘½åå®ä¾‹å˜é‡ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨è¿™ä¸ªåŠæ³•å°†å…¶æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„åå­—ã€‚ç¬”è€…è¿˜æ˜¯æ¨èä½¿ç”¨é»˜è®¤çš„å‘½åæ¡ˆï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰äººéƒ½åšæŒè¿™å¥—æ–¹æ¡ˆï¼Œé‚£ä¹ˆå†™å‡ºæ¥çš„ä»£ç å¤§å®¶éƒ½èƒ½çœ‹å¾—æ‡‚ã€‚</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="err">ä¸¾ä¾‹è¯´æ˜ï¼šåº”ç”¨åœºæ™¯ï¼š</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// .mæ–‡ä»¶</span>
</span><span class='line'>  <span class="c1">// http://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)</span>
</span><span class='line'>  <span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>  <span class="c1">// æ‰“å¼€ç¬¬14è¡Œå’Œç¬¬17è¡Œä¸­ä»»æ„ä¸€è¡Œï¼Œå°±å¯ç¼–è¯‘æˆåŠŸ</span>
</span><span class='line'>
</span><span class='line'>  <span class="p">@</span><span class="n">import</span> <span class="n">Foundation</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">@interface</span> <span class="nc">CYLObject</span> : <span class="bp">NSObject</span>
</span><span class='line'>  <span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">copy</span><span class="p">)</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">title</span><span class="p">;</span>
</span><span class='line'>  <span class="k">@end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">@implementation</span> <span class="nc">CYLObject</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">//    NSString *_title;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//@synthesize title = _title;</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">-</span> <span class="p">(</span><span class="kt">instancetype</span><span class="p">)</span><span class="n">init</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>      <span class="nb">self</span> <span class="o">=</span> <span class="p">[</span><span class="nb">super</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nb">self</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">_title</span> <span class="o">=</span> <span class="s">@&quot;å¾®åš@iOSç¨‹åºçŠ­è¢&quot;</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">self</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">-</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">_title</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">setTitle</span><span class="p">:(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span> <span class="p">{</span>
</span><span class='line'>      <span class="n">_title</span> <span class="o">=</span> <span class="p">[</span><span class="n">title</span> <span class="k">copy</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">@end</span>
</span><span class='line'><span class="err">ç»“æœç¼–è¯‘å™¨æŠ¥é”™ï¼š</span>
</span><span class='line'><span class="o">!</span><span class="p">[</span><span class="n">enter</span> <span class="n">image</span> <span class="n">description</span> <span class="n">here</span><span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//i.imgur.com/fAEGHIo.png)</span>
</span><span class='line'>
</span><span class='line'><span class="err">å½“ä½ åŒæ—¶é‡å†™äº†</span><span class="k">setter</span><span class="err">å’Œ</span><span class="k">getter</span><span class="err">æ—¶ï¼Œç³»ç»Ÿå°±ä¸ä¼šç”Ÿæˆ</span><span class="n">ivar</span><span class="err">ï¼ˆå®ä¾‹å˜é‡</span><span class="o">/</span><span class="err">æˆå‘˜å˜é‡ï¼‰ã€‚è¿™æ—¶å€™æœ‰ä¸¤ç§é€‰æ‹©ï¼š</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="err">è¦ä¹ˆå¦‚ç¬¬</span><span class="mi">14</span><span class="err">è¡Œï¼šæ‰‹åŠ¨åˆ›å»º</span><span class="n">ivar</span>
</span><span class='line'> <span class="mf">2.</span> <span class="err">è¦ä¹ˆå¦‚ç¬¬</span><span class="mi">17</span><span class="err">è¡Œï¼šä½¿ç”¨`</span><span class="k">@synthesize</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">_foo</span><span class="p">;</span><span class="err">`</span> <span class="err">ï¼Œå…³è”</span><span class="k">@property</span><span class="err">ä¸</span><span class="n">ivar</span><span class="err">ã€‚</span>
</span><span class='line'>
</span><span class='line'><span class="err">æ›´å¤šä¿¡æ¯ï¼Œè¯·æˆ³</span><span class="o">-</span> <span class="err">ã€‹</span><span class="p">[</span> <span class="o">***</span><span class="n">When</span> <span class="n">should</span> <span class="n">I</span> <span class="n">use</span> <span class="k">@synthesize</span> <span class="n">explicitly</span><span class="o">?***</span> <span class="p">](</span><span class="nl">http</span><span class="p">:</span><span class="c1">//stackoverflow.com/a/19821816/3395008)</span>
</span><span class='line'><span class="cp">###16. objcä¸­å‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯å°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span>
</span><span class='line'><span class="err">åœ¨</span><span class="n">Objective</span><span class="o">-</span><span class="n">C</span><span class="err">ä¸­å‘</span><span class="nb">nil</span><span class="err">å‘é€æ¶ˆæ¯æ˜¯å®Œå…¨æœ‰æ•ˆçš„â€”â€”åªæ˜¯åœ¨è¿è¡Œæ—¶ä¸ä¼šæœ‰ä»»ä½•ä½œç”¨</span><span class="o">:</span>
</span><span class='line'>
</span><span class='line'> <span class="mf">1.</span> <span class="err">å¦‚æœä¸€ä¸ªæ–¹æ³•è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå‘é€ç»™</span><span class="nb">nil</span><span class="err">çš„æ¶ˆæ¯å°†è¿”å›</span><span class="mi">0</span><span class="p">(</span><span class="nb">nil</span><span class="p">)</span><span class="err">ã€‚ä¾‹å¦‚ï¼š</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'> <span class="err">```</span><span class="n">Objective</span><span class="o">-</span><span class="n">C</span>
</span><span class='line'><span class="n">Person</span> <span class="o">*</span> <span class="n">motherInlaw</span> <span class="o">=</span> <span class="p">[[</span><span class="n">aPerson</span> <span class="n">spouse</span><span class="p">]</span> <span class="n">mother</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p> å¦‚æœspouseå¯¹è±¡ä¸ºnilï¼Œé‚£ä¹ˆå‘é€ç»™nilçš„æ¶ˆæ¯motherä¹Ÿå°†è¿”å›nilã€‚
 2. å¦‚æœæ–¹æ³•è¿”å›å€¼ä¸ºæŒ‡é’ˆç±»å‹ï¼Œå…¶æŒ‡é’ˆå¤§å°ä¸ºå°äºæˆ–è€…ç­‰äºsizeof(void*)ï¼Œfloatï¼Œdoubleï¼Œlong double æˆ–è€…long longçš„æ•´å‹æ ‡é‡ï¼Œå‘é€ç»™nilçš„æ¶ˆæ¯å°†è¿”å›0ã€‚
 2. å¦‚æœæ–¹æ³•è¿”å›å€¼ä¸ºç»“æ„ä½“,å‘é€ç»™nilçš„æ¶ˆæ¯å°†è¿”å›0ã€‚ç»“æ„ä½“ä¸­å„ä¸ªå­—æ®µçš„å€¼å°†éƒ½æ˜¯0ã€‚
 2. å¦‚æœæ–¹æ³•çš„è¿”å›å€¼ä¸æ˜¯ä¸Šè¿°æåˆ°çš„å‡ ç§æƒ…å†µï¼Œé‚£ä¹ˆå‘é€ç»™nilçš„æ¶ˆæ¯çš„è¿”å›å€¼å°†æ˜¯æœªå®šä¹‰çš„ã€‚</p>

<p>å…·ä½“åŸå› å¦‚ä¸‹ï¼š</p>

<blockquote><p>objcæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ¨æ€è½¬ä¸ºæ¶ˆæ¯å‘é€ï¼Œå³ï¼šobjc_msgSend(receiver, selector)ã€‚</p></blockquote>

<p>é‚£ä¹ˆï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£è¿™ä¸ªå†…å®¹ï¼Œè¿˜æ˜¯è´´ä¸€ä¸ªobjcçš„æºä»£ç ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="c1">// runtime.hï¼ˆç±»åœ¨runtimeä¸­çš„å®šä¹‰ï¼‰</span>
</span><span class='line'><span class="c1">// http://weibo.com/luohanchenyilong/</span>
</span><span class='line'><span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'>
</span><span class='line'><span class="k">struct</span> <span class="n">objc_class</span> <span class="p">{</span>
</span><span class='line'>  <span class="kt">Class</span> <span class="n">isa</span> <span class="n">OBJC_ISA_AVAILABILITY</span><span class="p">;</span> <span class="c1">//isaæŒ‡é’ˆæŒ‡å‘Meta Classï¼Œå› ä¸ºObjcçš„ç±»çš„æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªObjectï¼Œä¸ºäº†å¤„ç†è¿™ä¸ªå…³ç³»ï¼Œruntimeå°±åˆ›é€ äº†Meta Classï¼Œå½“ç»™ç±»å‘é€[NSObject alloc]è¿™æ ·æ¶ˆæ¯æ—¶ï¼Œå®é™…ä¸Šæ˜¯æŠŠè¿™ä¸ªæ¶ˆæ¯å‘ç»™äº†Class Object</span>
</span><span class='line'>  <span class="cp">#if !__OBJC2__</span>
</span><span class='line'>  <span class="kt">Class</span> <span class="n">super_class</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// çˆ¶ç±»</span>
</span><span class='line'>  <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">name</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// ç±»å</span>
</span><span class='line'>  <span class="kt">long</span> <span class="n">version</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// ç±»çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œé»˜è®¤ä¸º0</span>
</span><span class='line'>  <span class="kt">long</span> <span class="n">info</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// ç±»ä¿¡æ¯ï¼Œä¾›è¿è¡ŒæœŸä½¿ç”¨çš„ä¸€äº›ä½æ ‡è¯†</span>
</span><span class='line'>  <span class="kt">long</span> <span class="n">instance_size</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// è¯¥ç±»çš„å®ä¾‹å˜é‡å¤§å°</span>
</span><span class='line'>  <span class="k">struct</span> <span class="n">objc_ivar_list</span> <span class="o">*</span><span class="n">ivars</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// è¯¥ç±»çš„æˆå‘˜å˜é‡é“¾è¡¨</span>
</span><span class='line'>  <span class="k">struct</span> <span class="n">objc_method_list</span> <span class="o">**</span><span class="n">methodLists</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// æ–¹æ³•å®šä¹‰çš„é“¾è¡¨</span>
</span><span class='line'>  <span class="k">struct</span> <span class="n">objc_cache</span> <span class="o">*</span><span class="n">cache</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// æ–¹æ³•ç¼“å­˜ï¼Œå¯¹è±¡æ¥åˆ°ä¸€ä¸ªæ¶ˆæ¯ä¼šæ ¹æ®isaæŒ‡é’ˆæŸ¥æ‰¾æ¶ˆæ¯å¯¹è±¡ï¼Œè¿™æ—¶ä¼šåœ¨method Listsä¸­éå†ï¼Œå¦‚æœcacheäº†ï¼Œå¸¸ç”¨çš„æ–¹æ³•è°ƒç”¨æ—¶å°±èƒ½å¤Ÿæé«˜è°ƒç”¨çš„æ•ˆç‡ã€‚</span>
</span><span class='line'>  <span class="k">struct</span> <span class="n">objc_protocol_list</span> <span class="o">*</span><span class="n">protocols</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span> <span class="c1">// åè®®é“¾è¡¨</span>
</span><span class='line'>  <span class="cp">#endif</span>
</span><span class='line'>  <span class="p">}</span> <span class="n">OBJC2_UNAVAILABLE</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œruntimeåº“ä¼šæ ¹æ®å¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡å®é™…æ‰€å±çš„ç±»ï¼Œç„¶ååœ¨è¯¥ç±»ä¸­çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠå…¶çˆ¶ç±»æ–¹æ³•åˆ—è¡¨ä¸­å¯»æ‰¾æ–¹æ³•è¿è¡Œï¼Œç„¶ååœ¨å‘é€æ¶ˆæ¯çš„æ—¶å€™ï¼Œobjc_msgSendæ–¹æ³•ä¸ä¼šè¿”å›å€¼ï¼Œæ‰€è°“çš„è¿”å›å†…å®¹éƒ½æ˜¯å…·ä½“è°ƒç”¨æ—¶æ‰§è¡Œçš„ã€‚
é‚£ä¹ˆï¼Œå›åˆ°æœ¬é¢˜ï¼Œå¦‚æœå‘ä¸€ä¸ªnilå¯¹è±¡å‘é€æ¶ˆæ¯ï¼Œé¦–å…ˆåœ¨å¯»æ‰¾å¯¹è±¡çš„isaæŒ‡é’ˆæ—¶å°±æ˜¯0åœ°å€è¿”å›äº†ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ã€‚</p>

<h3>17. objcä¸­å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯[obj foo]å’Œobjc_msgSend()å‡½æ•°ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>

<p>å…·ä½“åŸå› åŒä¸Šé¢˜ï¼šè¯¥æ–¹æ³•ç¼–è¯‘ä¹‹åå°±æ˜¯<code>objc_msgSend()</code>å‡½æ•°è°ƒç”¨.å¦‚æœæˆ‘æ²¡æœ‰è®°é”™çš„å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="p">((</span><span class="kt">void</span> <span class="p">()(</span><span class="kt">id</span><span class="p">,</span> <span class="kt">SEL</span><span class="p">))(</span><span class="kt">void</span> <span class="p">)</span><span class="n">objc_msgSend</span><span class="p">)((</span><span class="kt">id</span><span class="p">)</span><span class="n">obj</span><span class="p">,</span> <span class="n">sel_registerName</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">));</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>

<blockquote><p> [obj foo];åœ¨objcåŠ¨æ€ç¼–è¯‘æ—¶ï¼Œä¼šè¢«è½¬æ„ä¸ºï¼š<code>objc_msgSend(obj, @selector(foo));</code>ã€‚</p></blockquote>

<h3>18. ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectorçš„å¼‚å¸¸ï¼Ÿ</h3>

<p>ç®€å•æ¥è¯´ï¼š</p>

<blockquote><p>å½“ä½¿ç”¨æŸå¯¹è±¡ä¸Šçš„æŸä¸ªæ–¹æ³•,è€Œè¯¥å¯¹è±¡ä¸Šæ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œ
å¯ä»¥é€šè¿‡â€œæ¶ˆæ¯è½¬å‘â€è¿›è¡Œè§£å†³ã€‚</p></blockquote>

<p>ç®€å•çš„æµç¨‹å¦‚ä¸‹ï¼Œåœ¨ä¸Šä¸€é¢˜ä¸­ä¹Ÿæåˆ°è¿‡ï¼š</p>

<blockquote><p>objcæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæ¯ä¸ªæ–¹æ³•åœ¨è¿è¡Œæ—¶ä¼šè¢«åŠ¨æ€è½¬ä¸ºæ¶ˆæ¯å‘é€ï¼Œå³ï¼šobjc_msgSend(receiver, selector)ã€‚</p></blockquote>

<p>objcåœ¨å‘ä¸€ä¸ªå¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œruntimeåº“ä¼šæ ¹æ®å¯¹è±¡çš„isaæŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡å®é™…æ‰€å±çš„ç±»ï¼Œç„¶ååœ¨è¯¥ç±»ä¸­çš„æ–¹æ³•åˆ—è¡¨ä»¥åŠå…¶çˆ¶ç±»æ–¹æ³•åˆ—è¡¨ä¸­å¯»æ‰¾æ–¹æ³•è¿è¡Œï¼Œå¦‚æœï¼Œåœ¨æœ€é¡¶å±‚çš„çˆ¶ç±»ä¸­ä¾ç„¶æ‰¾ä¸åˆ°ç›¸åº”çš„æ–¹æ³•æ—¶ï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šæŒ‚æ‰å¹¶æŠ›å‡ºå¼‚å¸¸unrecognized selector sent to XXX ã€‚ä½†æ˜¯åœ¨è¿™ä¹‹å‰ï¼Œobjcçš„è¿è¡Œæ—¶ä¼šç»™å‡ºä¸‰æ¬¡æ‹¯æ•‘ç¨‹åºå´©æºƒçš„æœºä¼šï¼š</p>

<ol>
<li>Method resolution</li>
</ol>


<p> objcè¿è¡Œæ—¶ä¼šè°ƒç”¨<code>+resolveInstanceMethod:</code>æˆ–è€… <code>+resolveClassMethod:</code>ï¼Œè®©ä½ æœ‰æœºä¼šæä¾›ä¸€ä¸ªå‡½æ•°å®ç°ã€‚å¦‚æœä½ æ·»åŠ äº†å‡½æ•°å¹¶è¿”å› YESï¼Œé‚£è¿è¡Œæ—¶ç³»ç»Ÿå°±ä¼šé‡æ–°å¯åŠ¨ä¸€æ¬¡æ¶ˆæ¯å‘é€çš„è¿‡ç¨‹ï¼Œå¦‚æœ resolve æ–¹æ³•è¿”å› NO ï¼Œè¿è¡Œæ—¶å°±ä¼šç§»åˆ°ä¸‹ä¸€æ­¥ï¼Œæ¶ˆæ¯è½¬å‘ï¼ˆMessage Forwardingï¼‰ã€‚</p>

<ol>
<li>Fast forwarding</li>
</ol>


<p> å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†<code>-forwardingTargetForSelector:</code>ï¼ŒRuntime è¿™æ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç»™ä½ æŠŠè¿™ä¸ªæ¶ˆæ¯è½¬å‘ç»™å…¶ä»–å¯¹è±¡çš„æœºä¼šã€‚
åªè¦è¿™ä¸ªæ–¹æ³•è¿”å›çš„ä¸æ˜¯nilå’Œselfï¼Œæ•´ä¸ªæ¶ˆæ¯å‘é€çš„è¿‡ç¨‹å°±ä¼šè¢«é‡å¯ï¼Œå½“ç„¶å‘é€çš„å¯¹è±¡ä¼šå˜æˆä½ è¿”å›çš„é‚£ä¸ªå¯¹è±¡ã€‚å¦åˆ™ï¼Œå°±ä¼šç»§ç»­Normal Fowardingã€‚
è¿™é‡Œå«Fastï¼Œåªæ˜¯ä¸ºäº†åŒºåˆ«ä¸‹ä¸€æ­¥çš„è½¬å‘æœºåˆ¶ã€‚å› ä¸ºè¿™ä¸€æ­¥ä¸ä¼šåˆ›å»ºä»»ä½•æ–°çš„å¯¹è±¡ï¼Œä½†ä¸‹ä¸€æ­¥è½¬å‘ä¼šåˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡ï¼Œæ‰€ä»¥ç›¸å¯¹æ›´å¿«ç‚¹ã€‚
 3. Normal forwarding</p>

<p> è¿™ä¸€æ­¥æ˜¯Runtimeæœ€åä¸€æ¬¡ç»™ä½ æŒ½æ•‘çš„æœºä¼šã€‚é¦–å…ˆå®ƒä¼šå‘é€<code>-methodSignatureForSelector:</code>æ¶ˆæ¯è·å¾—å‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ã€‚å¦‚æœ<code>-methodSignatureForSelector:</code>è¿”å›nilï¼ŒRuntimeåˆ™ä¼šå‘å‡º<code>-doesNotRecognizeSelector:</code>æ¶ˆæ¯ï¼Œç¨‹åºè¿™æ—¶ä¹Ÿå°±æŒ‚æ‰äº†ã€‚å¦‚æœè¿”å›äº†ä¸€ä¸ªå‡½æ•°ç­¾åï¼ŒRuntimeå°±ä¼šåˆ›å»ºä¸€ä¸ªNSInvocationå¯¹è±¡å¹¶å‘é€<code>-forwardInvocation:</code>æ¶ˆæ¯ç»™ç›®æ ‡å¯¹è±¡ã€‚</p>

<h3>19. ä¸€ä¸ªobjcå¯¹è±¡å¦‚ä½•è¿›è¡Œå†…å­˜å¸ƒå±€ï¼Ÿï¼ˆè€ƒè™‘æœ‰çˆ¶ç±»çš„æƒ…å†µï¼‰</h3>

<ul>
<li>æ‰€æœ‰çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œè‡ªå·±çš„æˆå‘˜å˜é‡éƒ½ä¼šå­˜æ”¾åœ¨è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„å­˜å‚¨ç©ºé—´ä¸­.</li>
<li><p>æ¯ä¸€ä¸ªå¯¹è±¡å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆ,æŒ‡å‘ä»–çš„ç±»å¯¹è±¡,ç±»å¯¹è±¡ä¸­å­˜æ”¾ç€æœ¬å¯¹è±¡çš„</p></li>
<li><p>å¯¹è±¡æ–¹æ³•åˆ—è¡¨ï¼ˆå¯¹è±¡èƒ½å¤Ÿæ¥æ”¶çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œä¿å­˜åœ¨å®ƒæ‰€å¯¹åº”çš„ç±»å¯¹è±¡ä¸­ï¼‰</p></li>
<li>æˆå‘˜å˜é‡çš„åˆ—è¡¨,</li>
<li>å±æ€§åˆ—è¡¨,</li>
</ul>


<p> å®ƒå†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å…ƒå¯¹è±¡(meta class),å…ƒå¯¹è±¡å†…éƒ¨å­˜æ”¾çš„æ˜¯ç±»æ–¹æ³•åˆ—è¡¨,ç±»å¯¹è±¡å†…éƒ¨è¿˜æœ‰ä¸€ä¸ªsuperclassçš„æŒ‡é’ˆ,æŒ‡å‘ä»–çš„çˆ¶ç±»å¯¹è±¡ã€‚</p>

<p> <img src="http://i.imgur.com/7mJlUj1.png" alt="enter image description here" /></p>

<ul>
<li><p>æ ¹å¯¹è±¡å°±æ˜¯NSobjectï¼Œå®ƒçš„superclassæŒ‡é’ˆæŒ‡å‘nil</p></li>
<li><p>ç±»å¯¹è±¡æ—¢ç„¶ç§°ä¸ºå¯¹è±¡ï¼Œé‚£å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå®ä¾‹ã€‚ç±»å¯¹è±¡ä¸­ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å®ƒçš„å…ƒç±»(meta class)ï¼Œå³ç±»å¯¹è±¡æ˜¯å…ƒç±»çš„å®ä¾‹ã€‚å…ƒç±»å†…éƒ¨å­˜æ”¾çš„æ˜¯ç±»æ–¹æ³•åˆ—è¡¨ï¼Œæ ¹å…ƒç±»çš„isaæŒ‡é’ˆæŒ‡å‘è‡ªå·±ï¼ŒsuperclassæŒ‡é’ˆæŒ‡å‘NSObjectç±»ã€‚</p></li>
</ul>


<p>å¦‚å›¾:
<img src="http://i.imgur.com/w6tzFxz.png" alt="enter image description here" /></p>

<h3>20. ä¸€ä¸ªobjcå¯¹è±¡çš„isaçš„æŒ‡é’ˆæŒ‡å‘ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3>

<p>æŒ‡å‘ä»–çš„ç±»å¯¹è±¡,ä»è€Œå¯ä»¥æ‰¾åˆ°å¯¹è±¡ä¸Šçš„æ–¹æ³•</p>

<h3>21. ä¸‹é¢çš„ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ</h3>

<pre><code>@implementation Son : Father
- (id)init
{
    self = [super init];
    if (self) {
        NSLog(@"%@", NSStringFromClass([self class]));
        NSLog(@"%@", NSStringFromClass([super class]));
    }
    return self;
}
@end
</code></pre>

<p><strong>ç­”æ¡ˆï¼š</strong></p>

<p>éƒ½è¾“å‡º Son</p>

<pre><code>NSStringFromClass([self class]) = Son
NSStringFromClass([super class]) = Son
</code></pre>

<p><strong>è§£æƒ‘ï¼š</strong></p>

<p>ï¼ˆä»¥ä¸‹è§£æƒ‘éƒ¨åˆ†æ‘˜è‡ª<a href="http://weibo.com/junbbcom">å¾®åš@Chun_iOS</a>çš„åšæ–‡<a href="http://chun.tips/blog/2014/11/05/bao-gen-wen-di-objective%5Bnil%5Dc-runtime(1">åˆ¨æ ¹é—®åº•Objectiveï¼C Runtimeï¼ˆ1ï¼‰ï¼ Self &amp; Super</a>%5Bnil%5D-self-and-super/)ï¼‰</p>

<p>è¿™ä¸ªé¢˜ç›®ä¸»è¦æ˜¯è€ƒå¯Ÿå…³äºobjcä¸­å¯¹ self å’Œ super çš„ç†è§£ã€‚</p>

<p>self æ˜¯ç±»çš„éšè—å‚æ•°ï¼ŒæŒ‡å‘å½“å‰è°ƒç”¨æ–¹æ³•çš„è¿™ä¸ªç±»çš„å®ä¾‹ã€‚è€Œ super æ˜¯ä¸€ä¸ª Magic Keywordï¼Œ å®ƒæœ¬è´¨æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨æ ‡ç¤ºç¬¦ï¼Œå’Œ self æ˜¯æŒ‡å‘çš„åŒä¸€ä¸ªæ¶ˆæ¯æ¥å—è€…ã€‚</p>

<p>ä¸Šé¢çš„ä¾‹å­ä¸ç®¡è°ƒç”¨<code>[self class]</code>è¿˜æ˜¯<code>[super class]</code>ï¼Œæ¥å—æ¶ˆæ¯çš„å¯¹è±¡éƒ½æ˜¯å½“å‰ <code>Son ï¼Šxxx</code> è¿™ä¸ªå¯¹è±¡ã€‚è€Œä¸åŒçš„æ˜¯ï¼Œsuperæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè°ƒç”¨ class è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œè¦å»çˆ¶ç±»çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯æœ¬ç±»é‡Œçš„ã€‚</p>

<p>å½“ä½¿ç”¨ self è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä»å½“å‰ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»çˆ¶ç±»ä¸­å†æ‰¾ï¼›è€Œå½“ä½¿ç”¨ super æ—¶ï¼Œåˆ™ä»çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ã€‚ç„¶åè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•ã€‚</p>

<p>çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿç»§ç»­çœ‹ï¼š</p>

<p>ä½¿ç”¨clangé‡å†™å‘½ä»¤:</p>

<pre><code>$ clang -rewrite-objc test.m
</code></pre>

<p>å‘ç°ä¸Šè¿°ä»£ç è¢«è½¬åŒ–ä¸º:</p>

<pre><code>NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_0, NSStringFromClass(((Class (*)(id, SEL))(void *)objc_msgSend)((id)self, sel_registerName("class"))));

NSLog((NSString *)&amp;__NSConstantStringImpl__var_folders_gm_0jk35cwn1d3326x0061qym280000gn_T_main_a5cecc_mi_1, NSStringFromClass(((Class (*)(__rw_objc_super *, SEL))(void *)objc_msgSendSuper)((__rw_objc_super){ (id)self, (id)class_getSuperclass(objc_getClass("Son")) }, sel_registerName("class"))));
</code></pre>

<p>ä»ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨è°ƒç”¨ [self class] æ—¶ï¼Œä¼šè½¬åŒ–æˆ <code>objc_msgSend</code>å‡½æ•°ã€‚çœ‹ä¸‹å‡½æ•°å®šä¹‰ï¼š</p>

<pre><code>id objc_msgSend(id self, SEL op, ...)
</code></pre>

<p>æˆ‘ä»¬æŠŠ self åšä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›å»ã€‚</p>

<p>è€Œåœ¨è°ƒç”¨ [super class]æ—¶ï¼Œä¼šè½¬åŒ–æˆ <code>objc_msgSendSuper</code>å‡½æ•°ã€‚çœ‹ä¸‹å‡½æ•°å®šä¹‰:</p>

<pre><code>id objc_msgSendSuper(struct objc_super *super, SEL op, ...)
</code></pre>

<p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>objc_super</code> è¿™æ ·ä¸€ä¸ªç»“æ„ä½“ï¼Œå…¶å®šä¹‰å¦‚ä¸‹:</p>

<pre><code>struct objc_super {
   __unsafe_unretained id receiver;
   __unsafe_unretained Class super_class;
};
</code></pre>

<p>ç»“æ„ä½“æœ‰ä¸¤ä¸ªæˆå‘˜ï¼Œç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯ receiver, ç±»ä¼¼äºä¸Šé¢çš„ <code>objc_msgSend</code>å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°self ã€‚ç¬¬äºŒä¸ªæˆå‘˜æ˜¯è®°å½•å½“å‰ç±»çš„çˆ¶ç±»æ˜¯ä»€ä¹ˆã€‚</p>

<p>æ‰€ä»¥ï¼Œå½“è°ƒç”¨ ï¼»self class] æ—¶ï¼Œå®é™…å…ˆè°ƒç”¨çš„æ˜¯ <code>objc_msgSend</code>å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Sonå½“å‰çš„è¿™ä¸ªå®ä¾‹ï¼Œç„¶ååœ¨ Son è¿™ä¸ªç±»é‡Œé¢å»æ‰¾ - (Class)classè¿™ä¸ªæ–¹æ³•ï¼Œæ²¡æœ‰ï¼Œå»çˆ¶ç±» Fatheré‡Œæ‰¾ï¼Œä¹Ÿæ²¡æœ‰ï¼Œæœ€ååœ¨ NSObjectç±»ä¸­å‘ç°è¿™ä¸ªæ–¹æ³•ã€‚è€Œ - (Class)classçš„å®ç°å°±æ˜¯è¿”å›selfçš„ç±»åˆ«ï¼Œæ•…ä¸Šè¿°è¾“å‡ºç»“æœä¸º Sonã€‚</p>

<p>objc Runtimeå¼€æºä»£ç å¯¹- (Class)classæ–¹æ³•çš„å®ç°:</p>

<pre><code>- (Class)class {
    return object_getClass(self);
}
</code></pre>

<p>è€Œå½“è°ƒç”¨ <code>[super class]</code>æ—¶ï¼Œä¼šè½¬æ¢æˆ<code>objc_msgSendSuperå‡½æ•°</code>ã€‚ç¬¬ä¸€æ­¥å…ˆæ„é€  <code>objc_super</code> ç»“æ„ä½“ï¼Œç»“æ„ä½“ç¬¬ä¸€ä¸ªæˆå‘˜å°±æ˜¯ <code>self</code> ã€‚
ç¬¬äºŒä¸ªæˆå‘˜æ˜¯ <code>(id)class_getSuperclass(objc_getClass(â€œSonâ€))</code> , å®é™…è¯¥å‡½æ•°è¾“å‡ºç»“æœä¸º Fatherã€‚
ç¬¬äºŒæ­¥æ˜¯å» Fatherè¿™ä¸ªç±»é‡Œå»æ‰¾ <code>- (Class)class</code>ï¼Œæ²¡æœ‰ï¼Œç„¶åå»NSObjectç±»å»æ‰¾ï¼Œæ‰¾åˆ°äº†ã€‚æœ€åå†…éƒ¨æ˜¯ä½¿ç”¨ <code>objc_msgSend(objc_super-&gt;receiver, @selector(class))</code>å»è°ƒç”¨ï¼Œ
æ­¤æ—¶å·²ç»å’Œ<code>[self class]</code>è°ƒç”¨ç›¸åŒäº†ï¼Œæ•…ä¸Šè¿°è¾“å‡ºç»“æœä»ç„¶è¿”å› Sonã€‚</p>

<h3>22. runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€ï¼Ÿï¼ˆåˆ†åˆ«è€ƒè™‘ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰</h3>

<p>æ¯ä¸€ä¸ªç±»å¯¹è±¡ä¸­éƒ½ä¸€ä¸ªæ–¹æ³•åˆ—è¡¨,æ–¹æ³•åˆ—è¡¨ä¸­è®°å½•ç€æ–¹æ³•çš„åç§°,æ–¹æ³•å®ç°,ä»¥åŠå‚æ•°ç±»å‹,å…¶å®selectoræœ¬è´¨å°±æ˜¯æ–¹æ³•åç§°,é€šè¿‡è¿™ä¸ªæ–¹æ³•åç§°å°±å¯ä»¥åœ¨æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å®ç°.</p>

<h3>23. ä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œéœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾ä¹ˆï¼Ÿ</h3>

<ul>
<li>åœ¨ARCä¸‹ä¸éœ€è¦ã€‚</li>
<li><p><del> åœ¨MRCä¸­,å¯¹äºä½¿ç”¨retainæˆ–copyç­–ç•¥çš„éœ€è¦ ã€‚</del></p>åœ¨MRCä¸‹ä¹Ÿä¸éœ€è¦</li>
</ul>


<blockquote><p>æ— è®ºåœ¨MRCä¸‹è¿˜æ˜¯ARCä¸‹å‡ä¸éœ€è¦ã€‚</p></blockquote>

<p><a href="https://web.archive.org/web/20120818164935/http://developer.apple.com/library/ios/#/web/20120820002100/http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html"> <strong><em>2011å¹´ç‰ˆæœ¬çš„Apple API å®˜æ–¹æ–‡æ¡£ - Associative References</em></strong>  </a> ä¸€èŠ‚ä¸­æœ‰ä¸€ä¸ªMRCç¯å¢ƒä¸‹çš„ä¾‹å­ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='Objective-C'><span class='line'><span class="c1">// åœ¨MRCä¸‹ï¼Œä½¿ç”¨runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡ï¼Œä¸éœ€è¦åœ¨ä¸»å¯¹è±¡deallocçš„æ—¶å€™é‡Šæ”¾</span>
</span><span class='line'><span class="c1">// http://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)</span>
</span><span class='line'><span class="c1">// https://github.com/ChenYilong</span>
</span><span class='line'><span class="c1">// æ‘˜è‡ª2011å¹´ç‰ˆæœ¬çš„Apple API å®˜æ–¹æ–‡æ¡£ - Associative References </span>
</span><span class='line'>
</span><span class='line'><span class="k">static</span> <span class="kt">char</span> <span class="n">overviewKey</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="bp">NSArray</span> <span class="o">*</span><span class="n">array</span> <span class="o">=</span>
</span><span class='line'>    <span class="p">[[</span><span class="bp">NSArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithObjects</span><span class="p">:</span><span class="s">@&quot;One&quot;</span><span class="p">,</span> <span class="s">@&quot;Two&quot;</span><span class="p">,</span> <span class="s">@&quot;Three&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
</span><span class='line'><span class="c1">// For the purposes of illustration, use initWithFormat: to ensure</span>
</span><span class='line'><span class="c1">// the string can be deallocated</span>
</span><span class='line'><span class="bp">NSString</span> <span class="o">*</span><span class="n">overview</span> <span class="o">=</span>
</span><span class='line'>    <span class="p">[[</span><span class="bp">NSString</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFormat</span><span class="p">:</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span> <span class="s">@&quot;First three numbers&quot;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="n">objc_setAssociatedObject</span> <span class="p">(</span>
</span><span class='line'>    <span class="n">array</span><span class="p">,</span>
</span><span class='line'>    <span class="o">&amp;</span><span class="n">overviewKey</span><span class="p">,</span>
</span><span class='line'>    <span class="n">overview</span><span class="p">,</span>
</span><span class='line'>    <span class="n">OBJC_ASSOCIATION_RETAIN</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">overview</span> <span class="k">release</span><span class="p">];</span>
</span><span class='line'><span class="c1">// (1) overview valid</span>
</span><span class='line'><span class="p">[</span><span class="n">array</span> <span class="k">release</span><span class="p">];</span>
</span><span class='line'><span class="c1">// (2) overview invalid</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ–‡æ¡£æŒ‡å‡º</p>

<blockquote><p>At point 1, the string <code>overview</code> is still valid because the <code>OBJC_ASSOCIATION_RETAIN</code> policy specifies that the array retains the associated object. When the array is deallocated, however (at point 2), <code>overview</code> is released and so in this case also deallocated.</p></blockquote>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨<code>[array release];</code>ä¹‹åï¼Œoverviewå°±ä¼šè¢«releaseé‡Šæ”¾æ‰äº†ã€‚</p>

<p>æ—¢ç„¶ä¼šè¢«é”€æ¯ï¼Œé‚£ä¹ˆå…·ä½“åœ¨ä»€ä¹ˆæ—¶é—´ç‚¹ï¼Ÿ</p>

<blockquote><p>æ ¹æ®<a href="https://developer.apple.com/videos/wwdc/2011/#322-video"> <strong><em>WWDC 2011, Session 322 (ç¬¬36åˆ†22ç§’)</em></strong> </a>ä¸­å‘å¸ƒçš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ï¼Œè¢«å…³è”çš„å¯¹è±¡åœ¨ç”Ÿå‘½å‘¨æœŸå†…è¦æ¯”å¯¹è±¡æœ¬èº«é‡Šæ”¾çš„æ™šå¾ˆå¤šã€‚å®ƒä»¬ä¼šåœ¨è¢« NSObject -dealloc è°ƒç”¨çš„ object_dispose() æ–¹æ³•ä¸­é‡Šæ”¾ã€‚</p></blockquote>

<p>å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ï¼Œåˆ†å››ä¸ªæ­¥éª¤ï¼š</p>

<pre><code>// å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨
// http://weibo.com/luohanchenyilong/ (å¾®åš@iOSç¨‹åºçŠ­è¢)
// https://github.com/ChenYilong
// æ ¹æ® WWDC 2011, Session 322 (36åˆ†22ç§’)ä¸­å‘å¸ƒçš„å†…å­˜é”€æ¯æ—¶é—´è¡¨ 

// 1. è°ƒç”¨ -release ï¼šå¼•ç”¨è®¡æ•°å˜ä¸ºé›¶
//     * å¯¹è±¡æ­£åœ¨è¢«é”€æ¯ï¼Œç”Ÿå‘½å‘¨æœŸå³å°†ç»“æŸ.
//     * ä¸èƒ½å†æœ‰æ–°çš„ __weak å¼±å¼•ç”¨ï¼Œ å¦åˆ™å°†æŒ‡å‘ nil.
//     * è°ƒç”¨ [self dealloc] 
// 2. çˆ¶ç±» è°ƒç”¨ -dealloc
//     * ç»§æ‰¿å…³ç³»ä¸­æœ€åº•å±‚çš„çˆ¶ç±» åœ¨è°ƒç”¨ -dealloc
//     * å¦‚æœæ˜¯ MRC ä»£ç  åˆ™ä¼šæ‰‹åŠ¨é‡Šæ”¾å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰
//     * ç»§æ‰¿å…³ç³»ä¸­æ¯ä¸€å±‚çš„çˆ¶ç±» éƒ½åœ¨è°ƒç”¨ -dealloc
// 3. NSObject è°ƒ -dealloc
//     * åªåšä¸€ä»¶äº‹ï¼šè°ƒç”¨ Objective-C runtime ä¸­çš„ object_dispose() æ–¹æ³•
// 4. è°ƒç”¨ object_dispose()
//     * ä¸º C++ çš„å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰è°ƒç”¨ destructors 
//     * ä¸º ARC çŠ¶æ€ä¸‹çš„ å®ä¾‹å˜é‡ä»¬ï¼ˆiVarsï¼‰ è°ƒç”¨ -release 
//     * è§£é™¤æ‰€æœ‰ä½¿ç”¨ runtime Associateæ–¹æ³•å…³è”çš„å¯¹è±¡
//     * è§£é™¤æ‰€æœ‰ __weak å¼•ç”¨
//     * è°ƒç”¨ free()
</code></pre>

<p>ï¼ˆ<a href="http://stackoverflow.com/a/10843510/3395008">å¯¹è±¡çš„å†…å­˜é”€æ¯æ—¶é—´è¡¨å‚è€ƒé“¾æ¥</a>ï¼‰</p>

<h3>24. objcä¸­çš„ç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«å’Œè”ç³»ï¼Ÿ</h3>

<p>ç±»æ–¹æ³•ï¼š</p>

<ol>
<li>ç±»æ–¹æ³•æ˜¯å±äºç±»å¯¹è±¡çš„</li>
<li>ç±»æ–¹æ³•åªèƒ½é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨</li>
<li>ç±»æ–¹æ³•ä¸­çš„selfæ˜¯ç±»å¯¹è±¡</li>
<li>ç±»æ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–çš„ç±»æ–¹æ³•</li>
<li>ç±»æ–¹æ³•ä¸­ä¸èƒ½è®¿é—®æˆå‘˜å˜é‡</li>
<li>ç±»æ–¹æ³•ä¸­ä¸å®šç›´æ¥è°ƒç”¨å¯¹è±¡æ–¹æ³•</li>
</ol>


<p>å®ä¾‹æ–¹æ³•ï¼š</p>

<ol>
<li>å®ä¾‹æ–¹æ³•æ˜¯å±äºå®ä¾‹å¯¹è±¡çš„</li>
<li>å®ä¾‹æ–¹æ³•åªèƒ½é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨</li>
<li>å®ä¾‹æ–¹æ³•ä¸­çš„selfæ˜¯å®ä¾‹å¯¹è±¡</li>
<li>å®ä¾‹æ–¹æ³•ä¸­å¯ä»¥è®¿é—®æˆå‘˜å˜é‡</li>
<li>å®ä¾‹æ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•</li>
<li>å®ä¾‹æ–¹æ³•ä¸­ä¹Ÿå¯ä»¥è°ƒç”¨ç±»æ–¹æ³•(é€šè¿‡ç±»å)</li>
</ol>


<h2>ä¸‹ä¸€ç¯‡æ–‡ç« å°†å‘å¸ƒåœ¨<a href="https://github.com/ChenYilong/iOSInterviewQuestions">è¿™é‡Œ</a>ï¼Œä¼šå¯¹ä»¥ä¸‹é—®é¢˜è¿›è¡Œæ€»ç»“ï¼Œå¹¶å°†æœ¬ç¯‡æ–‡ç« çš„å‹˜è¯¯ä¸€å¹¶åˆ—å‡ºï¼Œæ¬¢è¿æŒ‡æ­£ï¼è¯·æŒç»­å…³æ³¨<a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a></h2>

<p>@propertyéƒ¨åˆ†ä¸»è¦å‚è€ƒ
<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW2">Appleå®˜æ–¹æ–‡æ¡£ï¼šProperties Encapsulate an Objectâ€™s Values</a>
runtimeéƒ¨åˆ†ä¸»è¦å‚è€ƒ<a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html">Appleå®˜æ–¹æ–‡æ¡£ï¼šDeclared Properties</a></p>

<h3>25. <code>_objc_msgForward</code>å‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼Œç›´æ¥è°ƒç”¨å®ƒå°†ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3>

<h3>26. runtimeå¦‚ä½•å®ç°weakå˜é‡çš„è‡ªåŠ¨ç½®nilï¼Ÿ</h3>

<h3>27. èƒ½å¦å‘ç¼–è¯‘åå¾—åˆ°çš„ç±»ä¸­å¢åŠ å®ä¾‹å˜é‡ï¼Ÿèƒ½å¦å‘è¿è¡Œæ—¶åˆ›å»ºçš„ç±»ä¸­æ·»åŠ å®ä¾‹å˜é‡ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3>

<h3>28. runloopå’Œçº¿ç¨‹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h3>

<h3>29. runloopçš„modeä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>

<h3>30. ä»¥+ scheduledTimerWithTimeInterval&hellip;çš„æ–¹å¼è§¦å‘çš„timerï¼Œåœ¨æ»‘åŠ¨é¡µé¢ä¸Šçš„åˆ—è¡¨æ—¶ï¼Œtimerä¼šæš‚å®šå›è°ƒï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</h3>

<h3>31. çŒœæƒ³runloopå†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3>

<h3>32. objcä½¿ç”¨ä»€ä¹ˆæœºåˆ¶ç®¡ç†å¯¹è±¡å†…å­˜ï¼Ÿ</h3>

<h3>33. ARCé€šè¿‡ä»€ä¹ˆæ–¹å¼å¸®åŠ©å¼€å‘è€…ç®¡ç†å†…å­˜ï¼Ÿ</h3>

<h3>34. ä¸æ‰‹åŠ¨æŒ‡å®šautoreleasepoolçš„å‰æä¸‹ï¼Œä¸€ä¸ªautorealeseå¯¹è±¡åœ¨ä»€ä¹ˆæ—¶åˆ»é‡Šæ”¾ï¼Ÿï¼ˆæ¯”å¦‚åœ¨ä¸€ä¸ªvcçš„viewDidLoadä¸­åˆ›å»ºï¼‰</h3>

<h3>35. <code>BAD_ACCESS</code>åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°ï¼Ÿ</h3>

<h3>36. è‹¹æœæ˜¯å¦‚ä½•å®ç°autoreleasepoolçš„ï¼Ÿ</h3>

<h3>37. ä½¿ç”¨blockæ—¶ä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå¼•ç”¨å¾ªç¯ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</h3>

<h3>38. åœ¨blockå†…å¦‚ä½•ä¿®æ”¹blockå¤–éƒ¨å˜é‡ï¼Ÿ</h3>

<h3>39. ä½¿ç”¨ç³»ç»Ÿçš„æŸäº›block apiï¼ˆå¦‚UIViewçš„blockç‰ˆæœ¬å†™åŠ¨ç”»æ—¶ï¼‰ï¼Œæ˜¯å¦ä¹Ÿè€ƒè™‘å¼•ç”¨å¾ªç¯é—®é¢˜ï¼Ÿ</h3>

<h3>40. GCDçš„é˜Ÿåˆ—ï¼ˆ<code>dispatch_queue_t</code>ï¼‰åˆ†å“ªä¸¤ç§ç±»å‹ï¼Ÿ</h3>

<h3>41. å¦‚ä½•ç”¨GCDåŒæ­¥è‹¥å¹²ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Ÿï¼ˆå¦‚æ ¹æ®è‹¥å¹²ä¸ªurlå¼‚æ­¥åŠ è½½å¤šå¼ å›¾ç‰‡ï¼Œç„¶ååœ¨éƒ½ä¸‹è½½å®Œæˆååˆæˆä¸€å¼ æ•´å›¾ï¼‰</h3>

<h3>42. <code>dispatch_barrier_async</code>çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>

<h3>43. è‹¹æœä¸ºä»€ä¹ˆè¦åºŸå¼ƒ<code>dispatch_get_current_queue</code>ï¼Ÿ</h3>

<h3>44. ä»¥ä¸‹ä»£ç è¿è¡Œç»“æœå¦‚ä½•ï¼Ÿ</h3>

<pre><code>- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"1");
    dispatch_sync(dispatch_get_main_queue(), ^{
        NSLog(@"2");
    });
    NSLog(@"3");
}
</code></pre>

<h3>45. addObserver:forKeyPath:options:context:å„ä¸ªå‚æ•°çš„ä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œobserverä¸­éœ€è¦å®ç°å“ªä¸ªæ–¹æ³•æ‰èƒ½è·å¾—KVOå›è°ƒï¼Ÿ</h3>

<h3>46. å¦‚ä½•æ‰‹åŠ¨è§¦å‘ä¸€ä¸ªvalueçš„KVO</h3>

<h3>47. è‹¥ä¸€ä¸ªç±»æœ‰å®ä¾‹å˜é‡<code>NSString *_foo</code>ï¼Œè°ƒç”¨setValue:forKey:æ—¶ï¼Œå¯ä»¥ä»¥fooè¿˜æ˜¯<code>_foo</code>ä½œä¸ºkeyï¼Ÿ</h3>

<h3>48. KVCçš„keyPathä¸­çš„é›†åˆè¿ç®—ç¬¦å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3>

<h3>49. KVCå’ŒKVOçš„keyPathä¸€å®šæ˜¯å±æ€§ä¹ˆï¼Ÿ</h3>

<h3>50. å¦‚ä½•å…³é—­é»˜è®¤çš„KVOçš„é»˜è®¤å®ç°ï¼Œå¹¶è¿›å…¥è‡ªå®šä¹‰çš„KVOå®ç°ï¼Ÿ</h3>

<h3>51. appleç”¨ä»€ä¹ˆæ–¹å¼å®ç°å¯¹ä¸€ä¸ªå¯¹è±¡çš„KVOï¼Ÿ</h3>

<h3>52. IBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?</h3>

<h3>53. IBä¸­User Defined Runtime Attributeså¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3>

<h3>54. å¦‚ä½•è°ƒè¯•<code>BAD_ACCESS</code>é”™è¯¯</h3>

<h3>55. lldbï¼ˆgdbï¼‰å¸¸ç”¨çš„è°ƒè¯•å‘½ä»¤ï¼Ÿ</h3>

<hr />

<p>Posted by <a href="http://weibo.com/luohanchenyilong/">å¾®åš@iOSç¨‹åºçŠ­è¢</a><br/>
åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">Creative Commons BY-NC-ND 3.0</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å®ç°placeholderå±æ€§çš„UITextView]]></title>
    <link href="http://www.superqq.com/blog/2015/08/07/implement-uitextview-placeholder/"/>
    <updated>2015-08-07T00:27:43+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/07/implement-uitextview-placeholder</id>
    <content type="html"><![CDATA[<p>iOSå¼€å‘å¾®ä¿¡å…¬ä¼—å·ä¸Šçš„iOSæŠ€æœ¯æ–‡ç« ï¼Œéƒ½å°†å‘å¸ƒåœ¨<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>ã€‚æ‰€ä»¥å¤§å®¶å¯ä»¥åˆ°æˆ‘çš„ç½‘ç«™ä¸ŠæŸ¥çœ‹ä¹‹å‰çš„æ–‡ç« ï¼Œä¹Ÿå¯ä»¥åœ¨åº•éƒ¨çš„ç²¾å½©æ–‡ç« æŸ¥çœ‹å†å²æ–‡ç« ã€‚</p>

<p>ä¸Šä¸€ç¯‡æ–‡ç« <a href="http://www.superqq.com/blog/2015/08/06/uitextview-placeholder-practice/">UITextViewå®ç°placeholderçš„çŒ¥çåšæ³•</a>è®²äº†å…³äº<code>UITextView</code>çš„<code>placeholder</code>å®ç°åŸç†ã€‚å¤§å®¶éƒ½ä¸€è‡´è®¤ä¸ºåšæ³•æ¯”è¾ƒçŒ¥çã€‚</p>

<p>é‚£ä¹ˆï¼Œè¿™ä¸€æ¬¡æˆ‘å°†ç®€å•çš„å°è£…ä¸€ä¸ª<code>UITextView</code>ã€‚æš‚ä¸”å–åå«<code>GGPlaceholderTextView</code>ï¼ŒGGå‰ç¼€çœ‹ç€æœ‰ç‚¹ä»»æ€§çš„å“ˆã€‚</p>

<h2>GGPlaceholderTextViewç®€ä»‹</h2>

<p><code>GGPlaceholderTextView</code>ä¹Ÿæ˜¯å¯¹<code>text</code>æ“ä½œï¼Œå…·ä½“é€»è¾‘å¦‚ä¸‹ï¼š</p>

<ol>
<li>ç»§æ‰¿<code>UITextView</code>ï¼Œå¹¶è®¾ç½®<code>placeholder</code>å±æ€§</li>
<li>æ³¨å†Œå¼€å§‹ç¼–è¾‘å’Œç»“æŸç¼–è¾‘é€šçŸ¥ï¼Œç„¶åå¯¹<code>text</code>åšç›¸åº”çš„æ“ä½œ</li>
<li>é€šè¿‡<code>UIApplicationWillTerminateNotification</code>é€šçŸ¥ï¼Œåœ¨APPé€€å‡ºçš„æ—¶å€™ç§»é™¤é€šçŸ¥ã€‚</li>
</ol>


<p>æˆ‘æŠŠ<code>GGPlaceholderTextView</code>å†™åœ¨ä¸‹é¢ã€‚ä¸è¿‡ï¼Œå¾®ä¿¡é‡Œçœ‹ä»£ç è¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œæˆ‘å·²ç»æŠŠä»£ç pushåˆ°:<a href="https://github.com/worldligang/iOSStrongDemo">iOSStrongDemo</a>ã€‚ä½ å¯ä»¥ä¸‹è½½ä¸‹æ¥ã€‚</p>

<h2>GGPlaceholderTextView.h</h2>

<pre><code>#import &lt;UIKit/UIKit.h&gt;

@interface GGPlaceholderTextView : UITextView
@property(nonatomic, strong) NSString *placeholder;

@end
</code></pre>

<p>å®šä¹‰<code>placeholder</code>å±æ€§ï¼Œç±»ä¼¼äº<code>UITextField</code>ã€‚</p>

<h2>GGPlaceholderTextView.m</h2>

<pre><code>#import "GGPlaceholderTextView.h"

@implementation GGPlaceholderTextView

- (id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {
        [self addObserver];
    }
    return self;
}

- (id)init {
    if (self = [super init]) {
        [self addObserver];
    }
    return self;
}

- (void)setPlaceholder:(NSString *)placeholder
{
    _placeholder = placeholder;
    self.text = placeholder;
    self.textColor = [UIColor grayColor];
}

-(void)addObserver
{
    //æ³¨å†Œé€šçŸ¥
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didBeginEditing:) name:UITextViewTextDidBeginEditingNotification object:self];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didEndEditing:) name:UITextViewTextDidEndEditingNotification object:self];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(terminate:) name:UIApplicationWillTerminateNotification object:[UIApplication sharedApplication]];
}

- (void)terminate:(NSNotification *)notification {
    //ç§»é™¤é€šçŸ¥
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

- (void)didBeginEditing:(NSNotification *)notification {
    if ([self.text isEqualToString:self.placeholder]) {
        self.text = @"";
        self.textColor = [UIColor blackColor];
    }
}

- (void)didEndEditing:(NSNotification *)notification {
    if (self.text.length&lt;1) {
        self.text = self.placeholder;
        self.textColor = [UIColor grayColor];
    }
}

@end
</code></pre>

<p>ä»¥ä¸Šå°±æ˜¯å…³äº<code>GGPlaceholderTextView</code>çš„å®ç°ï¼Œå¦‚æœä½ æœ‰ç±»ä¼¼éœ€æ±‚ï¼Œç›´æ¥æ‹¿å»ç”¨å§ï¼å…·ä½“ç”¨æ³•è¯·å¾€ä¸‹çœ‹ã€‚</p>

<h2>å®è·µ</h2>

<pre><code>GGPlaceholderTextView *textView = [[GGPlaceholderTextView alloc] initWithFrame:CGRectMake(0, 64, SCREEN.width , 200)];
textView.backgroundColor = [UIColor whiteColor];
textView.placeholder = @"å…³æ³¨å¾®ä¿¡å…¬ä¼—å·iOSå¼€å‘ï¼šiOSDevTip";
[self.view addSubview:textView];
</code></pre>

<p>ç»è¿‡å°è£…åçš„<code>GGPlaceholderTextView</code>ï¼Œä½¿ç”¨èµ·æ¥æ˜¯ä¸æ˜¯è·Ÿ<code>UITextField</code>éå¸¸ç›¸ä¼¼ã€‚å½“ç„¶ï¼Œæˆ‘å°è£…çš„æ¯”è¾ƒç®€å•ï¼Œgithubä¸Šä¹Ÿæœ‰ä¸€äº›æœ‹å‹å°è£…å¸¦<code>placeholder</code>å±æ€§çš„<code>UITextView</code>ã€‚æ¯”å¦‚ï¼šTextViewPlaceholderã€‚æ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥å»è¯•ç”¨ä¸€ä¸‹ã€‚</p>

<p><strong>å¹¿å‘Šæ—¶é—´</strong></p>

<p>ä½ çš„åˆ†äº«å°±æ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒï¼Œå¸Œæœ›ä½ èƒ½æŠŠiOSå¼€å‘æ¨èç»™ä½ çš„æœ‹å‹ï¼Œä¸ç”šæ„Ÿæ¿€ï¼</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[UITextViewå®ç°placeholderçš„çŒ¥çåšæ³•]]></title>
    <link href="http://www.superqq.com/blog/2015/08/06/uitextview-placeholder-practice/"/>
    <updated>2015-08-06T21:37:38+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/06/uitextview-placeholder-practice</id>
    <content type="html"><![CDATA[<p>æˆ‘ç»å¸¸å†™ä¸€äº›<a href="http://www.superqq.com/">iOSå¼€å‘</a>çš„å°æŠ€å·§ï¼Œä¸ºäº†åœ¨è‡ªå·±éœ€è¦çš„æ—¶å€™èƒ½ç”¨å¾—ä¸Šï¼Œä¹Ÿå¸Œæœ›èƒ½å¯¹æ­£åœ¨çœ‹æ–‡ç« çš„ä½ ä¸€äº›å¸®åŠ©ï¼Œäº¦æˆ–æ˜¯å¼•å‘ä¸€äº›æ€è€ƒã€‚</p>

<p>å¦‚æœä½ è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·å¤šå¤šåˆ†äº«ã€‚ä½ èº«è¾¹ä¸€å®šæœ‰å¾ˆå¤šåšiOSå¼€å‘çš„æœ‹å‹ï¼Œå¸Œæœ›ä½ èƒ½æŠŠæˆ‘çš„iOSå¼€å‘ï¼š<strong>iOSDevTip</strong>æ¨èç»™ä½ çš„æœ‹å‹ã€‚ä¸ç”šæ„Ÿæ¿€ï¼</p>

<p>æˆ‘ä»¬éƒ½çŸ¥é“iOSå¼€å‘ä¸­çš„<code>UITextField</code>æœ‰ä¸ª<code>placeholder</code>å±æ€§ï¼Œ<code>placeholder</code>å¯ä»¥å¾ˆæ–¹ä¾¿å¼•å¯¼ç”¨æˆ·è¾“å…¥ã€‚ä½†æ˜¯<code>UITextView</code>å´æ²¡æœ‰<code>placeholder</code>å±æ€§ã€‚</p>

<h2>çŒ¥çæ³•åˆ†æ</h2>

<p>å¦‚ä½•è®©<code>UITextView</code>ä¹Ÿæœ‰<code>placeholder</code>åŠŸèƒ½å‘¢ï¼Ÿä»Šå¤©ç»™å„ä½åˆ†äº«ä¸€ä¸ªæ¯”è¾ƒçŒ¥ççš„åšæ³•ã€‚æ€è·¯å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>

<ol>
<li>æŠŠ<code>UITextView</code>çš„<code>text</code>å½“<code>placeholder</code>ä½¿ç”¨ã€‚</li>
<li>åœ¨å¼€å§‹ç¼–è¾‘çš„ä»£ç†æ–¹æ³•é‡Œæ¸…é™¤<code>placeholder</code>ã€‚</li>
<li>åœ¨ç»“æŸç¼–è¾‘çš„ä»£ç†æ–¹æ³•é‡Œåœ¨è®¾ç½®<code>placeholder</code>ã€‚</li>
</ol>


<h2>å®ç°æ–¹æ³•</h2>

<h3>åˆ›å»ºUITextView</h3>

<pre><code>UITextView *textViewPlaceholder = [[UITextView alloc] initWithFrame:CGRectMake(20, 70, SCREEN.width - 40, 100)];
textViewPlaceholder.backgroundColor = [UIColor whiteColor];
textViewPlaceholder.text = @"å…³æ³¨å¾®ä¿¡å…¬ä¼—å·iOSå¼€å‘ï¼šiOSDevTip";
textViewPlaceholder.textColor = [UIColor grayColor];
textViewPlaceholder.delegate = self;
[self.view addSubview:textViewPlaceholder];
</code></pre>

<p>åˆå§‹åŒ–<code>UITextView</code>ï¼Œç»™<code>UITextView</code>çš„<code>text</code>èµ‹å€¼ï¼Œå¹¶ä¸”ç»™<code>UITextView</code>çš„<code>textColor</code>å±æ€§è®¾ç½®æˆç°è‰²ï¼Œè®©å…¶çœ‹èµ·æ¥æ›´åƒ<code>placeholder</code>ã€‚</p>

<p>åˆ«å¿˜äº†è®¾ç½®<code>UITextView</code>çš„ä»£ç†ï¼Œå› ä¸ºåé¢æˆ‘ä»¬è¦ç”¨åˆ°<code>UITextView</code>çš„ä¸¤ä¸ªä»£ç†æ–¹æ³•ã€‚</p>

<h3>å¼€å§‹ç¼–è¾‘çš„ä»£ç†æ–¹æ³•</h3>

<pre><code>- (void)textViewDidBeginEditing:(UITextView *)textView {

    if ([textView.text isEqualToString:@"å…³æ³¨å¾®ä¿¡å…¬ä¼—å·iOSå¼€å‘ï¼šiOSDevTip"]) {
        textView.text = @"";
        textView.textColor = [UIColor blackColor];
    }
}
</code></pre>

<p>åœ¨å¼€å§‹ç¼–è¾‘çš„ä»£ç†æ–¹æ³•é‡Œé¢ï¼Œåˆ¤æ–­å¦‚æœæ˜¯<code>UITextView</code>çš„<code>text</code>çš„å€¼æ˜¯<code>placeholder</code>ï¼Œé‚£ä¹ˆï¼Œå°±æ¸…ç©º<code>text</code>ï¼Œå¹¶ä¸”æŠŠ<code>textColor</code>è®¾ç½®æˆçœŸæ­£çš„å†…å®¹é¢œè‰²ï¼Œå‡è®¾æ˜¯é»‘è‰²ã€‚</p>

<h3>ç»“æŸç¼–è¾‘çš„ä»£ç†æ–¹æ³•</h3>

<pre><code>- (void)textViewDidEndEditing:(UITextView *)textView {
    if (textView.text.length&lt;1) {
        textView.text = @"å…³æ³¨å¾®ä¿¡å…¬ä¼—å·iOSå¼€å‘ï¼šiOSDevTip";
        textView.textColor = [UIColor grayColor];
    }
}
</code></pre>

<p>åœ¨ç»“æŸç¼–è¾‘çš„ä»£ç†æ–¹æ³•é‡Œï¼Œåˆ¤æ–­å¦‚æœ<code>UITextView</code>çš„<code>text</code>å€¼ä¸ºç©ºï¼Œé‚£ä¹ˆï¼Œå°±è¦æŠŠéœ€è¦è®¾ç½®çš„<code>placeholder</code>èµ‹å€¼ç»™<code>UITextView</code>çš„<code>text</code>ï¼Œå¹¶ä¸”å°†<code>textColor</code>å±æ€§è®¾ç½®æˆç°è‰²ã€‚</p>

<h2>æ·»åŠ è½»å‡»æ‰‹åŠ¿</h2>

<pre><code>UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapGesture:)];
tapGesture.numberOfTapsRequired = 1; //ç‚¹å‡»æ¬¡æ•°
tapGesture.numberOfTouchesRequired = 1; //ç‚¹å‡»æ‰‹æŒ‡æ•°
[self.view addGestureRecognizer:tapGesture];

//è½»å‡»æ‰‹åŠ¿è§¦å‘æ–¹æ³•
-(void)tapGesture:(UITapGestureRecognizer *)sender
{
    [self.view endEditing:YES];
}
</code></pre>

<p>è‡³æ­¤ï¼Œå°±å¾ˆçŒ¥ççš„å®ç°äº†<code>placeholder</code>åŠŸèƒ½ã€‚ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘åŠ äº†ä¸€ä¸ªæ‰‹åŠ¿ã€‚ä½œç”¨æ˜¯ç”¨é”®ç›˜æ¶ˆå¤±ï¼Œè¿™æ ·å¯ä»¥æµ‹è¯•ç»“æŸç¼–è¾‘çš„æ—¶å€™<code>placeholder</code>ä¼šä¸ä¼šæ˜¾ç¤ºã€‚demoåœ°å€ï¼šDemoåœ°å€:<a href="https://github.com/worldligang/iOSStrongDemo">iOSStrongDemo</a></p>

<p>æ·»åŠ æ‰‹åŠ¿çš„æ–¹æ³•å¾ˆç®€å•ï¼Œå…³äºiOSå¼€å‘ä¸­çš„æ‰‹åŠ¿æ±‡æ€»ï¼Œä½ å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« <a href="http://www.superqq.com/blog/2015/01/14/ioskai-fa-zhi-shou-shi-shi-bie-hui-zong/">iOSå¼€å‘ä¹‹æ‰‹åŠ¿è¯†åˆ«æ±‡æ€»</a>ã€‚</p>

<p>æˆ‘çœ‹äº†ç½‘ä¸Šä¸€äº›å®ç°<code>UITextView</code>çš„<code>placeholder</code>åŠŸèƒ½çš„æ›´çŒ¥ççš„åšæ³•ï¼Œåœ¨<code>UITextView</code>ä¸Šé¢ç›–ä¸€ä¸ª<code>UILabel</code>ï¼Œç„¶ååœ¨<code>UITextView</code>çš„ä»£ç†æ–¹æ³•é‡Œæ§åˆ¶<code>UILabel</code>çš„å€¼ã€‚è¿˜æœ‰ç”¨ä¸¤ä¸ª<code>UITextView</code>å®ç°çš„ã€‚</p>

<p>åœ¨è¿™é‡Œï¼Œæˆ‘åªæ˜¯æŠ›ç –å¼•ç‰ï¼Œå¦‚æœä½ æœ‰æ›´å¥½çš„å®ç°æ–¹æ³•æ¬¢è¿æŠ•ç¨¿ç»™æˆ‘ï¼š<strong>worldligang@163.com</strong>ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘å°†ä¼šå°è£…ä¸€ä¸ªå¸¦æœ‰<code>placeholder</code>å±æ€§çš„<code>UITextView</code>ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å¤šä¸ªUIImageåˆå¹¶æˆä¸€ä¸ªUIImage]]></title>
    <link href="http://www.superqq.com/blog/2015/08/05/multiple-uiimage-merged/"/>
    <updated>2015-08-05T17:43:53+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/05/multiple-uiimage-merged</id>
    <content type="html"><![CDATA[<p>å†™äº†ä¸¤ç¯‡å…³äºç…§ç‰‡ä¿å­˜çš„æ–‡ç« ï¼š</p>

<ol>
<li><a href="http://www.superqq.com/blog/2015/08/03/ioskai-fa-zhi-bao-cun-zhao-pian-dao-xi-tong-xiang-ce-%28photo-album%29/">iOSå¼€å‘ä¹‹ä¿å­˜ç…§ç‰‡åˆ°ç³»ç»Ÿç›¸å†Œï¼ˆPhoto Albumï¼‰</a></li>
<li><a href="http://www.superqq.com/blog/2015/08/04/save-photo-to-own-album/">iOSå¼€å‘ä¹‹ä¿å­˜ç…§ç‰‡åˆ°è‡ªå·±åˆ›å»ºçš„ç›¸ç°¿</a></li>
</ol>


<p>ä»‹ç»äº†å¦‚ä½•å°†å›¾ç‰‡ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œï¼Œä¹Ÿå¯ä»¥å°†ç…§ç‰‡ä¿å­˜åˆ°è‡ªå·±çš„ç›¸ç°¿ã€‚é‡Œé¢è¿˜ä»‹ç»äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹<code>ALAssetsLibrary+CustomPhotoAlbum</code>ä¿å­˜ç…§ç‰‡çš„æ–¹æ³•ã€‚</p>

<p>æœ¬ç¯‡æ–‡ç« å°†ä¼šä»‹ç»å¦‚ä½•å°†å¤šä¸ª<code>UIImage</code>åˆå¹¶æˆä¸€ä¸ª<code>UIImage</code>ã€‚å¬èµ·æ¥ä¼¼ä¹æœ‰ç‚¹æ™•æ™•ä¹ä¹çš„ï¼Œè¿™ä¸ªå¯ä»¥åˆå¹¶å—ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æˆ‘ä»¬æ‹¿ä¸¤ä¸ª<code>UIImage</code>æ¥ä¸¾ä¾‹ã€‚</p>

<h2>åˆ›å»ºä¸¤ä¸ªUIImage</h2>

<pre><code>UIImage *image1 = [UIImage imageNamed:@"iOSDevTip"];
UIImage *image2 = [UIImage imageNamed:@"CodePush"];
</code></pre>

<p>åˆ›å»º<code>UIImage</code>çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œæˆ‘ä»¬å°±ç®€å•çš„é€šè¿‡<code>imageNamed:</code>æ–¹æ³•æ¥åˆ›å»ºã€‚</p>

<h2>åˆå¹¶ä¹‹åçš„size</h2>

<pre><code>CGSize size = CGSizeMake(image1.size.width + image2.size.width, image1.size.height);
</code></pre>

<p>åˆå¹¶ä¸¤ä¸ª<code>UIImage</code>ï¼Œéœ€è¦è®¡ç®—åˆå¹¶ä¹‹åçš„<code>size</code>ã€‚å‡è®¾è¿™ä¸¤ä¸ª<code>UIImage</code>çš„é«˜åº¦æ˜¯æ˜¯ç›¸åŒçš„ï¼ŒæŠŠä»–ä»¬çš„å®½åº¦ç›¸åŠ ï¼Œå¾—åˆ°åˆå¹¶ä¹‹åçš„<code>UIImage</code>çš„<code>size</code>ã€‚</p>

<h2>åˆå¹¶æ–¹æ³•</h2>

<p>æœ‰äº†<code>UIImage</code>å’Œ<code>size</code>æ¥ä¸‹æ¥å°±æ˜¯æŠŠä¸¤ä¸ª<code>UIImage</code>åˆå¹¶ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>

<pre><code> UIGraphicsBeginImageContext(size);
[image1 drawInRect:CGRectMake(0, 0, image1.size.width, size.height)];
[image2 drawInRect:CGRectMake(image1.size.width, 0, image2.size.width, size.height)];
UIImage *togetherImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
</code></pre>

<p>é€šè¿‡ä¸Šè¿°çš„ä»£ç ï¼Œå°±å¯ä»¥å®ç°ä¸¤ä¸ª<code>UIImage</code>çš„åˆå¹¶ã€‚` è¿™ä¸ªå°åŠŸèƒ½è¿˜æŒºæœ‰ç”¨çš„ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSå¼€å‘ä¹‹ä¿å­˜ç…§ç‰‡åˆ°è‡ªå·±åˆ›å»ºçš„ç›¸ç°¿]]></title>
    <link href="http://www.superqq.com/blog/2015/08/04/save-photo-to-own-album/"/>
    <updated>2015-08-04T22:41:08+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/04/save-photo-to-own-album</id>
    <content type="html"><![CDATA[<p>åœ¨<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>ä¸Šä¸€ç¯‡æ–‡ç« <a href="http://www.superqq.com/blog/2015/08/03/ioskai-fa-zhi-bao-cun-zhao-pian-dao-xi-tong-xiang-ce-%28photo-album%29/">iOSå¼€å‘ä¹‹ä¿å­˜ç…§ç‰‡åˆ°ç³»ç»Ÿç›¸å†Œï¼ˆPhoto Albumï¼‰</a>ï¼Œæˆ‘ä»¬è®²åˆ°äº†å¦‚ä½•ä¿æŒç…§ç‰‡ç³»ç»Ÿç›¸å†Œã€‚è¿˜æœ‰å…¶ä»–ä¿å­˜çš„æ–¹æ³•å—ï¼Ÿ</p>

<p>ä¿å­˜ç…§ç‰‡è¿˜å¯ä»¥ç”¨<code>ALAssetsLibrary</code>ï¼Œ<code>ALAssetsLibrary</code>æä¾›äº†æˆ‘ä»¬å¯¹iOSè®¾å¤‡ä¸­çš„ç›¸ç‰‡ã€è§†é¢‘çš„è®¿é—®ï¼Œæ˜¯è¿æ¥åº”ç”¨ç¨‹åºå’Œç›¸å†Œä¹‹é—´è®¿é—®çš„ä¸€ä¸ªæ¡¥æ¢ã€‚</p>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥è¯¦ç»†è®²è§£ä¸€ä¸‹å…³äºç³»ç»Ÿç›¸å†Œæƒé™è·å–ã€ä¿å­˜ç…§ç‰‡ã€åˆ›å»ºè‡ªå·±çš„ç›¸ç°¿ç­‰ç­‰åŠŸèƒ½ã€‚</p>

<h2>åˆ›å»ºè‡ªå·±çš„ç›¸ç°¿</h2>

<p>è¿™ä¹Ÿæ˜¯ä¸€ç§æ¯”è¾ƒåˆ›å»ºçš„ä½œæ³•ï¼Œåˆ›å»ºè‡ªå·±çš„ç›¸ç°¿ï¼Œç„¶åæŠŠç…§ç‰‡æˆ–è€…è§†é¢‘ä¿å­˜åˆ°è‡ªå·±çš„ç›¸ç°¿ä¸­ã€‚ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>  ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library addAssetsGroupAlbumWithName:@"test" resultBlock:^(ALAssetsGroup *group) {

    //åˆ›å»ºç›¸ç°¿æˆåŠŸ

} failureBlock:^(NSError *error) {
    //å¤±è´¥
}];
</code></pre>

<h2>ä¿å­˜ç…§ç‰‡</h2>

<p>è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯å°†ç…§ç‰‡ä¿å­˜åˆ°ç³»ç»Ÿç›¸ç°¿é‡Œé¢ï¼Œä¸æ˜¯ä¿å­˜åˆ°è‡ªå·±åˆ›å»ºçš„ç›¸ç°¿é‡Œé¢ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code> ALAssetsLibrary *library = [[ALAssetsLibrary alloc]init];
[library writeImageToSavedPhotosAlbum:image.CGImage orientation:(ALAssetOrientation)image.imageOrientation completionBlock:^(NSURL *asSetUrl,NSError *error){
    if (error) {
       //å¤±è´¥
    }else{
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"å­˜å‚¨æˆåŠŸ"
                                                       message:nil
                                                      delegate:nil
                                             cancelButtonTitle:@"ç¡®å®š"
                                             otherButtonTitles:nil, nil];
        [alert show];

    }
}];
</code></pre>

<h2>è·å–æƒé™</h2>

<p>åœ¨ä¿å­˜ç…§ç‰‡ä¹‹å‰ï¼Œå¦‚æœç”¨æˆ·å…³é—­ç›¸å†Œæƒé™ï¼Œè¿™ä¸ªæ—¶å€™æ˜¯ä¿å­˜å¤±è´¥çš„ã€‚å¦‚æœä½ ä¸åšä»»ä½•å¤„ç†ï¼Œç”¨æˆ·æ˜¯ä¸ä¼šçŸ¥é“è‡ªå·±ä¿å­˜å¤±è´¥äº†ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¿å­˜ç…§ç‰‡ä¹‹å‰ï¼Œåšå‡ºç›¸åº”çš„æç¤ºã€‚å¦‚ä½•è·å–è¿™ä¸ªæƒé™å‘¢ï¼Ÿä¸€èˆ¬æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>

<ol>
<li><p>åˆ›å»ºç›¸ç°¿å¤±è´¥</p></li>
<li><p>ä¿å­˜ç…§ç‰‡å¤±è´¥</p></li>
</ol>


<p>åœ¨ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•<strong>åˆ›å»ºè‡ªå·±çš„ç›¸ç°¿</strong>å’Œ<strong>ä¿å­˜ç…§ç‰‡</strong>çš„å¤±è´¥ç»“æœé‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¼¹å‡ºè·å–ç…§ç‰‡æƒé™å¤±è´¥çš„æç¤ºã€‚æˆ‘ä»¬æ‹¿ç¬¬ä¸€ä¸ªåˆ›å»ºç›¸ç°¿å¤±è´¥æ¥ä¸¾ä¾‹ï¼š</p>

<pre><code>ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library addAssetsGroupAlbumWithName:@"test" resultBlock:^(ALAssetsGroup *group)    {

      //åˆ›å»ºç›¸ç°¿æˆåŠŸ

} failureBlock:^(NSError *error) {
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"å­˜å‚¨å¤±è´¥"
                                                       message:@"è¯·æ‰“å¼€ è®¾ç½®-éšç§-ç…§ç‰‡ æ¥è¿›è¡Œè®¾ç½®"
                                                      delegate:nil
                                             cancelButtonTitle:@"ç¡®å®š"
                                             otherButtonTitles:nil, nil];
    [alert show];
}];
</code></pre>

<p>åœ¨ä¿å­˜ç…§ç‰‡å¤±è´¥çš„ç»“æœé‡Œï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¼¹å‡ºç›¸åº”çš„æç¤ºï¼Œè®©ç”¨æˆ·æ‰“å¼€åº”ç”¨ç¨‹åºçš„ç›¸å†Œæƒé™ã€‚</p>

<h2>ä¿å­˜ç…§ç‰‡åˆ°è‡ªå·±çš„ç›¸ç°¿</h2>

<p>ä¸‹é¢è¿™æ®µä»£ç æ˜¯åœ¨å¤§è°·æ­Œé‡Œé¢æ‰¾åˆ°çš„ï¼Œäº²è‡ªæµ‹è¯•è¿‡æ˜¯å¯ä»¥ç”¨çš„ï¼Œæ•´ç†å¦‚ä¸‹ï¼š</p>

<pre><code>#pragma mark - åˆ›å»ºç›¸å†Œ
- (void)createAlbum
{
    ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc] init];
    NSMutableArray *groups=[[NSMutableArray alloc]init];
    ALAssetsLibraryGroupsEnumerationResultsBlock listGroupBlock = ^(ALAssetsGroup *group, BOOL *stop)
    {
        if (group)
        {
            [groups addObject:group];
        }

        else
        {
            BOOL haveHDRGroup = NO;

            for (ALAssetsGroup *gp in groups)
            {
                NSString *name =[gp valueForProperty:ALAssetsGroupPropertyName];

                if ([name isEqualToString:@"iOSDevTip"])
                {
                    haveHDRGroup = YES;
                }
            }

            if (!haveHDRGroup)
            {
                //do add a group named "XXXX"
                [assetsLibrary addAssetsGroupAlbumWithName:@"iOSDevTip"
                                               resultBlock:^(ALAssetsGroup *group)
                 {
                     [groups addObject:group];

                 }
                                              failureBlock:nil];
                haveHDRGroup = YES;
            }
        }

    };
    //åˆ›å»ºç›¸ç°¿
    [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAlbum usingBlock:listGroupBlock failureBlock:nil];

    [self saveToAlbumWithMetadata:nil imageData:UIImagePNGRepresentation(self.image) customAlbumName:@"iOSDevTip" completionBlock:^
     {
         //è¿™é‡Œå¯ä»¥åˆ›å»ºæ·»åŠ æˆåŠŸçš„æ–¹æ³•

     }
                     failureBlock:^(NSError *error)
     {
         //å¤„ç†æ·»åŠ å¤±è´¥çš„æ–¹æ³•æ˜¾ç¤ºalertè®©å®ƒå›åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œä¸ç„¶é‚£ä¸ªæ¡†æ¡†æ­»æ´»ä¸è‚¯å¼¹å‡ºæ¥
         dispatch_async(dispatch_get_main_queue(), ^{

             //æ·»åŠ å¤±è´¥ä¸€èˆ¬æ˜¯ç”±ç”¨æˆ·ä¸å…è®¸åº”ç”¨è®¿é—®ç›¸å†Œé€ æˆçš„ï¼Œè¿™è¾¹å¯ä»¥å–å‡ºè¿™ç§æƒ…å†µåŠ ä»¥åˆ¤æ–­ä¸€ä¸‹
             if([error.localizedDescription rangeOfString:@"User denied access"].location != NSNotFound ||[error.localizedDescription rangeOfString:@"ç”¨æˆ·æ‹’ç»è®¿é—®"].location!=NSNotFound){
                 UIAlertView *alert=[[UIAlertView alloc]initWithTitle:error.localizedDescription message:error.localizedFailureReason delegate:nil cancelButtonTitle:NSLocalizedString(@"ok", nil) otherButtonTitles: nil];

                 [alert show];
             }
         });
     }];
}

- (void)saveToAlbumWithMetadata:(NSDictionary *)metadata
                      imageData:(NSData *)imageData
                customAlbumName:(NSString *)customAlbumName
                completionBlock:(void (^)(void))completionBlock
                   failureBlock:(void (^)(NSError *error))failureBlock
{

    ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc] init];
    __weak ALAssetsLibrary *weakSelf = assetsLibrary;
    void (^AddAsset)(ALAssetsLibrary *, NSURL *) = ^(ALAssetsLibrary *assetsLibrary, NSURL *assetURL) {
        [assetsLibrary assetForURL:assetURL resultBlock:^(ALAsset *asset) {
            [assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

                if ([[group valueForProperty:ALAssetsGroupPropertyName] isEqualToString:customAlbumName]) {
                    [group addAsset:asset];
                    if (completionBlock) {
                        completionBlock();
                    }
                }
            } failureBlock:^(NSError *error) {
                if (failureBlock) {
                    failureBlock(error);
                }
            }];
        } failureBlock:^(NSError *error) {
            if (failureBlock) {
                failureBlock(error);
            }
        }];
    };
    [assetsLibrary writeImageDataToSavedPhotosAlbum:imageData metadata:metadata completionBlock:^(NSURL *assetURL, NSError *error) {
        if (customAlbumName) {
            [assetsLibrary addAssetsGroupAlbumWithName:customAlbumName resultBlock:^(ALAssetsGroup *group) {
                if (group) {
                    [weakSelf assetForURL:assetURL resultBlock:^(ALAsset *asset) {
                        [group addAsset:asset];
                        if (completionBlock) {
                            completionBlock();
                        }
                    } failureBlock:^(NSError *error) {
                        if (failureBlock) {
                            failureBlock(error);
                        }
                    }];
                } else {
                    AddAsset(weakSelf, assetURL);
                }
            } failureBlock:^(NSError *error) {
                AddAsset(weakSelf, assetURL);
            }];
        } else {
            if (completionBlock) {
                completionBlock();
            }
        }
    }];
}
</code></pre>

<h2>ALAssetsLibrary+CustomPhotoAlbumä¿å­˜ç…§ç‰‡</h2>

<p><code>github</code>ä¸Šæœ‰ä¸€ä¸ªé¡¹ç›®<a href="https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum">ALAssetsLibrary+CustomPhotoAlbum</a>ï¼Œè®²ä¿å­˜ç…§ç‰‡åšäº†å¾ˆå¥½çš„å°è£…ã€‚ä½¿ç”¨ä¹‹å‰è®°å¾—å…ˆå¯¼å…¥å¤´æ–‡ä»¶ï¼š</p>

<pre><code>#import "ALAssetsLibrary+CustomPhotoAlbum.h"
</code></pre>

<p>ä¿å­˜ç…§ç‰‡åˆ°è‡ªå·±çš„ç›¸ç°¿ï¼Œç›´æ¥è°ƒç”¨ï¼š</p>

<pre><code>ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library saveImage:self.image toAlbum:@"gang" completion:^(NSURL *assetURL, NSError *error) {
    if (!error) {

    }
} failure:^(NSError *error) {

}];
</code></pre>

<p><code>ALAssetsLibrary+CustomPhotoAlbum</code>å¯¹ä¿å­˜è§†é¢‘çš„å°è£…ä¹Ÿæ˜¯éå¸¸å¥½çš„ã€‚æˆ‘ç°åœ¨é¡¹ç›®ä¸­ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªç¬¬ä¸‰æ–¹æ¥ä¿å­˜ç…§ç‰‡å’Œè§†é¢‘ã€‚å› ä¸ºä¸é”™ï¼Œæ‰€ä»¥æ¨èç»™å¤§å®¶ä½¿ç”¨ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSå¼€å‘ä¹‹ä¿å­˜ç…§ç‰‡åˆ°ç³»ç»Ÿç›¸å†Œï¼ˆPhoto Albumï¼‰]]></title>
    <link href="http://www.superqq.com/blog/2015/08/03/ioskai-fa-zhi-bao-cun-zhao-pian-dao-xi-tong-xiang-ce-(photo-album)/"/>
    <updated>2015-08-03T21:43:34+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/03/ioskai-fa-zhi-bao-cun-zhao-pian-dao-xi-tong-xiang-ce-(photo-album)</id>
    <content type="html"><![CDATA[<p>ä¿å­˜ç…§ç‰‡åˆ°ç³»ç»Ÿç›¸å†Œè¿™ä¸ªåŠŸèƒ½å¾ˆå¤šç¤¾äº¤ç±»çš„APPéƒ½æœ‰çš„ï¼Œä»Šå¤©æˆ‘ä»¬ç®€å•è®²è§£ä¸€ä¸‹ï¼Œå¦‚ä½•å°†å›¾ç‰‡ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œï¼ˆPhoto Albumï¼‰ã€‚</p>

<h2>åˆ›å»ºUIImageView</h2>

<p>åˆ›å»º<code>UIImageView</code>æ˜¯ä¸ºäº†å°†ç…§ç‰‡å±•ç¤ºå‡ºæ¥ï¼Œæˆ‘ä»¬æ˜¯è¦æŠŠ<code>UIImage</code>ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œï¼ˆPhoto Albumï¼‰:</p>

<pre><code>#define SCREEN [UIScreen mainScreen].bounds.size

self.image = [UIImage imageNamed:@"iOSDevTip"];
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake((SCREEN.width - 300) / 2, 70, 300, 150)];
imageView.image = self.image;
[self.view addSubview:imageView];
</code></pre>

<h2>åˆ›å»ºUIButton</h2>

<p>åˆ›å»º<code>UIButton</code>å¹¶ç»‘å®š<code>actionClick:</code>äº‹ä»¶:</p>

<pre><code>UIButton *button = [[UIButton alloc] init];
button.frame = CGRectMake( 100, 300, SCREEN.width - 200, 40);
[button addTarget:self action:@selector(actionClick:) forControlEvents:UIControlEventTouchUpInside];
[button setTitleColor:[UIColor blueColor] forState:UIControlStateNormal];
[button setBackgroundColor:[UIColor orangeColor]];
[button setTitle:@"SavePhoto" forState:UIControlStateNormal];
[self.view addSubview:button];


- (void)actionClick:(UIButton *)button
{

}
</code></pre>

<h2>ä¿å­˜ç…§ç‰‡åˆ°ç³»ç»Ÿç›¸å†Œï¼ˆPhoto Albumï¼‰</h2>

<p>åœ¨<code>actionClick:</code>æ–¹æ³•é‡Œè°ƒç”¨ï¼š</p>

<pre><code>UIImageWriteToSavedPhotosAlbum(self.image, self, @selector(image:didFinishSavingWithError:contextInfo:), NULL);
</code></pre>

<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“ä¿å­˜æ˜¯å¦æˆåŠŸï¼Œæ‰€ä»¥éœ€è¦åˆ¶å®šå›è°ƒæ–¹æ³•</p>

<pre><code>// æŒ‡å®šå›è°ƒæ–¹æ³•
- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    if(!error){
        NSLog(@"save success");
    }else{
        NSLog(@"save failed");
    }
}
</code></pre>

<p>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œæˆ‘ä»¬å°±çŸ¥é“ç…§ç‰‡æ˜¯å¦ä¿å­˜æˆåŠŸã€‚ç„¶åï¼Œæ ¹æ®éœ€æ±‚æ¥åˆ·æ–°UIçº¿ç¨‹ã€‚ç”¨æˆ·ç¬¬ä¸€æ¬¡ä½¿ç”¨APPçš„æ—¶å€™ï¼Œç‚¹å‡»<code>SavePhoto</code>æŒ‰é’®çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè¯¢é—®æƒé™ï¼š</p>

<p><img src="http://7xkkk9.com1.z0.glb.clouddn.com/46869740F32868C1F9769ED5FED1C7D0.png" alt="photo" /></p>

<p>Demoåœ°å€:<a href="https://github.com/worldligang/iOSStrongDemo">iOSStrongDemo</a> ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œå°†ä¼šè®²å¦‚ä½•åˆ›å»ºè‡ªå·±çš„ç›¸å†Œå¹¶ä¿å­˜ç…§ç‰‡ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[è‡ªå®šä¹‰å¯¼èˆªæŒ‰é’®UIBarButtonItem]]></title>
    <link href="http://www.superqq.com/blog/2015/08/02/custom-navigation-button-uibarbuttonitem/"/>
    <updated>2015-08-02T00:13:14+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/02/custom-navigation-button-uibarbuttonitem</id>
    <content type="html"><![CDATA[<p>åŸºæœ¬ä¸Šæ¯ä¸ªiOS APPé‡Œé¢éƒ½æœ‰å¯¼èˆªï¼Œæ¯”å¦‚å¾®ä¿¡ã€QQã€æ”¯ä»˜å®ã€‚å¯¼èˆªå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¸®åŠ©æˆ‘ä»¬ç®¡ç†è§†å›¾æ§åˆ¶å™¨ï¼ˆUIViewControllerï¼‰ã€‚å¯¼èˆªçš„é‡è¦æ€§ä¸è¨€è€Œå–»ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ¯ä¸€ä½iOSåˆå­¦è€…éƒ½è¦æ¥è§¦åˆ°çš„é—®é¢˜ã€‚</p>

<p>iOSç³»ç»Ÿå¯¼èˆªæ ä¸­æœ‰<code>leftBarButtonItem</code>å’Œ<code>rightBarButtonItem</code>ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥è‡ªå®šä¹‰è¿™ä¸¤ä¸ª<code>UIBarButtonItem</code>ã€‚</p>

<h2>å››ç§åˆ›å»ºæ–¹æ³•</h2>

<p>ç³»ç»Ÿæä¾›äº†å››ç§åˆ›å»ºçš„æ–¹æ³•ï¼š</p>

<pre><code>- (instancetype)initWithBarButtonSystemItem:(UIBarButtonSystemItem)systemItem target:(id)target action:(SEL)action;


- (instancetype)initWithImage:(UIImage *)image style:(UIBarButtonItemStyle)style target:(id)target action:(SEL)action;


- (instancetype)initWithTitle:(NSString *)title style:(UIBarButtonItemStyle)style target:(id)target action:(SEL)action;

- (instancetype)initWithBarButtonSystemItem:(UIBarButtonSystemItem)systemItem target:(id)target action:(SEL)action;

- (instancetype)initWithCustomView:(UIView *)customView;
</code></pre>

<h3>é€šè¿‡ç³»ç»ŸUIBarButtonSystemItemåˆ›å»º</h3>

<p>è‡ªå®šä¹‰<code>rightBarButtonItem</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(right:)];
</code></pre>

<p>UIBarButtonSystemItemæœ‰ä»¥ä¸‹æ ·å¼å¯ä»¥ä¾›é€‰æ‹©ï¼š</p>

<pre><code>typedef NS_ENUM(NSInteger, UIBarButtonSystemItem) {
    UIBarButtonSystemItemDone,
    UIBarButtonSystemItemCancel,
    UIBarButtonSystemItemEdit,  
    UIBarButtonSystemItemSave,  
    UIBarButtonSystemItemAdd,
    UIBarButtonSystemItemFlexibleSpace,
    UIBarButtonSystemItemFixedSpace,
    UIBarButtonSystemItemCompose,
    UIBarButtonSystemItemReply,
    UIBarButtonSystemItemAction,
    UIBarButtonSystemItemOrganize,
    UIBarButtonSystemItemBookmarks,
    UIBarButtonSystemItemSearch,
    UIBarButtonSystemItemRefresh,
    UIBarButtonSystemItemStop,
    UIBarButtonSystemItemCamera,
    UIBarButtonSystemItemTrash,
    UIBarButtonSystemItemPlay,
    UIBarButtonSystemItemPause,
    UIBarButtonSystemItemRewind,
    UIBarButtonSystemItemFastForward,
#if __IPHONE_3_0 &lt;= __IPHONE_OS_VERSION_MAX_ALLOWED
    UIBarButtonSystemItemUndo,
    UIBarButtonSystemItemRedo,
#endif
#if __IPHONE_4_0 &lt;= __IPHONE_OS_VERSION_MAX_ALLOWED
    UIBarButtonSystemItemPageCurl,
#endif
};
</code></pre>

<p>æœ€ååˆ«å¿˜äº†å®ç°<code>right:</code>æ–¹æ³•ï¼š</p>

<pre><code>- (void)right:(id)sender
{
    NSLog(@"rightBarButtonItem");
}
</code></pre>

<h3>è‡ªå®šä¹‰æ–‡å­—çš„UIBarButtonItem</h3>

<p>åœ¨æ–‡ç« <a href="http://www.superqq.com/blog/2015/07/30/six-tips-on-navigation-bar/">å…³äºå¯¼èˆªæ çš„å…­ä¸ªå°æŠ€å·§</a>çš„ç¬¬äº”ä¸ªæŠ€å·§é‡Œé¢æœ‰è‡ªå®šä¹‰<code>rightBarButtonItem</code></p>

<pre><code>self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"back" style:UIBarButtonItemStylePlain target:self action:@selector(back:)];
</code></pre>

<p>UIBarButtonItemStyleæœ‰ä»¥ä¸‹ä¸‰ç§é€‰æ‹©ï¼š</p>

<pre><code>typedef NS_ENUM(NSInteger, UIBarButtonItemStyle) {
    UIBarButtonItemStylePlain,
    UIBarButtonItemStyleBordered NS_ENUM_DEPRECATED_IOS(2_0, 8_0, "Use UIBarButtonItemStylePlain when minimum deployment target is iOS7 or later"),
    UIBarButtonItemStyleDone,
};
</code></pre>

<p>å®ç°<code>back:</code>æ–¹æ³•ï¼š</p>

<pre><code>- (void)back:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
}
</code></pre>

<h3>è‡ªå®šä¹‰ç…§ç‰‡çš„UIBarButtonItem</h3>

<pre><code>self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"test"] style:UIBarButtonItemStylePlain target:self action:@selector(right:)];
</code></pre>

<h3>è‡ªå®šä¹‰UIViewçš„UIBarButtonItem</h3>

<p>è‡ªå®šä¹‰<code>UIView</code>ï¼Œç„¶åé€šè¿‡<code>initWithCustomView:</code>æ–¹æ³•æ¥åˆ›å»º<code>UIBarButtonItem</code>ã€‚</p>

<pre><code>UIView *testView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 40, 60)];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:testView];
</code></pre>

<p>çœ‹åˆ°æœ‰æœ‹å‹åœ¨åå°æé—®ï¼š</p>

<pre><code>åˆšå“¥ï¼Œæˆ‘ç°åœ¨å³éœ€è¦æ”¹é‚£ä¸ªå¯¼èˆªåŸç”Ÿçš„è¿”å›å›¾ç‰‡ï¼Œä¹Ÿè¦æ”¹è¿”å›æ–‡å­—ï¼Œåº”è¯¥æ€ä¹ˆæ”¹å‘¢ï¼Œæ±‚æŒ‡æ•™ã€‚
</code></pre>

<p>å…¶å®ï¼Œè¿™ä¸ªå°±å¯ä»¥ç”¨<code>initWithCustomView:</code>æ¥è§£å†³ï¼Œè‡ªå®šä¹‰<code>UIView</code>ä½ å¯ä»¥æ”¾<code>UIImageView</code>å’Œ<code>UILabel</code>ã€‚å¯ä»¥è‡ªå®šä¹‰<code>UIView</code>ï¼Œé‚£ä¹ˆæƒ³æ€ä¹ˆå®šä¹‰éƒ½æ˜¯å¯ä»¥çš„ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ã€Šå¤§åœ£å½’æ¥ã€‹å’Œã€Šæ‰å¦–è®°ã€‹ç¬¬ä¸€æ¬¡è´­ç¥¨çœ‹ç”µå½±]]></title>
    <link href="http://www.superqq.com/blog/2015/08/02/first-watch-movie/"/>
    <updated>2015-08-02T00:03:54+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/02/first-watch-movie</id>
    <content type="html"><![CDATA[<p>è¿™ä¸ªå‘¨æœ«ï¼Œä½ çœ‹ç”µå½±äº†å—ï¼Ÿ</p>

<p>è¯´æ¥æƒ­æ„§ï¼Œæˆ‘å¾ˆå°‘å»ç”µå½±é™¢çœ‹ç”µå½±ã€‚ç¬¬ä¸€æ¬¡æ˜¯å¦¹å¦¹ä¹°ç¥¨é€ç»™æˆ‘çœ‹çš„ï¼Œçœ‹çš„æ˜¯ã€Šæ’’å¨‡çš„å¥³äººæœ€å¥½å‘½ã€‹ã€‚ç¬¬äºŒæ¬¡æ˜¯å…¬å¸é¢†å¯¼è¯·æˆ‘ä»¬ä¸€èµ·çœ‹çš„ï¼Œçœ‹çš„æ˜¯ã€Šç…é¥¼ä¾ ã€‹ã€‚</p>

<p>è¯´å®è¯ï¼Œç”µå½±é™¢é‡Œçœ‹ç”µå½±å°±æ˜¯è·Ÿæ‰‹æœºä¸Šçœ‹æ„Ÿè§‰ä¸ä¸€æ ·ã€‚åœ¨ç”µå½±é™¢é‡Œï¼Œå¾ˆå¤šäººååœ¨ä¸€èµ·çœ‹ç”µå½±æœ‰æ°›å›´ï¼Œè¿˜æ˜¯å¤§å±å¹•å¸¦æ¥çš„è§†è§‰æ„Ÿã€‚è€Œæ‰‹æœºè¿˜æ˜¯æ˜¾å¾—æ¯”è¾ƒlowã€‚</p>

<h2>ç¬¬ä¸€æ¬¡è´­ç¥¨çœ‹ç”µå½±</h2>

<p>è¿™ä¸ªå‘¨å…­å’Œè€å©†ä¸€èµ·åˆ°ç”µå½±é™¢çœ‹äº†ä¸¤åœºç”µå½±ï¼Œåˆ†åˆ«æ˜¯ã€Šå¤§åœ£å½’æ¥ã€‹å’Œã€Šæ‰å¦–è®°ã€‹ã€‚ä¸¤éƒ¨ç”µå½±æ‹çš„éƒ½ä¸é”™ï¼Œå¥½åƒä¹Ÿæ˜¯æœ€è¿‘æ¯”è¾ƒçƒ­æ’­çš„ä¸¤éƒ¨ç”µå½±ã€‚</p>

<p>æˆªè‡³7æœˆ30æ—¥ï¼Œã€Šå¤§åœ£å½’æ¥ã€‹ç¥¨æˆ¿çªç ´7.2äº¿å…ƒï¼Œæ‰“ç ´ã€ŠåŠŸå¤«ç†ŠçŒ«2ã€‹ä¿æŒ4å¹´çš„åŠ¨ç”»ç¥¨æˆ¿çºªå½•ï¼Œâ€œç™»é¡¶â€ä¸­å›½åŠ¨ç”»ç”µå½±ç¥¨æˆ¿æ€»å† å†›ã€‚</p>

<p>ç”µå½±ã€Šæ‰å¦–è®°ã€‹ä¸Šæ˜ 17å¤©ï¼Œç¥¨æˆ¿ç ´17äº¿ï¼Œå†åˆ›åè¯­ç¥¨æˆ¿æ–°è®°å½•ï¼æ­¤å‰ã€Šæ‰å¦–è®°ã€‹ç¥¨æˆ¿çªç ´åäº”äº¿å¤§å…³ï¼Œè¶…è¶Šã€Šå¤ä»‡è€…è”ç›Ÿ2ã€‹æˆä¸ºå†…åœ°å½±å²ç¥¨æˆ¿ç¬¬ä¸‰é«˜çš„å½±ç‰‡ã€‚</p>

<p>æ—¢ç„¶æ˜¯çƒ­æ’­ç”µå½±ï¼Œè‚¯å®šä¼šæœ‰å®ƒç«çš„åŸå› åœ¨é‡Œé¢ã€‚æˆ‘ä¸æ˜¯ä¸ªç”µå½±è¿·ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿæ— æ³•ä¸ºå¤§å®¶æ¨èå¥½çš„ç”µå½±ã€‚</p>

<p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è‡ªå·±è´­ç¥¨çœ‹ç”µå½±è¿˜æ˜¯ä¸ä¾¿å®œçš„ï¼ŒèŠ±äº†æˆ‘è¿‘ä¸¤ç™¾å…ƒã€‚æˆ‘ä»¥å‰ä¸€ç›´ä»¥ä¸ºç”µå½±ç¥¨å°±10å…ƒä¸€å¼ å‘¢ï¼Œæä¸å¥½è¿˜ç»™ä½ æ‰“ä¸ªæŠ˜ã€‚çœ‹æ¥éƒ½æ˜¯æˆ‘æƒ³å¤šäº†ã€‚</p>

<p>è¿™ä¸€æ¬¡äº²è‡ªè´­ç¥¨ç»å†ï¼Œè®©æˆ‘å‘ç°ä¸€ä¸ªæ¯”è¾ƒä¼˜æƒ çš„APPï¼Œå«çŒ«çœ¼ç”µå½±ï¼Œä»¥åä¹°ç”µå½±ç¥¨å¯ä»¥åœ¨è¿™ä¸Šé¢ä¹°ã€‚ç¥¨ä»·ç›¸å¯¹è¾ƒä¾¿å®œï¼Œæˆ‘å¯¹æ¯”äº†ä¸€ä¸‹ï¼Œæ¯”å…¶ä»–å‡ ä¸ªçŸ¥åappéƒ½è¦ä¾¿å®œã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ä¸ºåˆšåˆšåœ¨çº¿ï¼ˆOctopressï¼‰æ·»åŠ å¤šè¯´è¯„è®ºç³»ç»Ÿ]]></title>
    <link href="http://www.superqq.com/blog/2015/08/01/octopress-add-duoshuo/"/>
    <updated>2015-08-01T01:04:31+08:00</updated>
    <id>http://www.superqq.com/blog/2015/08/01/octopress-add-duoshuo</id>
    <content type="html"><![CDATA[<blockquote><p>ä»Šå¤©æ˜¯å…«ä¸€å»ºå†›èŠ‚ï¼Œä¸­å›½äººæ°‘è§£æ”¾å†›å»ºå†›çºªå¿µæ—¥ã€‚å¿ƒé‡Œä¸ç”±è‡ªä¸»åœ°å‡èµ·ä¸€ä»½çˆ±å›½ä¹‹æƒ…ã€‚</p></blockquote>

<p>æˆ‘çš„ç½‘ç«™<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>å»å¹´ä¹æœˆä»½æ­£å¼ä¸Šçº¿çš„ï¼Œé©¬ä¸Šå¿«ä¸€å‘¨å¹´å•¦ï¼ä½œä¸ºä¸€ä¸ªæŠ€æœ¯å‹çš„åšå®¢ç½‘ç«™ï¼Œ<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>æˆé•¿é€Ÿåº¦è¿˜æ˜¯è›®å¿«çš„ã€‚</p>

<h2>åˆšåˆšåœ¨çº¿æ’å</h2>

<p>ç‰¹åˆ«æ˜¯æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä¸€ç›´åœ¨å…³æ³¨<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>çš„æ’åï¼Œæ¯å¤©çš„è¿›æ­¥é€Ÿåº¦éå¸¸å¿«ã€‚è¿™ä¹Ÿæ˜¯æˆ‘æŒç»­æ›´æ–°çš„ç»“æœï¼Œç™¾åº¦å¯¹æŒç»­æ›´æ–°çš„ç½‘ç«™æ˜¯éå¸¸å‹å¥½çš„ã€‚</p>

<p>æˆ‘ç”¨Alexaçš„æ’ä»¶çœ‹äº†ä¸€ä¸‹<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>çš„æ’åï¼Œå…¨çƒæ’åï¼š<strong>240334</strong> ï¼Œ ä¸­å›½åŒºæ’åï¼š<strong>14665</strong> ã€‚æˆ‘ç‰¹æ„æˆªäº†ä¸€å¼ å›¾ç»™å¤§å®¶çœ‹ä¸€çœ‹ï¼š</p>

<p><img src="http://7xkkk9.com1.z0.glb.clouddn.com/superqqalexa.jpg" alt="superqqalexa.jpg" /></p>

<p>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ã€‚è¦æƒ³å–å¾—æ›´å¥½çš„æˆå°±ï¼Œä»éœ€åŠªåŠ›ï¼<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>ä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜å›°æƒ‘ç€æˆ‘ã€‚å°±æ˜¯åœ¨ç«ç‹æµè§ˆå™¨ä¸­ï¼Œæ–‡ç« åº•éƒ¨è¯„è®ºæ¨¡å—ä¼šå‡ºç°é”™ä¹±ã€‚</p>

<h2>ç«ç‹è¯„è®ºç‰ˆå—é”™ä¹±ä¿®å¤</h2>

<p><a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>çš„è¯„è®ºæ¨¡å—ç”¨çš„æ˜¯å‹è¨€ã€‚ä¹ŸæŒºå¥‡æ€ªçš„ï¼Œåœ¨å…¶ä»–æµè§ˆå™¨ä¸­å°±å¥½å¥½çš„ï¼Œå”¯ç‹¬åœ¨ç«ç‹æµè§ˆå™¨äº†ä¼šå‡ºç°é”™ä¹±ã€‚æˆ‘çŸ¥é“è¿™ä¸ªé—®é¢˜çš„å­˜åœ¨ï¼Œå·²æœ‰ä¸€äº›è®¿å®¢ååº”è¿‡è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ï¼Œæˆ‘ä¸€ç›´æ²¡æœ‰æ‰¾åˆ°åŸå› ã€‚</p>

<p>ä¼°è®¡iOSå¼€å‘è€…ç”¨ç«ç‹æµè§ˆå™¨çš„äººè‚¯å®šä¸å°‘ï¼Œè¿™ä¸ªé”™ä¹±é—®é¢˜ä¸€ç›´åœ¨è¿™é‡Œçš„è¯ï¼Œè‚¯å®šä¼šç»™è®¿å®¢ç•™ä¸‹ä¸å¥½çš„å°è±¡ã€‚æ‰€ä»¥å¾—å°½æ—©è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>æ—¢ç„¶æ‰¾ä¸åˆ°è§£å†³é”™ä¹±çš„æ–¹æ³•ï¼Œå°±æŠŠå‹è¨€ç»™æ›¿æ¢æ‰å§ã€‚ç™¾åº¦æœäº†ä¸€ä¸‹ï¼Œå‘ç°å›½å†…çš„è¿˜æœ‰å¤šè¯´ï¼Œè¯„è®ºåŠŸèƒ½è¿˜æ˜¯æŒºä¸é”™çš„ã€‚æˆ‘ä¹Ÿçœ‹åˆ°å¾ˆå¤šç½‘ç«™åœ¨ç”¨å¤šè¯´ã€‚</p>

<h2>æŠŠå‹è¨€æ›¿æ¢æˆå¤šè¯´</h2>

<p>è¯´æ¢å°±æ¢ï¼Œå¤šè¯´ï¼ˆ **<a href="http://duoshuo.com/**">http://duoshuo.com/**</a> ï¼‰æ¥å…¥æµç¨‹ä¹Ÿä¸å¤æ‚ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œæˆ‘ç®€å•è¯´ä¸€ä¸‹æˆ‘æ˜¯å¦‚ä½•æ“ä½œçš„ã€‚</p>

<h3>1.è·å–ç«™ç‚¹çš„short_name</h3>

<p>åˆ°å¤šè¯´çš„å®˜ç½‘æ³¨å†Œè´¦å·ï¼Œå¹¶ä¸”æ·»åŠ ä½ çš„ç«™ç‚¹ã€‚<code>short_name</code>å°±æ˜¯æ·»åŠ ç«™ç‚¹çš„æ—¶å€™çš„å¤šè¯´åŸŸåæ¡†é‡Œå¡«å†™çš„ã€‚æ·»åŠ ç«™ç‚¹æµç¨‹å¦‚ä¸‹ï¼š</p>

<p><img src="http://7xkkk9.com1.z0.glb.clouddn.com/duoshuozhuce.jpg" alt="duoshuozhuce.jpg" /></p>

<h3>2.é…ç½®_config.yml</h3>

<p>åœ¨ <code>_config.yml</code> ä¸­æ·»åŠ </p>

<pre><code># duoshuo comments
duoshuo_comments: true
duoshuo_short_name: superqq
</code></pre>

<p>å…·ä½“é…ç½®æ–¹æ³•è¯·çœ‹ç‚¹å‡»<a href="http://blog.csdn.net/iosdevtip/article/details/47179709"> ä¸º Octopress æ·»åŠ å¤šè¯´è¯„è®ºç³»ç»Ÿ </a></p>

<p>okï¼Œç»è¿‡ä¸Šé¢äº”å°æ­¥å°±å¯ä»¥å®ç°æ¥å…¥å¤šè¯´è¯„è®ºç‰ˆå—å•¦ã€‚è¿«ä¸åŠå¾…åœ°æƒ³çœ‹çœ‹é—®é¢˜æœ‰æ²¡æœ‰è§£å†³ï¼Œä¸‹è¿‡å¦‚ä½•ï¼Ÿèµ¶ç´§éƒ¨ç½²ä¸Šå»ï¼Œæˆ‘ç®€å•çš„æµ‹è¯•äº†ä¸€ä¸‹ã€‚ä½ å¯ä»¥ç‚¹å‡»<a href="http://www.superqq.com/">åˆšåˆšåœ¨çº¿</a>ï¼Œçœ‹çœ‹å®ç°æ•ˆæœï¼š</p>

<p><img src="http://7xkkk9.com1.z0.glb.clouddn.com/duoshuocomment.jpg" alt="duoshuocomment.jpg" /></p>

<h2>ç½‘ç«™æœ‰è¯„è®ºå¿…å›å¤å™¢</h2>

<p>æ—¢ç„¶ç½‘ç«™è¯„è®ºå·²ç»æˆåŠŸæ¥å…¥ï¼Œå¤§å®¶ä»¥åæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œæˆ–è€…éœ€è¦äº¤æµçš„å¯ä»¥ç›´æ¥åœ¨ç½‘ç«™ä¸Šè¯„è®ºã€‚è™½ç„¶ï¼Œæ¯å¤©æœ‰å¾ˆå¤šå°‘è¦åšï¼Œä½†æ˜¯æˆ‘ä¾ç„¶ä¼šæŠ½å‡ºæ—¶é—´æ¥çœ‹çœ‹å¤§å®¶æçš„è¯„è®ºï¼Œä¸€èµ·æ¢è®¨ï¼Œä¸€èµ·æˆé•¿ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[AKTabBarControllerï¼šç±»ä¼¼å¾®ä¿¡çš„ç¬¬ä¸‰æ–¹åº“]]></title>
    <link href="http://www.superqq.com/blog/2015/07/31/aktabbarcontroller-similar-to-wechat-library/"/>
    <updated>2015-07-31T00:28:53+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/31/aktabbarcontroller-similar-to-wechat-library</id>
    <content type="html"><![CDATA[<p>è‡ªä»æœ‰äº†è¯„è®ºä¹‹åï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å’Œå¤§å®¶äº¤æµã€‚ä»¥å‰éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººé»˜é»˜çš„å‘æ–‡ç« ï¼Œçœ‹ä¸å‡ºå¤§å®¶å¯¹æ–‡ç« çš„çœ‹æ³•ã€‚è¯„è®ºå¼€é€šä¹‹åï¼Œå°±å¯ä»¥å¾ˆå¿«é€Ÿçš„è·å–å¤§å®¶å¯¹æ–‡ç« çš„çœ‹æ³•ã€‚</p>

<p>æœ‰äººä¼šæŒ‡å‡ºæ–‡ç« é‡Œæœ‰é”™è¯¯çš„åœ°æ–¹ï¼ŒçœŸçš„å¾ˆæ„Ÿæ¿€ä»–ä»¬ï¼Œéå¸¸çš„è®¤çœŸï¼›æœ‰äººä¼šå¯¹æ–‡ç« è¯´å‡ºè‡ªå·±çš„è§è§£ï¼ŒåŠ æ·±è‡ªå·±çš„å°è±¡ï¼ŒåŒæ—¶ï¼Œä¹Ÿèƒ½å¸®åŠ©åˆ°å…¶ä»–çš„æœ‹å‹ï¼›æœ‰äººä¹Ÿä¼šåœ¨è¯„è®ºé‡Œï¼Œæå‡ºä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯é‰´äºè¯„è®ºçš„å­—æ•°é™åˆ¶ï¼Œåªèƒ½ç®€å•çš„å›ç­”ä¸€ä¸‹ã€‚</p>

<p>åœ¨æ˜¨å¤©çš„æ–‡ç« è¯„è®ºé‡Œé¢ï¼Œæœ‰ä¸€ä¸ªæœ‹å‹æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå…³äºå¾®ä¿¡å¯¼èˆªæ çš„ã€‚</p>

<h2>é—®é¢˜åˆ†æå’Œè§£ç­”</h2>

<p><strong>é—®ï¼š</strong></p>

<pre><code>è‡ªå®šä¹‰å¯¼èˆªæ æ€ä¹ˆå†™ï¼Ÿå°±åƒå¾®ä¿¡é‚£æ ·ï¼ŒtabBarçš„å››ä¸ªç•Œé¢åˆ‡æ¢å¯¼èˆªæ éƒ½ä¸å˜åŒ–
</code></pre>

<p><strong>ç­”ï¼š</strong></p>

<pre><code>githubä¸Šæœç´¢AKTabBarController
</code></pre>

<p>å…¶å®ï¼Œè¿™ä½æœ‹å‹çš„é—®é¢˜ä¸æ˜¯å…³äºè‡ªå®šä¹‰å¯¼èˆªæ ï¼Œæˆ‘è§‰å¾—ä»–å¯èƒ½æ˜¯æƒ³é—®å¾®ä¿¡åº•éƒ¨çš„<code>TabBar</code>å’Œå¯¼èˆªç»“åˆä½¿ç”¨æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>

<p>è®°å¾—ä¹‹å‰åœ¨githubçœ‹åˆ°è¿‡æœ‰ä¸€ä¸ªç±»ä¼¼å¾®ä¿¡çš„æ¡†æ¶ï¼ˆç®—ä¸ä¸Šæ¡†æ¶ï¼Œæˆ‘ä»¬å°±è¿™ä¹ˆç®€å•çš„å«ä¸€ä¸‹ï¼‰ã€‚å°±æ˜¯<a href="https://github.com/alikaragoz/AKTabBarController">AKTabBarController</a>ã€‚</p>

<p><code>AKTabBarController</code>æ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„ç¬¬ä¸‰æ–¹ã€‚åœ¨githubä¸Šæœ‰663ä¸ª<code>star</code>ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿä¸æ˜¯å¾ˆå¤æ‚ï¼Œä¸‹é¢æˆ‘ä»¬ç®€å•çš„çœ‹ä¸€ä¸‹ã€‚</p>

<h2>å¦‚ä½•å¯¼å…¥åˆ°é¡¹ç›®ä¸­</h2>

<p><code>AKTabBarController</code>æ˜¯æ”¯æŒ<a href="http://www.superqq.com/blog/2014/10/16/cocoapodsan-zhuang-he-shi-yong-jiao-cheng/">CocoaPods</a>å¯¼å…¥çš„ã€‚æƒ³ç†è§£CocoaPodsçš„è¯·ç‚¹å‡»ï¼š<a href="http://www.superqq.com/blog/2014/10/16/cocoapodsan-zhuang-he-shi-yong-jiao-cheng/">CocoaPodså®‰è£…å’Œä½¿ç”¨æ•™ç¨‹</a>ã€‚åœ¨ä½ çš„Podfileæ–‡ä»¶ä¸­åŠ å…¥ï¼š</p>

<pre><code>platform :ios

pod 'AKTabBarController'
</code></pre>

<p>æ·»åŠ æˆåŠŸä¹‹åï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>

<pre><code>pod install 
</code></pre>

<h2>å¦‚ä½•ä½¿ç”¨AKTabBarController</h2>

<p>å®‰è£…æˆåŠŸä¹‹åï¼Œåœ¨ä½ æƒ³ç”¨çš„åœ°æ–¹å¯¼å…¥å¤´æ–‡ä»¶ï¼š</p>

<pre><code>#import "AKTabBarController.h"
</code></pre>

<p>ç„¶åï¼Œåˆ›å»º<code>tabBar</code></p>

<pre><code>// Create and initialize the height of the tab bar to 50px.
_tabBarController = [[AKTabBarController alloc] initWithTabBarHeight:50];

// Create and initialize with specific height and position atop the view controller
_tabBarController = [[AKTabBarController alloc] initWithTabBarHeight:50 position:AKTabBarPositionTop];

// Adding the view controllers to manage.
[_tabBarController setViewControllers:@[[[FirstViewController alloc] init], [[SecondViewController alloc] init], [[ThirdViewController alloc] init], [[FourthViewController alloc] init]]]];  
</code></pre>

<p>å…³äºæ›´å¤šAKTabBarControllerçš„ç”¨æ³•ï¼Œè¯·è®¿é—®ï¼š**<a href="https://github.com/alikaragoz/AKTabBarController**">https://github.com/alikaragoz/AKTabBarController**</a></p>

<h2>åŠŸèƒ½ç®€ä»‹</h2>

<pre><code>â€¢ è‡ªé€‚åº”ç«–å±å’Œæ¨ªå±æ¨¡å¼ï¼Œtab ä¸Šçš„å›¾æ ‡ä¼šæ ¹æ®ç«–å±å’Œæ¨ªå±æ¨¡å¼è‡ªåŠ¨ç¼©æ”¾å¤§å°ä»¥é€‚åº”tabçš„é«˜åº¦ã€‚

â€¢ è‡ªå®šä¹‰ tab bar çš„é«˜åº¦ï¼›

â€¢ å½“è¿›å…¥ä¸‹ä¸ªè§†å›¾æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨éšè—tab barï¼›

â€¢ å¯ä»¥åªæ˜¾ç¤ºå›¾ç‰‡ï¼Œè€Œä¸æ˜¾ç¤ºæ–‡å­—ï¼›å¹¶ä¸”å½“ tab bar çš„é«˜åº¦å¤ªå°æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨ç¼©æ”¾å›¾ç‰‡ä»¥åŠéšè—æ–‡å­—ï¼›

â€¢ åªéœ€è¦ä¸€å¼ å›¾ç‰‡æ¥è¡¨ç¤º tab è¢«é€‰æ‹©å’Œéé€‰æ‹©æ¨¡å¼ã€‚å³tab è¢«é€‰ä¸­æ—¶çš„é«˜å…‰æ˜¯ç”¨CoreGraphicsç»˜åˆ¶çš„ï¼Œä¸éœ€è¦é¢å¤–çš„å›¾ç‰‡ã€‚

â€¢ é€‰æ‹©ä¸åŒ tab æ—¶çš„åŠ¨ç”»åˆ‡æ¢æ•ˆæœç”¨çš„æ˜¯æ·¡å…¥æ·¡å‡ºï¼ˆcross fadeï¼‰çš„æ•ˆæœ. 

â€¢ æ”¯æŒé¢„æ¸²æŸ“å›¾åƒ

â€¢ æ”¯æŒè®¾ç½®tabBarå­—ä½“ã€‚
</code></pre>

<h2>å®é™…æ•ˆæœ</h2>

<p>æœ€ç»ˆå®ç°çš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p><img src="https://github.com/alikaragoz/AKTabBarController/raw/master/Screenshots/iphone-portrait.png" alt="1" /></p>

<p>è¿™é‡Œåªæ˜¯ç®€å•çš„è®²è§£ä¸€ä¸‹ã€‚å¤§å®¶é—²çš„æ—¶å€™ï¼Œå¦‚æœæœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥è‡ªå·±åŠ¨æ‰‹æ¥ç†Ÿç»ƒå…³äº<code>AKTabBarController</code>æ›´å¤šçš„åŠŸèƒ½ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[å…³äºå¯¼èˆªæ çš„å…­ä¸ªå°æŠ€å·§]]></title>
    <link href="http://www.superqq.com/blog/2015/07/30/six-tips-on-navigation-bar/"/>
    <updated>2015-07-30T00:13:43+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/30/six-tips-on-navigation-bar</id>
    <content type="html"><![CDATA[<p><code>UINavigationBar</code>å’Œ<code>UINavigationItem</code>æ˜¯iOSå¼€å‘ä¸­å¸¸ç”¨çš„æ§ä»¶ã€‚ä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹å…­ä¸ªå…³äºå¯¼èˆªæ çš„å°æŠ€å·§ã€‚</p>

<h2>1.è®¾ç½®å¯¼èˆªæ æ ‡é¢˜</h2>

<pre><code>self.title = @"iOSå¼€å‘ï¼šiOSDevTip";
</code></pre>

<h2>2.è®¾ç½®å¯¼èˆªæ æ ·å¼</h2>

<p>è®¾ç½®æ–¹æ³•ï¼š</p>

<pre><code>[self.navigationController.navigationBar setBarStyle:UIBarStyleBlack];
</code></pre>

<p><code>UIBarStyle</code>çš„æ ·å¼ï¼š</p>

<pre><code>typedef NS_ENUM(NSInteger, UIBarStyle) {
    UIBarStyleDefault          = 0,
    UIBarStyleBlack            = 1,

    UIBarStyleBlackOpaque      = 1, // Deprecated. Use UIBarStyleBlack
    UIBarStyleBlackTranslucent = 2, // Deprecated. Use UIBarStyleBlack and set the translucent property to YES
};
</code></pre>

<p><code>UIBarStyleDefault</code>æ˜¯é»˜è®¤æ ·å¼ï¼Œ<code>UIBarStyleBlack</code>æ˜¯é»‘è‰²ä¸é€æ˜ã€‚<code>UIBarStyleBlackOpaque</code>å’Œ<code>UIBarStyleBlackTranslucent</code>è¿™ä¸¤ä¸ªå·²ç»åºŸå¼ƒäº†ã€‚</p>

<p>å¦‚æœæƒ³è®¾ç½®å¯¼èˆªæ é€æ˜ï¼Œå¯ä»¥åŠ ä¸Šä¸‹é¢è¿™å¥ä»£ç ï¼š</p>

<pre><code>self.navigationController.navigationBar.translucent = YES;
</code></pre>

<h2>3.ä¿®æ”¹è¿”å›æŒ‰é’®title</h2>

<pre><code>self.navigationItem.title = @"test";
</code></pre>

<h2>4.éšè—è¿”å›æŒ‰é’®title</h2>

<p>æ¯”è¾ƒç¬¨çš„æ–¹æ³•æ˜¯ï¼š</p>

<pre><code>self.navigationItem.title = @"";
</code></pre>

<p>è¿˜å¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p>

<pre><code>[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -60) forBarMetrics:UIBarMetricsDefault];
</code></pre>

<h2>5.è®¾ç½®leftBarButtonItem</h2>

<pre><code>self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"back" style:UIBarButtonItemStylePlain target:self action:@selector(back:)];

- (void)back:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
}
</code></pre>

<h2>6.å·¦æ»‘è¿”å›æ‰‹åŠ¿å¤±æ•ˆäº†æ€ä¹ˆåŠ</h2>

<p>å¦‚æœæŒ‰ä¸Šä¸€æ­¥è®¾ç½®<code>leftBarButtonItem</code>ä¹‹åï¼Œå·¦æ»‘è¿”å›æ‰‹åŠ¿å°±ä¼šå¤±æ•ˆã€‚è®¾ç½®ä¸€ä¸‹<code>UIGestureRecognizerDelegate</code>ä»£ç†å³å¯ï¼š</p>

<pre><code>self.navigationController.interactivePopGestureRecognizer.delegate = self;
</code></pre>

<p>ä»¥ä¸Šæ˜¯å…­ä¸ªå…³äºå¯¼èˆªæ çš„å°æŠ€å·§ã€‚æ›´å¤šiOSå¼€å‘ç›¸å…³çš„æŠ€æœ¯ï¼Œè¯·å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·iOSå¼€å‘ï¼š<strong>iOSDevTip</strong></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSå¼€å‘ä¹‹UIImageç­‰æ¯”ç¼©æ”¾]]></title>
    <link href="http://www.superqq.com/blog/2015/07/29/uiimage-geometric-zoom/"/>
    <updated>2015-07-29T00:01:15+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/29/uiimage-geometric-zoom</id>
    <content type="html"><![CDATA[<h2>è¯„è®ºåŠŸèƒ½çœŸä¸é”™</h2>

<p>è¯„è®ºå¼€é€šåï¼Œæœç„¶æœ‰å¾ˆå¤šäººåæ§½ã€‚è°¢è°¢å¤§å®¶çš„æ”¯æŒå’Œå…³çˆ±ï¼Œå¦‚æœæœ‰åšçš„ä¸åˆ°çš„åœ°æ–¹ï¼Œè¿˜è¯·æµ·æ¶µã€‚æ¯•ç«Ÿæˆ‘ä¸€ä¸ªäººçš„åŠ›é‡æ˜¯æœ‰é™çš„ï¼Œæˆ‘ä¼šå°½è‡ªå·±æœ€å¤§çš„åŠªåŠ›å¤§å®¶å‡†å¤‡ä¸€äº›å¹²è´§ã€‚</p>

<p>æœ‰äº›å†…å®¹å¯èƒ½éƒ½æ˜¯æ¯”è¾ƒåŸºç¡€çš„ï¼Œè®°ä½ï¼šä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œä¸ç§¯å°æµæ— ä»¥æˆæ±Ÿæµ·ã€‚æˆ‘æƒ³è¿™ä¸ªé“ç†å¤§å®¶éƒ½æ‡‚ï¼Œåœ¨ä¸ºå¤§å®¶å‡†å¤‡æ–‡ç« çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯ä¸€æ¬¡å­¦ä¹ æˆé•¿ã€‚</p>

<p>å¤§å®¶å¯ä»¥ç»§ç»­åæ§½ï¼å¾®ä¿¡çš„è¯„è®ºå°±æ˜¯ä¸€ä¸ªæ²Ÿé€šçš„æ¸ é“ï¼Œä¹Ÿæ˜¯ä¸€ç¯‡æ–‡ç« çš„å»¶ç»­ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨è¯„è®ºä¸­å†™ä¸€äº›ä½ å¯¹iOSå¼€å‘çš„è§è§£ï¼Œè¯´ä¸å®šå°±ä¼šå¯¹ä»–äººæœ‰å¸®åŠ©ã€‚</p>

<p>å¾ˆé«˜å…´ï¼Œå·²ç»æœ‰å¥½å‡ ä½iOSå¼€å‘çš„æœ‹å‹ç­”åº”ä»¥åä¼šå†™æ–‡ç« æŠ•ç¨¿ç»™æˆ‘ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å†å¼ºè°ƒä¸€ä¸‹ï¼šå¦‚æœä½ æœ‰å¥½çš„æŠ€æœ¯æ–‡ç« ä¸€å®šè¦æŠ•ç¨¿ç»™æˆ‘å™¢ï¼æŠ•ç¨¿é‚®ç®±ï¼š</p>

<pre><code>worldligang@163.com
</code></pre>

<p>å‰é¢è®²äº†<a href="http://www.superqq.com/blog/2015/07/26/jie-qu-uiimagezhi-ding-da-xiao-qu-yu/">æˆªå–UIImageæŒ‡å®šå¤§å°åŒºåŸŸ</a>ï¼Œå¾ˆæ–¹ä¾¿çš„æˆªå–<code>UIImage</code>ã€‚ä»Šå¤©è¦å’Œå¤§å®¶åˆ†äº«çš„æ˜¯<code>UIImage</code>çš„ç¼©æ”¾ã€‚</p>

<p>ä¸¤ç§ç¼©æ”¾:</p>

<ol>
<li>ç¼©æ”¾åˆ°æŒ‡å®šå¤§å°ï¼Œä¹Ÿå°±æ˜¯æŒ‡å®šçš„<code>size</code>.</li>
<li>ç­‰æ¯”ç¼©æ”¾ã€‚</li>
</ol>


<h2>ç¼©æ”¾åˆ°æŒ‡å®šå¤§å°</h2>

<pre><code>- (UIImage*)imageCompressWithSimple:(UIImage*)image scaledToSize:(CGSize)size
{
    UIGraphicsBeginImageContext(size);
    [image drawInRect:CGRectMake(0,0,size.width,size.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
}
</code></pre>

<h2>ç­‰æ¯”ç¼©æ”¾</h2>

<h3>é€šè¿‡ç¼©æ”¾ç³»æ•°</h3>

<pre><code>- (UIImage*)imageCompressWithSimple:(UIImage*)image scale:(float)scale
{
    CGSize size = image.size;
    CGFloat width = size.width;
    CGFloat height = size.height;
    CGFloat scaledWidth = width * scale;
    CGFloat scaledHeight = height * scale;
    UIGraphicsBeginImageContext(size); // this will crop
    [image drawInRect:CGRectMake(0,0,scaledWidth,scaledHeight)];
    UIImage* newImage= UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
}
</code></pre>

<p><code>scale</code>æ˜¯ç¼©æ”¾ç³»æ•°  ã€‚</p>

<h3>é€šè¿‡è®¡ç®—å¾—åˆ°ç¼©æ”¾ç³»æ•°</h3>

<pre><code>- (UIImage*)imageByScalingAndCroppingForSize:(CGSize)targetSize
{

    UIImage *sourceImage = [UIImage imageNamed:@"test.jpg"];
    UIImage *newImage = nil;
    CGSize imageSize = sourceImage.size;
    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;
    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;
    CGFloat scaleFactor = 0.0;
    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;
    CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

    if (CGSizeEqualToSize(imageSize, targetSize) == NO)
    {
        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;
        if (widthFactor &gt; heightFactor)
            scaleFactor = widthFactor; // scale to fit height
        else
            scaleFactor = heightFactor; // scale to fit width

        scaledWidth= width * scaleFactor;
        scaledHeight = height * scaleFactor;
        // center the image
        if (widthFactor &gt; heightFactor)
        {
            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;
        }
        else if (widthFactor &lt; heightFactor)
        {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
    }

    UIGraphicsBeginImageContext(targetSize); // this will crop
    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.origin = thumbnailPoint;
    thumbnailRect.size.width= scaledWidth;
    thumbnailRect.size.height = scaledHeight;
    [sourceImage drawInRect:thumbnailRect];
    newImage = UIGraphicsGetImageFromCurrentImageContext();

    if(newImage == nil)
        NSLog(@"could not scale image");
    //pop the context to get back to the default
    UIGraphicsEndImageContext();

    return newImage;

}
</code></pre>

<p>å¾ˆä¹…ä¹‹å‰å†™äº†ä¸€ç¯‡æ–‡ç« <a href="http://www.superqq.com/blog/2015/01/22/jie-jue-mwphotobrowserzhong-de-sdwebimagejia-zai-da-tu-dao-zhi-de-nei-cun-jing-gao-wen-ti/">è§£å†³MWPhotoBrowserä¸­çš„SDWebImageåŠ è½½å¤§å›¾å¯¼è‡´çš„å†…å­˜è­¦å‘Šé—®é¢˜</a>ã€‚è¿™ä¸ªæˆ‘è®°å¾—å½“æ—¶ä»æœåŠ¡å™¨æ‹¿åˆ°çš„ç…§ç‰‡å¤§æ¦‚æœ‰10å‡ Mçš„æ ·å­ï¼ŒåŠ è½½å‡ºæ¥ä¼šå¯¼è‡´å†…å­˜è­¦å‘Šã€‚æ‰€ä»¥æˆ‘å½“æ—¶é€šè¿‡ä¿®æ”¹SDWebImageæºç ï¼Œå°±æ˜¯æŠŠä¸‹è½½ä¸‹æ¥çš„ç…§ç‰‡è¿›è¡Œç¼©æ”¾ï¼Œå†…å­˜å°±é™ä¸‹æ¥äº†ã€‚ä¸€èˆ¬æƒ…å†µä¸‹åº”è¯¥ä¸ä¼šåŠ è½½è¿™ä¹ˆå¤§çš„ç…§ç‰‡çš„ï¼Œç”¨æˆ·è¦æ˜¯çŸ¥é“ï¼Œæ—©æŠŠä½ çš„APPç»™åˆ æ‰äº†ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[è‘—åçš„AFNetworkingç½‘ç»œåŸºç¡€åº“Swiftç‰ˆAlamofire]]></title>
    <link href="http://www.superqq.com/blog/2015/07/28/swift-alamofire/"/>
    <updated>2015-07-28T20:42:52+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/28/swift-alamofire</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/Alamofire/Alamofire" target="_blank" title=â€œæºä»£ç â€>æºä»£ç </a></p>

<p><img src="http://swiftmi.qiniudn.com/codeimage/201409/13_1410874399080_89.gif" alt="swift-gif" /></p>

<h2>Swift Alamofire ç®€ä»‹</h2>

<p><img src="https://raw.githubusercontent.com/Alamofire/Alamofire/assets/alamofire.png" alt="Alamofire: Elegant Networking in Swift" /></p>

<p>Alamofireæ˜¯ Swift è¯­è¨€çš„ HTTP ç½‘ç»œå¼€å‘å·¥å…·åŒ…,ç›¸å½“äºSwiftå®ç°<a href="http://www.superqq.com/blog/2014/11/07/ioswang-luo-bian-cheng-zhi-afnetworkingshi-yong/">AFNetworking</a>ç‰ˆæœ¬ã€‚</p>

<p>å½“ç„¶,AFNetworkingéå¸¸ç¨³å®š,åœ¨Mac OSXä¸iOSä¸­ä¹Ÿèƒ½åƒå…¶ä»–Objective-Cä»£ç ä¸€æ ·ç”¨Swiftç¼–å†™ã€‚ä¸è¿‡Alamofireæ›´é€‚åˆSwiftè¯­è¨€é£æ ¼ä¹ æƒ¯(Alamofireä¸AFNetworkingå¯ä»¥å…±å­˜ä¸€ä¸ªé¡¹ç›®ä¸­,äº’ä¸å½±å“).</p>

<pre><code>Alamofire å–åæ¥æºäº [Alamo Fire flower](https://aggie-horticulture.tamu.edu/wildseed/alamofire.html)
</code></pre>

<h2>Alamofireå®‰è£…ä½¿ç”¨æ–¹æ³•</h2>

<p>ä½¿ç”¨CocoaPodså®‰è£…ï¼Œåœ¨podfile</p>

<pre><code>source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '8.0'
use_frameworks!

pod 'Alamofire', '~&gt; 1.2'
</code></pre>

<p>submodule æ–¹å¼å®‰è£…</p>

<pre><code>$ git submodule add https://github.com/Alamofire/Alamofire.git
</code></pre>

<h2>ç¯å¢ƒè¦æ±‚</h2>

<p>Xcode 6</p>

<p>iOS 7.0+ / Mac OS X 10.9+</p>

<h2>Alamofireä½¿ç”¨æ–¹æ³•</h2>

<h3>GET è¯·æ±‚</h3>

<pre><code>Alamofire.request(.GET, "http://httpbin.org/get")
</code></pre>

<p>å¸¦å‚æ•°</p>

<pre><code>Alamofire.request(.GET, "http://httpbin.org/get", parameters: ["foo": "bar"])
</code></pre>

<p>Responseç»“æœå¤„ç†</p>

<pre><code>Alamofire.request(.GET, "http://httpbin.org/get", parameters: ["foo": "bar"])
         .response { (request, response, data, error) in
                     println(request)
                     println(response)
                     println(error)
                   }
</code></pre>

<p>Responseç»“æœå­—ç¬¦ä¸²å¤„ç†</p>

<pre><code>Alamofire.request(.GET, "http://httpbin.org/get", parameters: ["foo": "bar"])
         .responseString { (request, response, string, error) in
                  println(string)
         }
</code></pre>

<h2>HTTP æ–¹æ³•ï¼ˆMedthodsï¼‰</h2>

<p>Alamofire.Method enum åˆ—è¡¨å‡ºåœ¨RFC 2616ä¸­å®šä¹‰çš„HTTPæ–¹æ³• Â§9:</p>

<pre><code>public enum Method: String {
    case OPTIONS = "OPTIONS"
    case GET = "GET"
    case HEAD = "HEAD"
    case POST = "POST"
    case PUT = "PUT"
    case PATCH = "PATCH"
    case DELETE = "DELETE"
    case TRACE = "TRACE"
    case CONNECT = "CONNECT"
}
</code></pre>

<p>è¿™äº›å€¼å¯ä»¥ä½œä¸ºAlamofire.requestè¯·æ±‚çš„ç¬¬ä¸€ä¸ªå‚æ•°.</p>

<pre><code>Alamofire.request(.POST, "http://httpbin.org/post")

Alamofire.request(.PUT, "http://httpbin.org/put")

Alamofire.request(.DELETE, "http://httpbin.org/delete")
</code></pre>

<p>POSTè¯·æ±‚</p>

<pre><code>let parameters = [
    "foo": "bar",
    "baz": ["a", 1],
    "qux": [
        "x": 1,
        "y": 2,
        "z": 3
    ]
]

Alamofire.request(.POST, "http://httpbin.org/post", parameters: parameters)
</code></pre>

<p>å‘é€ä»¥ä¸‹HttpBodyå†…å®¹:</p>

<pre><code>foo=bar&amp;baz[]=a&amp;baz[]=1&amp;qux[x]=1&amp;qux[y]=2&amp;qux[z]=3
</code></pre>

<p>Alamofire ä½¿ç”¨Alamofire.ParameterEncodingå¯ä»¥æ”¯æŒURL query/URI form,JSON, PropertyListæ–¹å¼ç¼–ç å‚æ•°ã€‚</p>

<p>Parameter Encoding</p>

<pre><code>enum ParameterEncoding {
    case URL
    case JSON(options: NSJSONWritingOptions)
    case PropertyList(format: NSPropertyListFormat,
                      options: NSPropertyListWriteOptions)

    func encode(request: NSURLRequest,
                parameters: [String: AnyObject]?) -&gt;
                    (NSURLRequest, NSError?)
    { ... }
}
</code></pre>

<p>NSURLRequestæ–¹å¼ç¼–ç å‚æ•°</p>

<pre><code>let URL = NSURL(string: "http://httpbin.org/get")
var request = NSURLRequest(URL: URL)

let parameters = ["foo": "bar"]
let encoding = Alamofire.ParameterEncoding.URL
(request, _) = encoding.encode(request, parameters)
</code></pre>

<p>POST JSONæ ¼å¼æ•°æ®</p>

<pre><code>Alamofire.request(.POST, "http://httpbin.org/post", parameters: parameters, encoding: .JSON(options: nil))
         .responseJSON {(request, response, JSON, error) in
            println(JSON)
     }
</code></pre>

<p>Response æ–¹æ³•</p>

<pre><code>response()
responseString(encoding: NSStringEncoding)
responseJSON(options: NSJSONReadingOptions)
responsePropertyList(options: NSPropertyListReadOptions)
</code></pre>

<h3>ä¸Šä¼ ï¼ˆUploadingï¼‰</h3>

<p>æ”¯æŒçš„ç±»å‹</p>

<pre><code>File
Data
Stream
Multipart (Coming Soon)
</code></pre>

<p>ä¸Šä¼ æ–‡ä»¶</p>

<pre><code>let fileURL = NSBundle.mainBundle()
                  .URLForResource("Default",
                                  withExtension: "png")

Alamofire.upload(.POST, "http://httpbin.org/post", file: fileURL)
</code></pre>

<h3>ä¸Šä¼ è¿›åº¦</h3>

<pre><code>Alamofire.upload(.POST, "http://httpbin.org/post", file: fileURL)
    .progress { (bytesWritten, totalBytesWritten, totalBytesExpectedToWrite) in
        println(totalBytesWritten)
    }
    .responseJSON { (request, response, JSON, error) in
        println(JSON)
    }
</code></pre>

<h3>ä¸‹è½½</h3>

<p>æ”¯æŒçš„ç±»å‹</p>

<pre><code>Request
Resume Data
</code></pre>

<p>ä¸‹è½½æ–‡ä»¶</p>

<pre><code>Alamofire.download(.GET, "http://httpbin.org/stream/100", destination: { (temporaryURL, response) in
    if let directoryURL = NSFileManager.defaultManager()
                          .URLsForDirectory(.DocumentDirectory,
                                            inDomains: .UserDomainMask)[0]
                          as? NSURL {
        let pathComponent = response.suggestedFilename

        return directoryURL.URLByAppendingPathComponent(pathComponent)
    }

    return temporaryURL
})
</code></pre>

<p>ä¸‹è½½åˆ°é»˜è®¤è·¯å¾„</p>

<pre><code>let destination = Alamofire.Request.suggestedDownloadDestination(directory: .DocumentDirectory, domain: .UserDomainMask)

Alamofire.download(.GET, "http://httpbin.org/stream/100", destination: destination)
</code></pre>

<p>ä¸‹è½½è¿›åº¦</p>

<pre><code>Alamofire.download(.GET, "http://httpbin.org/stream/100", destination: destination)
         .progress { (bytesRead, totalBytesRead, totalBytesExpectedToRead) in
             println(totalBytesRead)
         }
         .response { (request, response, _, error) in
             println(response)
         }
</code></pre>

<h3>è®¤è¯ï¼ˆAuthenticationï¼‰</h3>

<p>æ”¯æŒä»¥ä¸‹å‡ ç§è®¤è¯</p>

<pre><code>HTTP Basic
HTTP Digest
Kerberos
NTLM
</code></pre>

<p>Http basicè®¤è¯</p>

<pre><code>let user = "user"
let password = "password"

Alamofire.request(.GET, "https://httpbin.org/basic-auth/\(user)/\(password)")
    .authenticate(HTTPBasic: user, password: password)
    .response {(request, response, _, error) in
        println(response)
        }
</code></pre>

<p>é‡‡ç”¨NSURLCredential&amp;NSURLProtectionSpaceæ–¹å¼è®¤è¯</p>

<pre><code>let user = "user"
let password = "password"

let credential = NSURLCredential(user: user, password: password, persistence: .ForSession)
let protectionSpace = NSURLProtectionSpace(host: "httpbin.org", port: 0, `protocol`: "https", realm: nil, authenticationMethod: NSURLAuthenticationMethodHTTPBasic)



Alamofire.request(.GET, "https://httpbin.org/basic-auth/\(user)/\(password)")
    .authenticate(usingCredential: credential, forProtectionSpace: protectionSpace)
    .response {(request, response, _, error) in
        println(response)
}
</code></pre>

<h3>Printable</h3>

<pre><code>let request = Alamofire.request(.GET, "http://httpbin.org/ip")

println(request)
// GET http://httpbin.org/ip (200)
</code></pre>

<h3>è°ƒè¯•</h3>

<pre><code>let request = Alamofire.request(.GET, "http://httpbin.org/get", parameters: ["foo": "bar"])

debugPrintln(request)
</code></pre>

<h3>Output (cURL)</h3>

<pre><code>$ curl -i \
    -H "User-Agent: Alamofire" \
    -H "Accept-Encoding: Accept-Encoding: gzip;q=1.0,compress;q=0.5" \
    -H "Accept-Language: en;q=1.0,fr;q=0.9,de;q=0.8,zh-Hans;q=0.7,zh-Hant;q=0.6,ja;q=0.5" \
    "http://httpbin.org/get?foo=bar"
</code></pre>

<p>æ›´å¤šçš„ç”¨æ³•å°†ä¼šåœ¨æ¥å£æ–‡æ¡£ä¸­ä¸€ä¸€åˆ—å‡º,æ•¬è¯·æœŸå¾…ã€‚</p>

<p>Alamofireä¸AFNetworkingæ˜¯åŒä¸€ä¸ªä½œè€…</p>

<blockquote><p>ä½œè€…æåˆšæ˜¯åˆšåˆšåœ¨çº¿ï¼ˆwww.superqq.comï¼‰ç«™é•¿ï¼Œç™¾åº¦ç™¾å®¶ä¸“æ ä½œè€…
iOSå·¥ç¨‹å¸ˆéè‘—åè‡ªåª’ä½“ï¼Œå¾®ä¿¡å…¬ä¼—å·iOSå¼€å‘ï¼šiOSDevTipè¿è¥è€…</p></blockquote>

<p><img src="http://upload-images.jianshu.io/upload_images/624136-963198258f95cc10.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="iOSDevTip" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[äº”ç§åˆ›å»ºUIImageçš„ç±»æ–¹æ³•]]></title>
    <link href="http://www.superqq.com/blog/2015/07/28/four-create-uiimage-method/"/>
    <updated>2015-07-28T01:08:30+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/28/four-create-uiimage-method</id>
    <content type="html"><![CDATA[<h3>iOSå¼€å‘å·²å¼€é€šè¯„è®ºåŠŸèƒ½</h3>

<p>çš‡å¤©ä¸è´Ÿæœ‰å¿ƒäººï¼ŒiOSå¼€å‘çš„è¯„è®ºåŠŸèƒ½å·²ç»è¢«é‚€è¯·å¼€é€šå•¦ã€‚è¿™å‡ å¤©ä¸€ç›´æƒ³ç€ï¼Œå¾®ä¿¡å›¢é˜Ÿå¤§æ¦‚åœ¨æœˆåº•çš„æ—¶å€™ä¼šé‚€è¯·æˆ‘å¼€é€šè¯„è®ºåŠŸèƒ½ã€‚æœç„¶ä¸å‡ºæˆ‘æ‰€æ–™ã€‚è¿™æ˜¯æˆ‘æ”¶åˆ°çš„æ¶ˆæ¯ï¼š</p>

<p><img src="http://7xkkk9.com1.z0.glb.clouddn.com/weixincomment.png" alt="weixincomment.png" /></p>

<p>è‡³æ­¤ï¼ŒiOSå¼€å‘çš„åŸåˆ›ã€èµèµã€è¯„è®ºä¸‰ä¸ªåŠŸèƒ½éƒ½é½å•¦ï¼Œè¿™ä¹Ÿæ˜¯å¯¹æˆ‘è¾›è‹¦åŠªåŠ›çš„ä¸€ç§è‚¯å®šã€‚å‰æ–¹çš„è·¯ä¾ç„¶å¾ˆæ¼«é•¿ï¼Œæˆ‘ä»¬ä¸€èµ·åŠªåŠ›ï¼Œè®©iOSå¼€å‘å˜å¾—æ›´å¥½ã€‚</p>

<p>æ—¢ç„¶è¯„è®ºåŠŸèƒ½å·²ç»å¼€é€šï¼Œå¤§å®¶ä¹Ÿåˆ«é—²ç€å•¦ï¼ä»Šå¤©çš„æ–‡ç« å¤§å®¶ä¸€èµ·å°½æƒ…çš„åæ§½å§ï¼</p>

<p><code>UIImage</code>æœ‰äº”ä¸ªç±»æ–¹æ³•ï¼Œç”¨æ¥åˆ›å»º<code>UIImage</code>çš„ã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹æ¯ä¸ªç±»æ–¹æ³•çš„ä½œç”¨å’Œåˆ›å»ºå®ä¾‹ã€‚</p>

<h3>1.ä½¿ç”¨ç±»æ–¹æ³•<code>imageNamed:</code>åˆ›å»º</h3>

<pre><code>+ (UIImage *)imageNamed:(NSString *)name;      // load from main bundle      
</code></pre>

<p><code>name</code>æ˜¯ç…§ç‰‡åç§°ã€‚åˆ›å»ºUIImageå¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>UIImage *image = [UIImage imageNamed:@"ganggang"];   
</code></pre>

<p>ä½¿ç”¨<code>imageNamed:</code>åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šå…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨<code>ganggang</code>çš„ç…§ç‰‡ï¼Œå¦‚ä¸å­˜åœ¨ï¼Œå›¾ç‰‡é¦–å…ˆä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œç„¶åæ‰è¿”å›è¦åŠ è½½çš„å›¾ç‰‡å¯¹è±¡ï¼›å¦‚æœå­˜åœ¨ï¼Œç›´æ¥è¿”å›è¦åŠ è½½çš„ç…§ç‰‡å¯¹è±¡ã€‚</p>

<h3>2.ä½¿ç”¨ç±»æ–¹æ³•<code>imageWithContentsOfFile:</code>åˆ›å»º</h3>

<pre><code>+ (UIImage *)imageWithContentsOfFile:(NSString *)path;
</code></pre>

<p><code>path</code>æ˜¯éœ€è¦åŠ è½½ç…§ç‰‡çš„è·¯å¾„ï¼Œå¦‚ä½•è·å–ç…§ç‰‡çš„è·¯å¾„è¯·ç‚¹å‡»<a href="http://www.superqq.com/blog/2015/07/22/ioskai-fa-zhi-huo-qu-sha-he-lu-jing/">iOSå¼€å‘ä¹‹è·å–æ²™ç›’è·¯å¾„</a>ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>UIImage *image = [UIImage imageWithContentsOfFile:path];   
</code></pre>

<p>ä½¿ç”¨<code>imageWithContentsOfFile:</code>åˆ›å»º<code>UIImage</code>çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥ä»ç£ç›˜ä¸ŠåŠ è½½ã€‚å½“æ”¶åˆ°å†…å­˜è­¦å‘Šæ—¶ï¼Œ<code>UIImage</code>å¯¹è±¡ä¼šè¢«é‡Šæ”¾ï¼Œä¸‹ä¸€æ¬¡ç»˜å›¾çš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°åŠ è½½ã€‚</p>

<h3>3.ä½¿ç”¨ç±»æ–¹æ³•<code>imageWithData:</code>åˆ›å»º</h3>

<pre><code>+ (UIImage *)imageWithData:(NSData *)data;
</code></pre>

<p><code>data</code>æ˜¯ç…§ç‰‡æ•°æ®ï¼Œä¸€èˆ¬æ˜¯è¯·æ±‚è¿”å›çš„ï¼Œç„¶åé€šè¿‡<code>imageWithData:</code>åˆ›å»º<code>UIImage</code>ã€‚å®ç°ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<pre><code>NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.superqq.com/images/getqrcode.jpg"]];
UIImage *image =[UIImage imageWithData:data]; 
</code></pre>

<h3>4.ä½¿ç”¨ç±»æ–¹æ³•<code>imageWithCGImage:</code>åˆ›å»º</h3>

<pre><code>+ (UIImage *)imageWithCGImage:(CGImageRef)cgImage;
</code></pre>

<p><code>cgImage</code>æ˜¯å®šä¹‰åœ¨QuartzCoreæ¡†æ¶ä¸­çš„ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆã€‚è¿™ä¸ªç»“æ„ç”¨æ¥åˆ›å»ºåƒç´ ä½å›¾ï¼Œå¯ä»¥é€šè¿‡æ“ä½œå­˜å‚¨çš„åƒç´ ä½æ¥ç¼–è¾‘å›¾ç‰‡ã€‚</p>

<pre><code>UIImage *image = [UIImage imageWithCGImage:cgImage];   
</code></pre>

<h3>5.ä½¿ç”¨ç±»æ–¹æ³•<code>imageWithCIImage:</code>åˆ›å»º</h3>

<pre><code>+ (UIImage *)imageWithCIImage:(CIImage *)ciImage NS_AVAILABLE_IOS(5_0);
</code></pre>

<p><code>CIImage</code>æ˜¯<code>CoreImage</code>æ¡†æ¶ä¸­æœ€åŸºæœ¬ä»£è¡¨å›¾åƒçš„å¯¹è±¡ï¼Œåœ¨<code>CIImage</code>è¢«<code>CIContext</code>æ¸²æŸ“å‡ºæ¥ä¹‹å‰ï¼Œä»–æ˜¯ä¾èµ–äºæ»¤é•œé“¾çš„ï¼Œæ»¤é•œæ˜¯ä¸ä¼šæ›´æ”¹<code>CIImage</code>ä¸­çš„å›¾åƒæ•°æ®ã€‚</p>

<pre><code> UIImage *image = [UIImage imageWithCGImage:ciImage];   
</code></pre>

<p>ä»¥ä¸Šå››ç§æ–¹æ³•éƒ½æ˜¯<code>UIImage</code>çš„ç±»æ–¹æ³•ï¼Œä½¿ç”¨<code>UIImage</code>çš„åˆå§‹åŒ–æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥åˆ›å»º<code>UIImage</code>å¯¹è±¡çš„å¤§å®¶å¯ä»¥è¿›<code>UIImage</code>è¯¦ç»†äº†è§£ä¸€ä¸‹ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSå¼€å‘ä¹‹layoutSubviewsçš„ä½œç”¨å’Œè°ƒç”¨æœºåˆ¶]]></title>
    <link href="http://www.superqq.com/blog/2015/07/27/ioskai-fa-zhi-layoutsubviewsde-zuo-yong-he-diao-yong-ji-zhi/"/>
    <updated>2015-07-27T13:57:27+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/27/ioskai-fa-zhi-layoutsubviewsde-zuo-yong-he-diao-yong-ji-zhi</id>
    <content type="html"><![CDATA[<p>åœ¨UIViewé‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³•<code>layoutSubviews</code>ï¼Œè¿™ä¸ªæ–¹æ³•å…·ä½“ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>

<pre><code>- (void)layoutSubviews;    // override point. called by layoutIfNeeded automatically. As of iOS 6.0, when constraints-based layout is used the base implementation applies the constraints-based layout, otherwise it does nothing.
</code></pre>

<h2>å®˜æ–¹æ–‡æ¡£è§£é‡Š</h2>

<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è‹¹æœå®˜æ–¹æ–‡æ¡£çš„è§£é‡Šï¼š</p>

<pre><code>The default implementation of this method does nothing on iOS 5.1 and earlier. Otherwise, the default implementation uses any constraints you have set to determine the size and position of any subviews.

Subclasses can override this method as needed to perform more precise layout of their subviews. You should override this method only if the autoresizing and constraint-based behaviors of the subviews do not offer the behavior you want. You can use your implementation to set the frame rectangles of your subviews directly.

You should not call this method directly. If you want to force a layout update, call the setNeedsLayout method instead to do so prior to the next drawing update. If you want to update the layout of your views immediately, call the layoutIfNeeded method.
</code></pre>

<p>æœ€åä¸€æ®µè¯´ï¼Œä¸è¦ç›´æ¥è°ƒç”¨æ­¤æ–¹æ³•ã€‚å¦‚æœä½ æƒ³å¼ºåˆ¶æ›´æ–°å¸ƒå±€ï¼Œä½ å¯ä»¥è°ƒç”¨<code>setNeedsLayout</code>æ–¹æ³•ï¼›å¦‚æœä½ æƒ³ç«‹å³æ•°æ˜¾ä½ çš„<code>views</code>ï¼Œä½ éœ€è¦è°ƒç”¨<code>layoutIfNeeded</code>æ–¹æ³•ã€‚</p>

<h2>layoutSubviewsä½œç”¨</h2>

<p><code>layoutSubviews</code>æ˜¯å¯¹<code>subviews</code>é‡æ–°å¸ƒå±€ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³æ›´æ–°å­è§†å›¾çš„ä½ç½®çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨<code>layoutSubviews</code>æ–¹æ³•ï¼Œæ—¢å¯ä»¥å®ç°å¯¹å­è§†å›¾é‡æ–°å¸ƒå±€ã€‚</p>

<p><code>layoutSubviews</code>é»˜è®¤æ˜¯ä¸åšä»»ä½•äº‹æƒ…çš„ï¼Œç”¨åˆ°çš„æ—¶å€™ï¼Œéœ€è¦åœ¨è‡ªé›·è¿›è¡Œé‡å†™ã€‚</p>

<h2>layoutSubviewsä»¥ä¸‹æƒ…å†µä¼šè¢«è°ƒç”¨</h2>

<p>è‹¹æœå®˜æ–¹æ–‡æ¡£å·²ç»å¼ºè°ƒï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨<code>layoutSubviews</code>å¯¹å­è§†å›¾è¿›è¡Œé‡æ–°å¸ƒå±€ã€‚é‚£ä¹ˆï¼Œ<code>layoutSubviews</code>ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¢«è°ƒç”¨å‘¢ï¼Ÿé€šè¿‡ç™¾åº¦æœç´¢ï¼Œå‘ç°ä»¥ä¸‹å‡ ç§æƒ…å†µ<code>layoutSubviews</code>ä¼šè¢«è°ƒç”¨ã€‚</p>

<ol>
<li>ç›´æ¥è°ƒç”¨<code>setLayoutSubviews</code>ã€‚ï¼ˆè¿™ä¸ªåœ¨ä¸Šé¢è‹¹æœå®˜æ–¹æ–‡æ¡£é‡Œæœ‰è¯´æ˜ï¼‰</li>
<li><code>addSubview</code>çš„æ—¶å€™ã€‚</li>
<li>å½“<code>view</code>çš„<code>frame</code>å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ã€‚</li>
<li>æ»‘åŠ¨<code>UIScrollView</code>çš„æ—¶å€™ã€‚</li>
<li>æ—‹è½¬<code>Screen</code>ä¼šè§¦å‘çˆ¶<code>UIView</code>ä¸Šçš„<code>layoutSubviews</code>äº‹ä»¶ã€‚</li>
<li>æ”¹å˜ä¸€ä¸ª<code>UIView</code>å¤§å°çš„æ—¶å€™ä¹Ÿä¼šè§¦å‘çˆ¶<code>UIView</code>ä¸Šçš„<code>layoutSubviews</code>äº‹ä»¶ã€‚</li>
</ol>


<p>æˆ‘ç®€å•æµ‹è¯•äº†ä¸€ä¸‹ï¼Œä¸Šé¢åŸºæœ¬éƒ½ä¼šè¢«è°ƒç”¨ã€‚ æ³¨æ„ï¼š</p>

<pre><code>å½“viewçš„framçš„å€¼ä¸º0çš„æ—¶å€™ï¼Œ`addSubview`ä¹Ÿä¸ä¼šè°ƒç”¨`layoutSubviews`çš„ã€‚
</code></pre>

<p><code>layoutSubviews</code>æ–¹æ³•åœ¨å¯¹è‡ªé›·è§†å›¾è¿›è¡Œå¸ƒå±€çš„æ—¶å€™éå¸¸æ–¹ä¾¿ã€‚å¯ä»¥è‡ªå·±åŠ¨æ‰‹ï¼Œæ·±å…¥ç†è§£<code>layoutSubviews</code>çš„è°ƒç”¨æœºåˆ¶ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æˆªå–UIImageæŒ‡å®šå¤§å°åŒºåŸŸ]]></title>
    <link href="http://www.superqq.com/blog/2015/07/26/jie-qu-uiimagezhi-ding-da-xiao-qu-yu/"/>
    <updated>2015-07-26T10:07:58+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/26/jie-qu-uiimagezhi-ding-da-xiao-qu-yu</id>
    <content type="html"><![CDATA[<p>æœ€è¿‘é‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šä»æœåŠ¡å™¨è·å–åˆ°ä¸€å¼ ç…§ç‰‡ï¼Œåªéœ€è¦æ˜¾ç¤ºä»–çš„å·¦åŠéƒ¨åˆ†ï¼Œæˆ–è€…ä¸­é—´éƒ¨åˆ†ç­‰ç­‰ã€‚ä¹Ÿå°±æ˜¯æˆªå–UIImageæŒ‡å®šå¤§å°åŒºåŸŸã€‚</p>

<h2>UIImageæ‰©å±•</h2>

<p>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯å¯¹<code>UIImage</code>è¿›è¡Œæ‰©å±•ã€‚é€šè¿‡<code>CGImageRef</code>å’Œ<code>CGImage</code>å®Œæˆæˆªå–ï¼Œè°ƒç”¨çš„æ–¹æ³•æ˜¯ï¼š<code>CGImageCreateWithImageInRect</code>ã€‚æ‰©å±•ç±»å«<code>UIImage+Crop</code>ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>

<h3>UIImage+Crop.h</h3>

<pre><code>#import &lt;UIKit/UIKit.h&gt;

typedef NS_ENUM(NSInteger, XYCropImageStyle){
    XYCropImageStyleRight               =0,      // å³åŠéƒ¨åˆ†
    XYCropImageStyleCenter              =1,      // ä¸­é—´éƒ¨åˆ†
    XYCropImageStyleLeft                =2,      // å·¦åŠéƒ¨åˆ†
    XYCropImageStyleRightOneOfThird     =3,      // å³ä¾§ä¸‰åˆ†ä¹‹ä¸€éƒ¨åˆ†
    XYCropImageStyleCenterOneOfThird    =4,      // ä¸­é—´ä¸‰åˆ†ä¹‹ä¸€éƒ¨åˆ†
    XYCropImageStyleLeftOneOfThird      =5,      // å·¦ä¾§ä¸‰åˆ†ä¹‹ä¸€éƒ¨åˆ†
    XYCropImageStyleRightQuarter        =6,      // å³ä¾§å››åˆ†ä¹‹ä¸€éƒ¨åˆ†
    XYCropImageStyleCenterRightQuarter  =7,      // ä¸­é—´å³ä¾§å››åˆ†ä¹‹ä¸€éƒ¨åˆ†
    XYCropImageStyleCenterLeftQuarter   =8,      // ä¸­é—´å·¦ä¾§å››åˆ†ä¹‹ä¸€éƒ¨åˆ†
    XYCropImageStyleLeftQuarter         =9,      // å·¦ä¾§å››åˆ†ä¹‹ä¸€éƒ¨åˆ†
};

@interface UIImage (Crop)
- (UIImage *)imageByCroppingWithStyle:(XYCropImageStyle)style;

@end
</code></pre>

<h3>UIImage+Crop.m</h3>

<pre><code>#import "UIImage+Crop.h"

@implementation UIImage (Crop)

- (UIImage *)imageByCroppingWithStyle:(XYCropImageStyle)style
{
    CGRect rect;
    switch (style) {
        case XYCropImageStyleLeft:
            rect = CGRectMake(0, 0, self.size.width/2, self.size.height);
            break;
        case XYCropImageStyleCenter:
            rect = CGRectMake(self.size.width/4, 0, self.size.width/2, self.size.height);
            break;
        case XYCropImageStyleRight:
            rect = CGRectMake(self.size.width/2, 0, self.size.width/2, self.size.height);
            break;
        case XYCropImageStyleLeftOneOfThird:
            rect = CGRectMake(0, 0, self.size.width/3, self.size.height);
            break;
        case XYCropImageStyleCenterOneOfThird:
            rect = CGRectMake(self.size.width/3, 0, self.size.width/3, self.size.height);
            break;
        case XYCropImageStyleRightOneOfThird:
            rect = CGRectMake(self.size.width/3*2, 0, self.size.width/3, self.size.height);
            break;
        case XYCropImageStyleLeftQuarter:
            rect = CGRectMake(0, 0, self.size.width/4, self.size.height);
            break;
        case XYCropImageStyleCenterLeftQuarter:
            rect = CGRectMake(self.size.width/4, 0, self.size.width/4, self.size.height);
            break;
        case XYCropImageStyleCenterRightQuarter:
            rect = CGRectMake(self.size.width/4*2, 0, self.size.width/4, self.size.height);
            break;
        case XYCropImageStyleRightQuarter:
            rect = CGRectMake(self.size.width/4*3, 0, self.size.width/4, self.size.height);
            break;
        default:
            break;
    }
    CGImageRef imageRef = self.CGImage;
    CGImageRef imagePartRef = CGImageCreateWithImageInRect(imageRef, rect);
    UIImage *cropImage = [UIImage imageWithCGImage:imagePartRef];
    CGImageRelease(imagePartRef);
    return cropImage;
}
</code></pre>

<h2>å®é™…è¿ç”¨</h2>

<p>ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚é¦–å…ˆï¼Œå…ˆåŠ è½½ä¸€ä¸ªå®Œæ•´çš„UIImageViewã€‚è¿™ä¸ªåº”è¯¥ä¸éš¾ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>

<pre><code>UIImageView *imgView = [[UIImageView alloc] init];
imgView.frame = CGRectMake((SCREEN.width - 226) / 2, 100, 226, 106);
UIImage *image = [UIImage imageNamed:@"ganggang"];
imgView.image = image;
[self.view addSubview:imgView];
</code></pre>

<p>è¿è¡Œä¸€ä¸‹ï¼š</p>

<p><img src="http://7xkkk9.com1.z0.glb.clouddn.com/jiequing.png" alt="jiequing" /></p>

<p>è¦å¯¹UIImageè¿›è¡Œè£å‰ªï¼Œé¦–å…ˆå¯¼å…¥å¤´æ–‡ä»¶ï¼š</p>

<pre><code>#import "UIImage+Crop.h"
</code></pre>

<p>åœ¨ä¸Šé¢<code>UIImage *image = [UIImage imageNamed:@"ganggang"];</code>è¿™æ®µä»£ç ä¹‹ååŠ ä¸Šä¸‹é¢è¿™å¥ï¼š</p>

<pre><code>image = [image imageByCroppingWithStyle:XYCropImageStyleLeft];
</code></pre>

<p><code>XYCropImageStyleLeft</code>æ˜¯æˆªå–ç…§ç‰‡çš„å·¦åŠéƒ¨åˆ†ã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>

<p><img src="http://7xkkk9.com1.z0.glb.clouddn.com/jiequed.png" alt="jiequed" /></p>

<p>æˆªå–æˆåŠŸï¼Œè¿˜å¯ä»¥æˆªå–å…¶ä»–åŒºåŸŸçš„ï¼Œåªéœ€è¦ä¼ å…¥ä¸åŒçš„<code>XYCropImageStyle</code>å³å¯å®ç°ã€‚ä»¥ä¸Šä»£ç ä¾ç„¶åœ¨<a href="https://github.com/worldligang/iOSStrongDemo">iOSStrongDemo</a>é‡Œã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ç¨‹åºå‘˜ï¼šè¿™ä¸ªå‘¨æœ«ä¸åŠ ç­]]></title>
    <link href="http://www.superqq.com/blog/2015/07/25/cheng-xu-yuan-:zhe-ge-zhou-mo-bu-jia-ban/"/>
    <updated>2015-07-25T09:01:33+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/25/cheng-xu-yuan-:zhe-ge-zhou-mo-bu-jia-ban</id>
    <content type="html"><![CDATA[<p>æ—¶é—´ä¾ç„¶æ²¡æœ‰åœä½å®ƒçš„è„šæ­¥ï¼Œæ–°çš„å‘¨æœ«å¦‚æœŸè€Œè‡³ã€‚è¿™åº”è¯¥æ˜¯ä¸€ä»¶ä»¤äººå…´å¥‹çš„æ—¶æœŸï¼Œè°ä¸æƒ³åº¦è¿‡ä¸€ä¸ªç¾å¥½çš„å‘¨æœ«å‘¢ï¼Ÿ</p>

<p>ä½œä¸ºç¨‹åºå‘˜æ¯å¤©éƒ½åœ¨è§£å†³æ°¸è¿œè§£ä¸å®Œçš„bugï¼Œåšç€æ°¸è¿œåšä¸å®Œçš„éœ€æ±‚ï¼Œèƒ½æœ‰ä¸ªå‘¨æœ«å¥½å¥½ä¼‘æ¯ä¼‘æ¯ï¼ŒçœŸçš„æ˜¯ä¸€ä»¶éå¸¸å¥¢ä¾ˆçš„äº‹æƒ…ã€‚</p>

<h2>æˆ‘ä¹Ÿæ˜¯åŠ ç­åŠ è¿‡æ¥çš„</h2>

<p>è¯´åˆ°è¿™ä¸ªè¯é¢˜åº”è¯¥æ˜¯ç¨‹åºå‘˜å¿ƒä¸­çš„ç—›å•Šï¼Œå“ªæœ‰ç¨‹åºå‘˜ä¸åŠ ç­çš„å‘¢ï¼Ÿæˆ‘åˆšè¿›å…¬å¸çš„æ—¶å€™ï¼Œå…¬å¸åˆšæˆç«‹ä¸ä¹…ã€‚ä¸ºäº†é¡¹ç›®è¿›åº¦ï¼Œæ‹¼å‘½çš„åŠ ç­ï¼Œè€æ¿æ¯å¤©éƒ½åœ¨å‚¬è¿›åº¦ã€‚</p>

<p>é‚£ä¸€æ®µæ—¶é—´ï¼Œå…¬å¸çš„ç¨‹åºå‘˜ä»¬åŸºæœ¬éƒ½æ˜¯å…«ä¹ç‚¹ä¸‹ç­ã€‚å¶å°”ä¸€æ¬¡è¿ç€å¤•é˜³ä¸‹ç­ï¼Œéƒ½é«˜å…´çš„ä¸å¾—äº†ã€‚ä¸ç¦æ„Ÿå¹ä¸€å¥ï¼Œç»ˆäºå¯ä»¥å’Œå¤ªé˜³ä¸€èµ·ä¸‹ç­å•¦ï¼</p>

<p>æ¯ä¸ªå‘¨å…­æ²¡æœ‰äº‹æƒ…ï¼Œå¤§å®¶ä¹Ÿéƒ½ä¹–ä¹–çš„æ¥åŠ ç­ã€‚å¬ç€è€æ¿ä¸æ–­çš„ç”»é¥¼ã€‚ä¸è¿‡å¥½åœ¨ï¼Œå…¬å¸çš„å‘å±•å¾ˆè¿…é€Ÿï¼Œäº§å“é”€å”®çš„ä¹Ÿè¿˜ä¸é”™ã€‚ä¸è¿‡è¿™å¥½åƒè·Ÿæˆ‘ä»¬ç¨‹åºå‘˜ä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰ã€‚</p>

<h2>å°‘åŠ ç­æˆ–æ‹’ç»åŠ ç­</h2>

<p>å…¬å¸å‘å±•çš„å¥½ï¼Œå¯¹äºç¨‹åºå‘˜æ¥è¯´è‚¯å®šæ˜¯ä¸€ä»¶å¥½äº‹ã€‚æ— è®ºè€æ¿æœ‰æ²¡æœ‰å…‘ç°å½“æ—¶ç”»é¥¼çš„æ‰¿è¯ºï¼Œæˆ‘ä»¬éƒ½åº”è¯¥ä¸ºå…¬å¸çš„è¿…é€Ÿå‘å±•è€Œé«˜å…´ã€‚</p>

<p>éšç€å…¬å¸çš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººæ‰ä¸æ–­åŠ å…¥å…¬å¸ã€‚æˆ‘å°±å–œæ¬¢å’Œå‰å®³çš„äººä¸€èµ·å·¥ä½œï¼Œè¿™æ ·å¯ä»¥å­¦åˆ°ä¸å°‘ä¸œè¥¿ï¼Œè¿™å¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯ä¸€ç§è¿›æ­¥ã€‚</p>

<p>æˆ‘æƒ³ä»¥åå¦‚æœæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«é‡è¦çš„äº‹æƒ…ï¼Œå°½é‡é€‰æ‹©å°‘åŠ ç­ï¼Œæˆ–è€…ç›´æ¥æ‹’ç»åŠ ç­ã€‚è¿™åº”è¯¥æ˜¯æˆ‘ä»¬çš„æƒåˆ©ã€‚å½“ç„¶ï¼Œè¯´æ˜¯è¿™ä¹ˆè¯´ã€‚å¦‚æœçœŸçš„éœ€è¦åŠ ç­ï¼Œé‚£è¿˜ä¼šä¹‰ä¸å®¹è¾çš„ï¼Œè°è®©æˆ‘ä»¬é€‰æ‹©è¿™ä¸ªè‹¦é€¼çš„è¡Œä¸šå‘¢ï¼</p>

<h2>è¿™ä¸ªå‘¨æœ«å¦‚ä½•åº¦è¿‡</h2>

<p>è¿™ä¸ªå‘¨æœ«æˆ‘é€‰æ‹©ä¸åŠ ç­ã€‚å‘¨å…­å‡†å¤‡å’Œé«˜ä¸­åŒå­¦ä¸€èµ·èšä¼šï¼Œå°±åœ¨ä¸Šæµ·ã€‚å¥½å‡ ä½åŒå­¦éƒ½æ˜¯åšç¨‹åºå‘˜çš„ï¼ˆç¬‘ï¼‰ï¼Œæœ‰çš„äººä»Šå¤©è¿˜æ˜¯è¯·å‡å‡ºæ¥èšä¼šçš„ã€‚</p>

<p>è‡ªä»é«˜ä¸­æ¯•ä¸šï¼Œç›¸è§çš„æœºä¼šè¶Šæ¥è¶Šå°‘ã€‚æ‰€ä»¥è¿™ä¸€æ¬¡èšä¼šå¤§å®¶éƒ½å¾ˆçæƒœã€‚</p>

<p>å‘¨æ—¥å¤§å­¦åŒå­¦æ¥ä¸Šæµ·ï¼Œä»–ä¸æ˜¯æ¥æ‰¾æˆ‘çš„ï¼Œä»–æ˜¯æ¥æ‰¾ä»–å¥³æœ‹å‹çš„ã€‚æˆ‘å‘¢ï¼Œè¿˜æ˜¯éœ€è¦è¿‡å»è§ä¸Šä¸€é¢ï¼Œä¸€èµ·èŠèŠå„è‡ªçš„æƒ…å†µï¼Œæ¯•ç«Ÿæ¥åˆ°ä¸Šæµ·å•¦ã€‚</p>

<p>è¿™ä¸ªå‘¨æœ«ä½ é€‰æ‹©å¦‚ä½•åº¦è¿‡å‘¢ï¼ŸÂ·</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSå¼€å‘ä¹‹æ²™ç›’å’Œæ–‡ä»¶æ“ä½œï¼ˆæ±‡æ€»ï¼‰]]></title>
    <link href="http://www.superqq.com/blog/2015/07/25/ioskai-fa-zhi-sha-he-he-wen-jian-cao-zuo-(hui-zong-)/"/>
    <updated>2015-07-25T00:15:17+08:00</updated>
    <id>http://www.superqq.com/blog/2015/07/25/ioskai-fa-zhi-sha-he-he-wen-jian-cao-zuo-(hui-zong-)</id>
    <content type="html"><![CDATA[<p>å…³äºæ²™ç›’å’Œæ–‡ä»¶æ“ä½œçš„æ–‡ç« å†™äº†å‡ ç¯‡ï¼Œåœ¨å†™çš„è¿‡ç¨‹ä¸­åŠ æ·±äº†è‡ªå·±çš„è®°å¿†ã€‚ä»Šå¤©æ¥åšä¸€ä¸‹æ±‡æ€»ï¼Œç®—æ˜¯å¯¹çŸ¥è¯†ç‚¹çš„æ¢³ç†ã€‚</p>

<h2>æ–‡ç« æ¢³ç†</h2>

<p>1 <a href="http://www.superqq.com/blog/2015/07/20/ioskai-fa-zhi-sha-he-ji-zhi-%28sandbox/">iOSå¼€å‘ä¹‹æ²™ç›’æœºåˆ¶ï¼ˆSandBox)</a></p>

<p>è¿™æ˜¯ä¸€ç¯‡å…³äºæ²™ç›’çš„åŸºç¡€çŸ¥è¯†æ•™ç¨‹ã€‚ç®€è¿°æ²™ç›’çš„ä½œç”¨ï¼Œå¯¹Documentsã€Libraryã€tmpä¹‹é—´çš„åŒºåˆ«åšäº†ä»‹ç»ã€‚é€šè¿‡ä¸¤ç§æ–¹æ³•æ‰“å¼€æ²™ç›’ï¼ŒæŸ¥çœ‹å…¶ä¸­çš„å†…å®¹ã€‚</p>

<p>2 <a href="http://www.superqq.com/blog/2015/07/22/ioskai-fa-zhi-huo-qu-sha-he-lu-jing/">iOSå¼€å‘ä¹‹è·å–æ²™ç›’è·¯å¾„</a></p>

<p>æ²™ç›’é‡Œçš„æ–‡ä»¶å¤¹åŒ…æ‹¬Documentsã€Libraryã€tmpã€‚æ–‡ç« ä»‹ç»äº†å¦‚ä½•è·å–Documentsã€Libraryã€Cachesã€tmpçš„è·¯å¾„ã€‚</p>

<p>3 <a href="http://www.superqq.com/blog/2015/07/23/ru-he-cha-kan-zhen-ji-de-sha-he-%28tu-wen-jiao-cheng-%29/">å¦‚ä½•æŸ¥çœ‹çœŸæœºçš„æ²™ç›’ï¼ˆå›¾æ–‡æ•™ç¨‹ï¼‰</a></p>

<p>é€šè¿‡å›¾æ–‡çš„æ–¹å¼è¯¦ç»†è®²è§£å¦‚ä½•æŸ¥çœ‹çœŸæœºæ²™ç›’ã€‚</p>

<p>4 <a href="http://www.superqq.com/blog/2015/07/24/nsfilemanagerwen-jian-cao-zuo-de-shi-ge-xiao-gong-neng/">NSFileManageræ–‡ä»¶æ“ä½œçš„åä¸ªå°åŠŸèƒ½</a></p>

<p>NSFileManageræ˜¯ä¸€ä¸ªå•åˆ—ç±»ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ç®¡ç†å™¨ã€‚å¯ä»¥é€šè¿‡NSFileManageråˆ›å»ºæ–‡ä»¶å¤¹ã€åˆ›å»ºæ–‡ä»¶ã€å†™æ–‡ä»¶ã€è¯»æ–‡ä»¶å†…å®¹ç­‰ç­‰åŸºæœ¬åŠŸèƒ½ã€‚</p>

<h2>å°è®°</h2>

<p>å¸Œæœ›ä»¥ä¸Šçš„çŸ¥è¯†æ¢³ç†èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½çš„æŒæ¡æ²™ç›’æœºåˆ¶ä»¥åŠæ–‡ä»¶æ“ä½œã€‚æˆ‘ä¼šæŒç»­åˆ†äº«æ›´å¤šå…³äºiOSå¼€å‘ç›¸å…³çš„æŠ€æœ¯æ–‡ç« ã€‚</p>

<p>swiftæ¨å‡ºè¿™ä¹ˆä¹…ï¼Œä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰å¼€å§‹ç”¨swiftå†™é¡¹ç›®ã€‚æ¨èç»™ä½ ä¸€ä¸ªswiftå­¦ä¹ ç½‘ç«™:<a href="http://www.iswifting.com/">swiftå¼€å‘</a></p>
]]></content>
  </entry>
  
</feed>
